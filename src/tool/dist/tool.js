import t from"stream";import e from"events";import n from"buffer";import r from"util";function i(t,e){const n=function(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(t,e);return n?Math.sqrt(n):n}function o(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function a(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}var s=function(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}(Math.random),u=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Math.random);function l(t,e){return t.map(((t,n)=>t+e[n]))}function c(t,e){return t.map(((t,n)=>t-e[n]))}function f(t,e){let n=0;for(let r=0;r<t.length;r++)n+=(t[r]-e[r])**2;return Math.sqrt(n)}class h{shape;k;initialLr;lr;sigma;maxIter;distanceFunction;locations;dim=-1;weights;constructor(t,e={}){this.shape=t,this.k=this.shape[0]*this.shape[1];const n={lr:1,sigma:1,maxIter:3e3,...e};this.initialLr=n.lr,this.lr=n.lr,this.sigma=n.sigma,this.maxIter=n.maxIter,null!=e.distanceFunction?this.distanceFunction=e.distanceFunction:this.distanceFunction=f,this.locations=function(t,e){const n=[];for(let r=0;r<t;r++)for(let t=0;t<e;t++)n.push([r,t]);return n}(this.shape[0],this.shape[1])}fit(t,e=1,n=!0){const r=t.length;this.dim=t[0].length;for(const e of t)if(e.length!=this.dim)throw new Error("Vectors must be of equal length");this.#t(t);let i=0;const o=Math.min(e*r,this.maxIter);for(let a=0;a<e&&!(i>this.maxIter);a++){let e=Array.from({length:r},((t,e)=>e));n&&s(e);for(const n of e){if(i>this.maxIter)break;const e=t[n];this.#e(e),i++,this.lr=(1-i/o)*this.initialLr}}}getResult(){return{locations:this.locations,weights:this.weights}}#e(t){const e=this.#n(t),n=this.locations[e],r=this.locations.map((t=>function(t,e){let n=0;for(let e of t)(e=+e)&&(n+=e);return n}(c(t,n).map((t=>t**2))))),i=r.map((t=>Math.exp(t/this.sigma**2/-1))).map((t=>t*this.lr)),o=this.weights.map(((e,n)=>c(t,e).map((t=>t*i[n]))));for(let t=0;t<this.weights.length;t++)this.weights[t]=l(this.weights[t],o[t])}#n(t){return function(t,e){let n,r=-1,i=-1;for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);return r}(this.weights.map((e=>this.distanceFunction(e,t))))}#t(t){const e=[];for(let n=0;n<this.dim;n++){const r=a(t,(t=>t[n])),o=i(t,(t=>t[n]));e.push(u(r,o))}this.weights=[];for(let t=0;t<this.k;t++)this.weights.push(Array.from({length:this.dim},((t,n)=>e[n]())))}predict(t){return t.map((t=>this.#n(t)))}}function d(t,e){let n=0;for(let r=0;r<t.length;r++)n+=(t[r]-e[r])*(t[r]-e[r]);return n}const p={distanceFunction:d};function m(t,e,n=p){const r=n.distanceFunction||p.distanceFunction,i=n.similarityFunction||p.similarityFunction;let o=-1;if("function"==typeof i){let n=Number.MIN_VALUE;for(let r=0;r<t.length;r++){const a=i(e,t[r]);a>n&&(n=a,o=r)}}else{if("function"!=typeof r)throw new Error("A similarity or distance function it's required");{let n=Number.MAX_VALUE;for(let i=0;i<t.length;i++){const a=r(e,t[i]);a<n&&(n=a,o=i)}}}return o}function g(t,e,n,r){for(let i=0;i<t.length;i++)n[i]=m(e,t[i],{distanceFunction:r});return n}let y=class{constructor(t,e,n,r,i){this.clusters=t,this.centroids=e,this.converged=n,this.iterations=r,this.distance=i}nearest(t){const e=new Array(t.length);return g(t,this.centroids,e,this.distance)}computeInformation(t){let e=this.centroids.map((t=>({centroid:t,error:0,size:0})));for(let n=0;n<t.length;n++)e[this.clusters[n]].error+=this.distance(t[n],this.centroids[this.clusters[n]]),e[this.clusters[n]].size++;for(let t=0;t<this.centroids.length;t++){let n=e[t].error;e[t].size&&-1!==n?n/=e[t].size:e[t].error=-1}return e}};const v=Object.prototype.toString;function w(t){const e=v.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function b(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!w(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!w(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!w(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,i=e.toIndex,o=void 0===i?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],s=r+1;s<o;s++)t[s]<a&&(a=t[s]);return a}(t),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!w(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,i=e.toIndex,o=void 0===i?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],s=r+1;s<o;s++)t[s]>a&&(a=t[s]);return a}(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,a=void 0===o?n.autoMinMax?r:0:o,s=n.max,u=void 0===s?n.autoMinMax?i:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-a)/(i-r),c=0;c<t.length;c++)e[c]=(t[c]-r)*l+a;return e}const _=" ".repeat(2),x=" ".repeat(4);function D(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=e;return`${t.constructor.name} {\n${_}[\n${x}${function(t,e,n,r,i){const{rows:o,columns:a}=t,s=Math.min(o,e),u=Math.min(a,n),l=[];if("auto"===i){i=!1;t:for(let e=0;e<s;e++)for(let n=0;n<u;n++)if(t.get(e,n)<0){i=!0;break t}}for(let e=0;e<s;e++){let n=[];for(let o=0;o<u;o++)n.push(E(t.get(e,o),r,i));l.push(`${n.join(" ")}`)}return u!==a&&(l[l.length-1]+=` ... ${a-n} more columns`),s!==o&&l.push(`... ${o-e} more rows`),l.join(`\n${x}`)}(t,n,r,i,o)}\n${_}]\n${_}rows: ${t.rows}\n${_}columns: ${t.columns}\n}`}function E(t,e,n){return(t>=0&&n?` ${A(t,e-1)}`:A(t,e)).padEnd(e)}function A(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function M(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function S(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function C(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function k(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function F(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(T("startRow",e),T("endRow",n),T("startColumn",r),T("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function N(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function T(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function B(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class z{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new I(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)r.set(i,t,n[i*e+t]);return r}static rowVector(t){let e=new I(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new I(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new I(t,e)}static ones(t,e){return new I(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new I(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)i.set(n,t,r());return i}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new I(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++){let e=r+Math.round(o()*a);s.set(n,t,e)}return s}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<r;t++)i.set(t,t,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),o=this.zeros(e,n);for(let e=0;e<i;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new I(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return z.isMatrix(t)?t:new I(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;for(;r>=0;)if(0===t.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===t.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=t.get(n,i);for(let a=i;a<e;a++){let e=t.get(n,a)-o*t.get(r,a);t.set(n,a,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new I(this.rows*e,this.columns*n);for(let t=0;t<e;t++)for(let e=0;e<n;e++)r.setSubMatrix(this,this.rows*t,this.columns*e);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){M(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return I.rowVector(this.getRow(t))}setRow(t,e){M(this,t),e=C(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){M(this,t),M(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){S(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return I.columnVector(this.getColumn(t))}setColumn(t,e){S(this,t),e=k(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){S(this,t),S(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=C(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=C(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=C(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=C(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=k(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=k(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=k(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=k(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){M(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){S(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){B(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){B(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(M(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){M(this,t),B(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(M(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){M(this,t),B(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(S(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){S(this,t),B(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(S(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){S(this,t),B(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n)*this.get(t,n);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){z.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=I.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new I(e,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,a,e)}}return i}strassen2x2(t){t=I.checkMatrix(t);let e=new I(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),l=t.get(1,1),c=(n+u)*(r+l),f=(a+u)*r,h=n*(o-l),d=u*(s-r),p=(n+i)*l,m=c+d-p+(i-u)*(s+l),g=h+p,y=f+d,v=c-f+h+(a-n)*(r+o);return e.set(0,0,m),e.set(0,1,g),e.set(1,0,y),e.set(1,1,v),e}strassen3x3(t){t=I.checkMatrix(t);let e=new I(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),f=t.get(0,0),h=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),y=t.get(2,0),v=t.get(2,1),w=t.get(2,2),b=(n-o)*(-h+m),_=(-n+o+a)*(f-h+m),x=(o+a)*(-f+h),D=n*f,E=(-n+u+l)*(f-d+g),A=(-n+u)*(d-g),M=(u+l)*(-f+d),S=(-i+l+c)*(m+y-v),C=(i-c)*(m-v),k=i*y,F=(l+c)*(-y+v),N=(-i+a+s)*(g+y-w),T=(i-s)*(g-w),B=(a+s)*(-y+w),z=D+k+r*p,O=(n+r+i-o-a-l-c)*m+_+x+D+S+k+F,R=D+E+M+(n+r+i-a-s-u-l)*g+k+N+B,P=b+a*(-f+h+p-m-g-y+w)+_+D+k+N+T,$=b+_+x+D+s*v,L=k+N+T+B+o*d,j=D+E+A+l*(-f+d+p-m-g-y+v)+S+C+k,U=S+C+k+F+u*h,q=D+E+A+M+c*w;return e.set(0,0,z),e.set(0,1,O),e.set(0,2,R),e.set(1,0,P),e.set(1,1,$),e.set(1,2,L),e.set(2,0,j),e.set(2,1,U),e.set(2,2,q),e}mmulStrassen(t){t=I.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function a(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=z.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,i),u=Math.max(r,o);return e=a(e,s,u),function t(e,n,r,i){if(r<=512||i<=512)return e.mmul(n);r%2==1&&i%2==1?(e=a(e,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(e=a(e,r+1,i),n=a(n,r+1,i)):i%2==1&&(e=a(e,r,i+1),n=a(n,r,i+1));let o=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),u=e.subMatrix(0,o-1,0,s-1),l=n.subMatrix(0,o-1,0,s-1),c=e.subMatrix(0,o-1,s,e.columns-1),f=n.subMatrix(0,o-1,s,n.columns-1),h=e.subMatrix(o,e.rows-1,0,s-1),d=n.subMatrix(o,n.rows-1,0,s-1),p=e.subMatrix(o,e.rows-1,s,e.columns-1),m=n.subMatrix(o,n.rows-1,s,n.columns-1),g=t(z.add(u,p),z.add(l,m),o,s),y=t(z.add(h,p),l,o,s),v=t(u,z.sub(f,m),o,s),w=t(p,z.sub(d,l),o,s),b=t(z.add(u,c),m,o,s),_=t(z.sub(h,u),z.add(l,f),o,s),x=t(z.sub(c,p),z.add(d,m),o,s),D=z.add(g,w);D.sub(b),D.add(x);let E=z.add(v,b),A=z.add(y,w),M=z.sub(g,y);M.add(v),M.add(_);let S=z.zeros(2*D.rows,2*D.columns);return S=S.setSubMatrix(D,0,0),S=S.setSubMatrix(E,D.rows,0),S=S.setSubMatrix(A,0,D.columns),S=S.setSubMatrix(M,D.rows,D.columns),S.subMatrix(0,r-1,0,i-1)}(e,t=a(t,s,u),s,u)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new I(this.rows,this.columns);for(let t=0;t<this.rows;t++){const i=this.getRow(t);i.length>0&&b(i,{min:e,max:n,output:i}),r.setRow(t,i)}return r}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new I(this.rows,this.columns);for(let t=0;t<this.columns;t++){const i=this.getColumn(t);i.length&&b(i,{min:e,max:n,output:i}),r.setColumn(t,i)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=I.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new I(e*r,n*i);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*e+s,this.get(a,e)*t.get(n,s));return o}kroneckerSum(t){if(t=I.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(I.eye(n,n)),i=I.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new I(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=O){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=O){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){F(this,t,e,n,r);let i=new I(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new I(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new I(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){if((t=I.checkMatrix(t)).isEmpty())return this;F(this,e,e+t.rows-1,n,n+t.columns-1);for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}selection(t,e){!function(t,e){if(!w(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}(this,t),function(t,e){if(!w(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}(this,e);let n=new I(t.length,e.length);for(let r=0;r<t.length;r++){let i=t[r];for(let t=0;t<e.length;t++){let o=e[t];n.set(r,t,this.get(i,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new I(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return function(t){let e=N(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){let e=N(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=N(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){let e=N(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!w(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,u=0;for(let e=0;e<i;e++)u=t.get(a,e)-n[a],r+=u,s+=u*u;e?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,r);case"column":if(!w(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,u=0;for(let e=0;e<r;e++)u=t.get(e,a)-n[a],i+=u,s+=u*u;e?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,r);case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");return function(t,e,n){const r=t.rows,i=t.columns,o=r*i;let a=0,s=0,u=0;for(let e=0;e<r;e++)for(let r=0;r<i;r++)u=t.get(e,r)-n,a+=u,s+=u*u;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,r);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let t=0;t<n.length;t++)n[t]=Math.sqrt(n[t]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!w(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,n),this;case"column":if(!w(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!w(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!w(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return D(this,t)}}function O(t,e){return t-e}z.prototype.klass="Matrix","undefined"!=typeof Symbol&&(z.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return D(this)}),z.random=z.rand,z.randomInt=z.randInt,z.diagonal=z.diag,z.prototype.diagonal=z.prototype.diag,z.identity=z.eye,z.prototype.negate=z.prototype.neg,z.prototype.tensorProduct=z.prototype.kroneckerProduct;let I=class t extends z{constructor(e,n){if(super(),t.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0){if(this.data=[],!(Number.isInteger(n)&&n>=0))throw new TypeError("nColumns must be a positive integer");for(let t=0;t<e;t++)this.data.push(new Float64Array(n))}else{if(!w(e))throw new TypeError("First argument must be a positive number or an array");{const t=e;if("number"!=typeof(n=(e=t.length)?t[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<e;r++){if(t[r].length!==n)throw new RangeError("Inconsistent array dimensions");if(!t[r].every((t=>"number"==typeof t)))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(t[r]))}}}this.rows=e,this.columns=n}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return M(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),M(this,t,!0),e=Float64Array.from(C(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){S(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),S(this,t,!0),e=k(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}};!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}(z,I);let R=class extends z{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}};class P{constructor(t){let e,n,r,i,o,a,s,u,l,c=(t=R.checkMatrix(t)).clone(),f=c.rows,h=c.columns,d=new Float64Array(f),p=1;for(e=0;e<f;e++)d[e]=e;for(u=new Float64Array(f),n=0;n<h;n++){for(e=0;e<f;e++)u[e]=c.get(e,n);for(e=0;e<f;e++){for(l=Math.min(e,n),o=0,r=0;r<l;r++)o+=c.get(e,r)*u[r];u[e]-=o,c.set(e,n,u[e])}for(i=n,e=n+1;e<f;e++)Math.abs(u[e])>Math.abs(u[i])&&(i=e);if(i!==n){for(r=0;r<h;r++)a=c.get(i,r),c.set(i,r,c.get(n,r)),c.set(n,r,a);s=d[i],d[i]=d[n],d[n]=s,p=-p}if(n<f&&0!==c.get(n,n))for(e=n+1;e<f;e++)c.set(e,n,c.get(e,n)/c.get(n,n))}this.LU=c,this.pivotVector=d,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=I.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=e.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<o;r++)a.set(i,r,a.get(i,r)/e.get(i,i));for(n=0;n<i;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new I(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new I(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function $(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class L{constructor(t){let e,n,r,i,o=(t=R.checkMatrix(t)).clone(),a=t.rows,s=t.columns,u=new Float64Array(s);for(r=0;r<s;r++){let t=0;for(e=r;e<a;e++)t=$(t,o.get(e,r));if(0!==t){for(o.get(r,r)<0&&(t=-t),e=r;e<a;e++)o.set(e,r,o.get(e,r)/t);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<s;n++){for(i=0,e=r;e<a;e++)i+=o.get(e,r)*o.get(e,n);for(i=-i/o.get(r,r),e=r;e<a;e++)o.set(e,n,o.get(e,n)+i*o.get(e,r))}}u[r]=-t}this.QR=o,this.Rdiag=u}solve(t){t=I.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,a,s=t.columns,u=t.clone(),l=e.columns;for(o=0;o<l;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=e.get(r,o)*u.get(r,i);for(a=-a/e.get(o,o),r=o;r<n;r++)u.set(r,i,u.get(r,i)+a*e.get(r,o))}for(o=l-1;o>=0;o--){for(i=0;i<s;i++)u.set(o,i,u.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(o,i)*e.get(r,o))}return u.subMatrix(0,l-1,0,s-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new I(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,o=i.rows,a=i.columns,s=new I(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<a;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<o;t++)r+=i.get(t,n)*s.get(t,e);for(r=-r/i.get(n,n),t=n;t<o;t++)s.set(t,e,s.get(t,e)+r*i.get(t,n))}}return s}}class j{constructor(t,e={}){if((t=R.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;let s,u=Boolean(i),l=Boolean(o),c=!1;if(n<r)if(a){s=t.transpose(),n=s.rows,r=s.columns,c=!0;let e=u;u=l,l=e}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();let f=Math.min(n,r),h=Math.min(n+1,r),d=new Float64Array(h),p=new I(n,f),m=new I(r,r),g=new Float64Array(r),y=new Float64Array(n),v=new Float64Array(h);for(let t=0;t<h;t++)v[t]=t;let w=Math.min(n-1,r),b=Math.max(0,Math.min(r-2,n)),_=Math.max(w,b);for(let t=0;t<_;t++){if(t<w){d[t]=0;for(let e=t;e<n;e++)d[t]=$(d[t],s.get(e,t));if(0!==d[t]){s.get(t,t)<0&&(d[t]=-d[t]);for(let e=t;e<n;e++)s.set(e,t,s.get(e,t)/d[t]);s.set(t,t,s.get(t,t)+1)}d[t]=-d[t]}for(let e=t+1;e<r;e++){if(t<w&&0!==d[t]){let r=0;for(let i=t;i<n;i++)r+=s.get(i,t)*s.get(i,e);r=-r/s.get(t,t);for(let i=t;i<n;i++)s.set(i,e,s.get(i,e)+r*s.get(i,t))}g[e]=s.get(t,e)}if(u&&t<w)for(let e=t;e<n;e++)p.set(e,t,s.get(e,t));if(t<b){g[t]=0;for(let e=t+1;e<r;e++)g[t]=$(g[t],g[e]);if(0!==g[t]){g[t+1]<0&&(g[t]=0-g[t]);for(let e=t+1;e<r;e++)g[e]/=g[t];g[t+1]+=1}if(g[t]=-g[t],t+1<n&&0!==g[t]){for(let e=t+1;e<n;e++)y[e]=0;for(let e=t+1;e<n;e++)for(let n=t+1;n<r;n++)y[e]+=g[n]*s.get(e,n);for(let e=t+1;e<r;e++){let r=-g[e]/g[t+1];for(let i=t+1;i<n;i++)s.set(i,e,s.get(i,e)+r*y[i])}}if(l)for(let e=t+1;e<r;e++)m.set(e,t,g[e])}}let x=Math.min(r,n+1);if(w<r&&(d[w]=s.get(w,w)),n<x&&(d[x-1]=0),b+1<x&&(g[b]=s.get(b,x-1)),g[x-1]=0,u){for(let t=w;t<f;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=w-1;t>=0;t--)if(0!==d[t]){for(let e=t+1;e<f;e++){let r=0;for(let i=t;i<n;i++)r+=p.get(i,t)*p.get(i,e);r=-r/p.get(t,t);for(let i=t;i<n;i++)p.set(i,e,p.get(i,e)+r*p.get(i,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(l)for(let t=r-1;t>=0;t--){if(t<b&&0!==g[t])for(let e=t+1;e<r;e++){let n=0;for(let i=t+1;i<r;i++)n+=m.get(i,t)*m.get(i,e);n=-n/m.get(t+1,t);for(let i=t+1;i<r;i++)m.set(i,e,m.get(i,e)+n*m.get(i,t))}for(let e=0;e<r;e++)m.set(e,t,0);m.set(t,t,1)}let D=x-1,E=Number.EPSILON;for(;x>0;){let t,e;for(t=x-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+E*Math.abs(d[t]+Math.abs(d[t+1]));if(Math.abs(g[t])<=e||Number.isNaN(g[t])){g[t]=0;break}}if(t===x-2)e=4;else{let n;for(n=x-1;n>=t&&n!==t;n--){let e=(n!==x?Math.abs(g[n]):0)+(n!==t+1?Math.abs(g[n-1]):0);if(Math.abs(d[n])<=E*e){d[n]=0;break}}n===t?e=3:n===x-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=g[x-2];g[x-2]=0;for(let n=x-2;n>=t;n--){let i=$(d[n],e),o=d[n]/i,a=e/i;if(d[n]=i,n!==t&&(e=-a*g[n-1],g[n-1]=o*g[n-1]),l)for(let t=0;t<r;t++)i=o*m.get(t,n)+a*m.get(t,x-1),m.set(t,x-1,-a*m.get(t,n)+o*m.get(t,x-1)),m.set(t,n,i)}break}case 2:{let e=g[t-1];g[t-1]=0;for(let r=t;r<x;r++){let i=$(d[r],e),o=d[r]/i,a=e/i;if(d[r]=i,e=-a*g[r],g[r]=o*g[r],u)for(let e=0;e<n;e++)i=o*p.get(e,r)+a*p.get(e,t-1),p.set(e,t-1,-a*p.get(e,r)+o*p.get(e,t-1)),p.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(d[x-1]),Math.abs(d[x-2]),Math.abs(g[x-2]),Math.abs(d[t]),Math.abs(g[t])),i=d[x-1]/e,o=d[x-2]/e,a=g[x-2]/e,s=d[t]/e,c=g[t]/e,f=((o+i)*(o-i)+a*a)/2,h=i*a*(i*a);let y=0;0===f&&0===h||(y=f<0?0-Math.sqrt(f*f+h):Math.sqrt(f*f+h),y=h/(f+y));let v=(s+i)*(s-i)+y,w=s*c;for(let e=t;e<x-1;e++){let i=$(v,w);0===i&&(i=Number.MIN_VALUE);let o=v/i,a=w/i;if(e!==t&&(g[e-1]=i),v=o*d[e]+a*g[e],g[e]=o*g[e]-a*d[e],w=a*d[e+1],d[e+1]=o*d[e+1],l)for(let t=0;t<r;t++)i=o*m.get(t,e)+a*m.get(t,e+1),m.set(t,e+1,-a*m.get(t,e)+o*m.get(t,e+1)),m.set(t,e,i);if(i=$(v,w),0===i&&(i=Number.MIN_VALUE),o=v/i,a=w/i,d[e]=i,v=o*g[e]+a*d[e+1],d[e+1]=-a*g[e]+o*d[e+1],w=a*g[e+1],g[e+1]=o*g[e+1],u&&e<n-1)for(let t=0;t<n;t++)i=o*p.get(t,e)+a*p.get(t,e+1),p.set(t,e+1,-a*p.get(t,e)+o*p.get(t,e+1)),p.set(t,e,i)}g[x-2]=v;break}case 4:if(d[t]<=0&&(d[t]=d[t]<0?-d[t]:0,l))for(let e=0;e<=D;e++)m.set(e,t,-m.get(e,t));for(;t<D&&!(d[t]>=d[t+1]);){let e=d[t];if(d[t]=d[t+1],d[t+1]=e,l&&t<r-1)for(let n=0;n<r;n++)e=m.get(n,t+1),m.set(n,t+1,m.get(n,t)),m.set(n,t,e);if(u&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);t++}x--}}if(c){let t=m;m=p,p=t}this.m=n,this.n=r,this.s=d,this.U=p,this.V=m}solve(t){let e=t,n=this.threshold,r=this.s.length,i=I.zeros(r,r);for(let t=0;t<r;t++)Math.abs(this.s[t])<=n?i.set(t,t,0):i.set(t,t,1/this.s[t]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),u=a.rows,l=o.rows,c=I.zeros(u,l);for(let t=0;t<u;t++)for(let e=0;e<l;e++){let n=0;for(let i=0;i<r;i++)n+=s.get(t,i)*o.get(e,i);c.set(t,e,n)}return c.mmul(e)}solveForDiagonal(t){return this.solve(I.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new I(n,this.s.length);for(let o=0;o<n;o++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(o,n,t.get(o,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,u=new I(n,a);for(let t=0;t<n;t++)for(let e=0;e<a;e++){let n=0;for(let r=0;r<s;r++)n+=i.get(t,r)*o.get(e,r);u.set(t,e,n)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return I.diag(this.s)}}function U(t,e){const n=65535&(t>>>=0);return((t-n)*(e>>>=0)>>>0)+n*e>>>0}class q{constructor(t=Date.now()){this.state=new Uint32Array(4),this.init(t),this.random=this.getFloat.bind(this)}getUint32(){return this.nextState(),this.state[3]+this.state[2]>>>0}getFloat(){return 5.960464477539063e-8*(this.getUint32()>>>8)}init(t){if(!Number.isInteger(t))throw new TypeError("seed must be an integer");this.state[0]=t,this.state[1]=0,this.state[2]=0,this.state[3]=0;for(let t=1;t<8;t++)this.state[3&t]^=t+U(1812433253,this.state[t-1&3]^this.state[t-1&3]>>>30>>>0)>>>0;this.periodCertification();for(let t=0;t<8;t++)this.nextState()}periodCertification(){0===this.state[0]&&0===this.state[1]&&0===this.state[2]&&0===this.state[3]&&(this.state[0]=88,this.state[1]=83,this.state[2]=65,this.state[3]=68)}nextState(){let t=this.state[0];t^=t<<15,t^=t>>>18,t^=this.state[3]<<11,this.state[0]=this.state[1],this.state[1]=this.state[2],this.state[2]=this.state[3],this.state[3]=t}}function V(t,e,n){const r=e();if(n){let t=0;for(;r>n[t];)t++;return t}return Math.floor(r*t)}class W{constructor(t=Math.random){if("number"==typeof t){const e=new q(t);this.randomGenerator=e.random}else this.randomGenerator=t}choice(t,e){return function(t,e={},n=Math.random){const{size:r=1,replace:i=!1,probabilities:o}=e;let a,s;if(a="number"==typeof t?function(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}(t):t.slice(),o){if(!i)throw new Error("choice with probabilities and no replacement is not implemented");if(o.length!==a.length)throw new Error("the length of probabilities option should be equal to the number of choices");s=[o[0]];for(let t=1;t<o.length;t++)s[t]=s[t-1]+o[t];if(Math.abs(1-s[s.length-1])>1e-8)throw new Error(`probabilities should sum to 1, but instead sums to ${s[s.length-1]}`)}if(!1===i&&r>a.length)throw new Error("size option is too large");const u=[];for(let t=0;t<r;t++){const t=V(a.length,n,s);u.push(a[t]),i||a.splice(t,1)}return u}(t,e,this.randomGenerator)}random(){return this.randomGenerator()}randInt(t,e){return void 0===e&&(e=t,t=0),t+Math.floor(this.randomGenerator()*(e-t))}randomSample(t){const e=[];for(let n=0;n<t;n++)e.push(this.random());return e}}function Z(t,e){const n=new I(t.rows,e.rows);for(let r=0;r<t.rows;r++)for(let i=0;i<e.rows;i++)n.set(r,i,d(t.getRow(r),e.getRow(i)));return n}function H(t){let e=[];for(let n=0;n<t;n++)e.push(n);return e}function Y(t){let e=[t[0]];for(let n=1;n<t.length;n++)e[n]=e[n-1]+t[n];return e}const X={maxIterations:100,tolerance:1e-6,initialization:"kmeans++",distanceFunction:d};function K(t,e,n,r,i,o){let a=function(t,e,n,r){const i=e[0].length;let o=new Array(r),a=new Array(r);for(let t=0;t<r;t++){o[t]=new Array(i),a[t]=0;for(let e=0;e<i;e++)o[t][e]=0}for(let t=0;t<e.length;t++){a[n[t]]++;for(let r=0;r<i;r++)o[n[t]][r]+=e[t][r]}for(let e=0;e<r;e++)for(let n=0;n<i;n++)a[e]?o[e][n]/=a[e]:o[e][n]=t[e][n];return o}(t,e,n=g(e,t,n,i.distanceFunction),r),s=function(t,e,n,r){for(let i=0;i<t.length;i++)if(n(t[i],e[i])>r)return!1;return!0}(a,t,i.distanceFunction,i.tolerance);return new y(n,a,s,o,i.distanceFunction)}var J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function G(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q,tt,et={exports:{}};Q=et,tt=function(){function t(t){return u(t,l(s(c(t.length),t),1/t.length))}function e(t){return s(f(t),t)}function n(t,e){return l(t,e?1/(t.length-1):1/t.length)}function r(t){var e=function(t){var e,n=Math.pow(2,-52),r=1e-64/n,i=0,o=0,a=0,s=0,u=0,l=h(t),c=l.length,f=l[0].length;if(c<f)throw"Need more rows than columns";var d=new Array(f),p=new Array(f);for(o=0;o<f;o++)d[o]=p[o]=0;var m=function t(e,n,r){void 0===r&&(r=0);var i,o=e[r],a=Array(o);if(r===e.length-1){for(i=o-2;i>=0;i-=2)a[i+1]=n,a[i]=n;return-1===i&&(a[0]=n),a}for(i=o-1;i>=0;i--)a[i]=t(e,n,r+1);return a}([f,f],0);function g(t,e){return(t=Math.abs(t))>(e=Math.abs(e))?t*Math.sqrt(1+e*e/t/t):0==e?t:e*Math.sqrt(1+t*t/e/e)}var y=0,v=0,w=0,b=0,_=0,x=0,D=0;for(o=0;o<f;o++){for(d[o]=v,D=0,u=o+1,a=o;a<c;a++)D+=l[a][o]*l[a][o];if(D<=r)v=0;else for(y=l[o][o],v=Math.sqrt(D),y>=0&&(v=-v),w=y*v-D,l[o][o]=y-v,a=u;a<f;a++){for(D=0,s=o;s<c;s++)D+=l[s][o]*l[s][a];for(y=D/w,s=o;s<c;s++)l[s][a]+=y*l[s][o]}for(p[o]=v,D=0,a=u;a<f;a++)D+=l[o][a]*l[o][a];if(D<=r)v=0;else{for(y=l[o][o+1],v=Math.sqrt(D),y>=0&&(v=-v),w=y*v-D,l[o][o+1]=y-v,a=u;a<f;a++)d[a]=l[o][a]/w;for(a=u;a<c;a++){for(D=0,s=u;s<f;s++)D+=l[a][s]*l[o][s];for(s=u;s<f;s++)l[a][s]+=D*d[s]}}(_=Math.abs(p[o])+Math.abs(d[o]))>b&&(b=_)}for(o=f-1;-1!=o;o+=-1){if(0!=v){for(w=v*l[o][o+1],a=u;a<f;a++)m[a][o]=l[o][a]/w;for(a=u;a<f;a++){for(D=0,s=u;s<f;s++)D+=l[o][s]*m[s][a];for(s=u;s<f;s++)m[s][a]+=D*m[s][o]}}for(a=u;a<f;a++)m[o][a]=0,m[a][o]=0;m[o][o]=1,v=d[o],u=o}for(o=f-1;-1!=o;o+=-1){for(u=o+1,v=p[o],a=u;a<f;a++)l[o][a]=0;if(0!=v){for(w=l[o][o]*v,a=u;a<f;a++){for(D=0,s=u;s<c;s++)D+=l[s][o]*l[s][a];for(y=D/w,s=o;s<c;s++)l[s][a]+=y*l[s][o]}for(a=o;a<c;a++)l[a][o]=l[a][o]/v}else for(a=o;a<c;a++)l[a][o]=0;l[o][o]+=1}for(n*=b,s=f-1;-1!=s;s+=-1)for(var E=0;E<50;E++){var A=!1;for(u=s;-1!=u;u+=-1){if(Math.abs(d[u])<=n){A=!0;break}if(Math.abs(p[u-1])<=n)break}if(!A){i=0,D=1;var M=u-1;for(o=u;o<s+1&&(y=D*d[o],d[o]=i*d[o],!(Math.abs(y)<=n));o++)for(w=g(y,v=p[o]),p[o]=w,i=v/w,D=-y/w,a=0;a<c;a++)_=l[a][M],x=l[a][o],l[a][M]=_*i+x*D,l[a][o]=-_*D+x*i}if(x=p[s],u==s){if(x<0)for(p[s]=-x,a=0;a<f;a++)m[a][s]=-m[a][s];break}if(E>=49)throw"Error: no convergence.";for(b=p[u],v=g(y=(((_=p[s-1])-x)*(_+x)+((v=d[s-1])-(w=d[s]))*(v+w))/(2*w*_),1),y=y<0?((b-x)*(b+x)+w*(_/(y-v)-w))/b:((b-x)*(b+x)+w*(_/(y+v)-w))/b,i=1,D=1,o=u+1;o<s+1;o++){for(v=d[o],_=p[o],w=D*v,v*=i,x=g(y,w),d[o-1]=x,y=b*(i=y/x)+v*(D=w/x),v=-b*D+v*i,w=_*D,_*=i,a=0;a<f;a++)b=m[a][o-1],x=m[a][o],m[a][o-1]=b*i+x*D,m[a][o]=-b*D+x*i;for(x=g(y,w),p[o-1]=x,y=(i=y/x)*v+(D=w/x)*_,b=-D*v+i*_,a=0;a<c;a++)_=l[a][o-1],x=l[a][o],l[a][o-1]=_*i+x*D,l[a][o]=-_*D+x*i}d[u]=0,d[s]=y,p[s]=b}for(o=0;o<p.length;o++)p[o]<n&&(p[o]=0);for(o=0;o<f;o++)for(a=o-1;a>=0;a--)if(p[a]<p[o]){for(i=p[a],p[a]=p[o],p[o]=i,s=0;s<l.length;s++)e=l[s][o],l[s][o]=l[s][a],l[s][a]=e;for(s=0;s<m.length;s++)e=m[s][o],m[s][o]=m[s][a],m[s][a]=e;o=a}return{U:l,S:p,V:m}}(t);console.log(e);var n=e.U;return e.S.map((function(t,e){var r={};return r.eigenvalue=t,r.vector=n.map((function(t,n){return-1*t[e]})),r}))}function i(e,...n){var r=n.map((function(t){return t.vector})),i=s(r,f(t(e))),o=l(s(c(e.length),e),-1/e.length);return{adjustedData:i,formattedAdjustedData:a(i,2),avgData:o,selectedVectors:r}}function o(i){return r(n(e(t(i)),!1))}function a(t,e){var n=Math.pow(10,e||2);return t.map((function(t,e){return t.map((function(t){return Math.round(t*n)/n}))}))}function s(t,e){if(!(t[0]&&e[0]&&t.length&&e.length))throw new Error("Both A and B should be matrices");if(e.length!==t[0].length)throw new Error("Columns in A should be the same as the number of rows in B");for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<e[0].length;i++)for(var o=0;o<t[0].length;o++)n[r][i]=n[r][i]?n[r][i]+t[r][o]*e[o][i]:t[r][o]*e[o][i]}return n}function u(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw new Error("Both A and B should have the same dimensions");for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<e[0].length;i++)n[r][i]=t[r][i]-e[r][i]}return n}function l(t,e){for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<t[0].length;i++)n[r][i]=t[r][i]*e}return n}function c(t){for(var e=[],n=0;n<t;n++){e[n]=[];for(var r=0;r<t;r++)e[n][r]=1}return e}function f(t){return h(t)[0].map((function(e,n){return t.map((function(t){return t[n]}))}))}function h(t){var e=JSON.stringify(t);return JSON.parse(e)}return{computeDeviationScores:e,computeDeviationMatrix:t,computeSVD:r,computePercentageExplained:function(t,...e){var n=t.map((function(t){return t.eigenvalue})).reduce((function(t,e){return t+e}));return e.map((function(t){return t.eigenvalue})).reduce((function(t,e){return t+e}))/n},computeOriginalData:function(t,e,n){var r=u(f(s(f(e),t)),n);return{originalData:r,formattedOriginalData:a(r,2)}},computeVarianceCovariance:n,computeAdjustedData:i,getEigenVectors:o,analyseTopResult:function(t){var e=o(t).sort((function(t,e){return e.eigenvalue-t.eigenvalue}));return console.log("Sorted Vectors",e),i(t,e[0].vector)},transpose:f,multiply:s,clone:h,scale:l}}(),Q.exports=tt;var nt=et.exports,rt={},ot={},at={},st={},ut=J&&J.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function lt(t,e){return Math.floor(e()*t)}function ct(t){for(var e=[],n=0;n<t;n++)e.push(void 0);return e}function ft(t,e){return ct(t).map((function(){return e}))}function ht(t){return ft(t,0)}function dt(t){return t.reduce((function(t,e){return t+e}))}Object.defineProperty(st,"__esModule",{value:!0}),st.tauRandInt=lt,st.tauRand=function(t){return t()},st.norm=function(t){var e,n,r=0;try{for(var i=ut(t),o=i.next();!o.done;o=i.next()){var a=o.value;r+=Math.pow(a,2)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return Math.sqrt(r)},st.empty=ct,st.range=function(t){return ct(t).map((function(t,e){return e}))},st.filled=ft,st.zeros=ht,st.ones=function(t){return ft(t,1)},st.linear=function(t,e,n){return ct(n).map((function(r,i){return t+i*((e-t)/(n-1))}))},st.sum=dt,st.mean=function(t){return dt(t)/t.length},st.max=function(t){for(var e=0,n=0;n<t.length;n++)e=t[n]>e?t[n]:e;return e},st.max2d=function(t){for(var e=0,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)e=t[n][r]>e?t[n][r]:e;return e},st.rejectionSample=function(t,e,n){for(var r=ht(t),i=0;i<t;i++)for(var o=!0;o;){for(var a=lt(e,n),s=!1,u=0;u<i;u++)if(a===r[u]){s=!0;break}s||(o=!1),r[i]=a}return r},st.reshape2d=function(t,e,n){var r=[],i=0;if(t.length!==e*n)throw new Error("Array dimensions must match input length.");for(var o=0;o<e;o++){for(var a=[],s=0;s<n;s++)a.push(t[i]),i+=1;r.push(a)}return r};var pt=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(at,"__esModule",{value:!0});var mt=pt(st);function gt(t,e){var n=function(n){return mt.empty(t).map((function(){return mt.filled(e,n)}))},r=[];return r.push(n(-1)),r.push(n(1/0)),r.push(n(0)),r}function yt(t,e,n,r,i){e=Math.floor(e);var o=t[0][e],a=t[1][e];if(t[2][e],n>=a[0])return 0;for(var s=0;s<o.length;s++)if(r===o[s])return 0;return vt(t,e,n,r,i)}function vt(t,e,n,r,i){var o=t[0][e],a=t[1][e],s=t[2][e];if(n>=a[0])return 0;a[0]=n,o[0]=r,s[0]=i;for(var u=0,l=0;;){var c=2*u+1,f=c+1,h=t[0][0].length;if(c>=h)break;if(f>=h){if(!(a[c]>n))break;l=c}else if(a[c]>=a[f]){if(!(n<a[c]))break;l=c}else{if(!(n<a[f]))break;l=f}a[u]=a[l],o[u]=o[l],s[u]=s[l],u=l}return a[u]=n,o[u]=r,s[u]=i,1}function wt(t,e,n,r){for(;2*r+1<n;){var i=2*r+1,o=i+1,a=r;if(t[a]<t[i]&&(a=i),o<n&&t[a]<t[o]&&(a=o),a===r)break;var s=t[r];t[r]=t[a],t[a]=s;var u=e[r];e[r]=e[a],e[a]=u,r=a}}at.makeHeap=gt,at.rejectionSample=function(t,e,n){for(var r=mt.zeros(t),i=0;i<t;i++){for(var o=!0,a=0;o;){a=mt.tauRandInt(e,n);for(var s=!1,u=0;u<i;u++)if(a===r[u]){s=!0;break}s||(o=!1)}r[i]=a}return r},at.heapPush=yt,at.uncheckedHeapPush=vt,at.buildCandidates=function(t,e,n,r,i){for(var o=gt(e,r),a=0;a<e;a++)for(var s=0;s<n;s++)if(!(t[0][a][s]<0)){var u=t[0][a][s],l=t[2][a][s],c=mt.tauRand(i);yt(o,a,c,u,l),yt(o,u,c,a,l),t[2][a][s]=0}return o},at.deheapSort=function(t){for(var e=t[0],n=t[1],r=0;r<e.length;r++)for(var i=e[r],o=n[r],a=0;a<i.length-1;a++){var s=i.length-a-1,u=o.length-a-1,l=i[0];i[0]=i[s],i[s]=l;var c=o[0];o[0]=o[u],o[u]=c,wt(o,i,u,0)}return{indices:e,weights:n}},at.smallestFlagged=function(t,e){for(var n=t[0][e],r=t[1][e],i=t[2][e],o=1/0,a=-1,s=0;s>n.length;s++)1===i[s]&&r[s]<o&&(o=r[s],a=s);return a>=0?(i[a]=0,Math.floor(n[a])):-1};var bt,_t={},xt=J&&J.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Dt=J&&J.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Et=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(_t,"__esModule",{value:!0});var At=Et(st),Mt=function(){function t(t,e,n,r){if(this.entries=new Map,this.nRows=0,this.nCols=0,t.length!==e.length||t.length!==n.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=r[0],this.nCols=r[1];for(var i=0;i<n.length;i++){var o=t[i],a=e[i];this.checkDims(o,a);var s=this.makeKey(o,a);this.entries.set(s,{value:n[i],row:o,col:a})}}return t.prototype.makeKey=function(t,e){return t+":"+e},t.prototype.checkDims=function(t,e){if(!(t<this.nRows&&e<this.nCols))throw new Error("row and/or col specified outside of matrix dimensions")},t.prototype.set=function(t,e,n){this.checkDims(t,e);var r=this.makeKey(t,e);this.entries.has(r)?this.entries.get(r).value=n:this.entries.set(r,{value:n,row:t,col:e})},t.prototype.get=function(t,e,n){void 0===n&&(n=0),this.checkDims(t,e);var r=this.makeKey(t,e);return this.entries.has(r)?this.entries.get(r).value:n},t.prototype.getAll=function(t){void 0===t&&(t=!0);var e=[];return this.entries.forEach((function(t){e.push(t)})),t&&e.sort((function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row})),e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return Array.from(this.entries,(function(t){var e=xt(t,2);return e[0],e[1].row}))},t.prototype.getCols=function(){return Array.from(this.entries,(function(t){var e=xt(t,2);return e[0],e[1].col}))},t.prototype.getValues=function(){return Array.from(this.entries,(function(t){var e=xt(t,2);return e[0],e[1].value}))},t.prototype.forEach=function(t){this.entries.forEach((function(e){return t(e.value,e.row,e.col)}))},t.prototype.map=function(e){var n=[];this.entries.forEach((function(t){n.push(e(t.value,t.row,t.col))}));var r=[this.nRows,this.nCols];return new t(this.getRows(),this.getCols(),n,r)},t.prototype.toArray=function(){var t=this,e=At.empty(this.nRows).map((function(){return At.zeros(t.nCols)}));return this.entries.forEach((function(t){e[t.row][t.col]=t.value})),e},t}();_t.SparseMatrix=Mt,_t.transpose=function(t){var e=[],n=[],r=[];t.forEach((function(t,i,o){e.push(i),n.push(o),r.push(t)}));var i=[t.nCols,t.nRows];return new Mt(n,e,r,i)},_t.identity=function(t){for(var e=xt(t,1)[0],n=new Mt([],[],[],t),r=0;r<e;r++)n.set(r,r,1);return n},_t.pairwiseMultiply=function(t,e){return Ct(t,e,(function(t,e){return t*e}))},_t.add=function(t,e){return Ct(t,e,(function(t,e){return t+e}))},_t.subtract=function(t,e){return Ct(t,e,(function(t,e){return t-e}))},_t.maximum=function(t,e){return Ct(t,e,(function(t,e){return t>e?t:e}))},_t.multiplyScalar=function(t,e){return t.map((function(t){return t*e}))},_t.eliminateZeros=function(t){for(var e=new Set,n=t.getValues(),r=t.getRows(),i=t.getCols(),o=0;o<n.length;o++)0===n[o]&&e.add(o);var a=function(t,n){return!e.has(n)},s=n.filter(a),u=r.filter(a),l=i.filter(a);return new Mt(u,l,s,t.getDims())},_t.normalize=function(t,e){var n,r;void 0===e&&(e="l2");var i=St[e],o=new Map;t.forEach((function(t,e,n){var r=o.get(e)||[];r.push(n),o.set(e,r)}));var a=new Mt([],[],[],t.getDims()),s=function(e){for(var n=o.get(e).sort(),r=n.map((function(n){return t.get(e,n)})),s=i(r),u=0;u<s.length;u++)a.set(e,n[u],s[u])};try{for(var u=Dt(o.keys()),l=u.next();!l.done;l=u.next())s(l.value)}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return a};var St=((bt={}).max=function(t){for(var e=-1/0,n=0;n<t.length;n++)e=t[n]>e?t[n]:e;return t.map((function(t){return t/e}))},bt.l1=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return t.map((function(t){return t/e}))},bt.l2=function(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return t.map((function(t){return Math.sqrt(Math.pow(t,2)/e)}))},bt);function Ct(t,e,n){for(var r=new Set,i=[],o=[],a=[],s=function(r,s){i.push(r),o.push(s);var u=n(t.get(r,s),e.get(r,s));a.push(u)},u=t.getValues(),l=t.getRows(),c=t.getCols(),f=0;f<u.length;f++){var h=(g=l[f])+":"+(y=c[f]);r.add(h),s(g,y)}var d=e.getValues(),p=e.getRows(),m=e.getCols();for(f=0;f<d.length;f++){var g,y;h=(g=p[f])+":"+(y=m[f]),r.has(h)||s(g,y)}var v=[t.nRows,t.nCols];return new Mt(i,o,a,v)}_t.getCSR=function(t){var e=[];t.forEach((function(t,n,r){e.push({value:t,row:n,col:r})})),e.sort((function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row}));for(var n=[],r=[],i=[],o=-1,a=0;a<e.length;a++){var s=e[a],u=s.row,l=s.col,c=s.value;u!==o&&(o=u,i.push(a)),n.push(l),r.push(c)}return{indices:n,values:r,indptr:i}};var kt={},Ft={},Nt=J&&J.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Tt=J&&J.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Nt(arguments[e]));return t},Bt=J&&J.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},zt=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(Ft,"__esModule",{value:!0});var Ot=zt(st),It=function(t,e,n,r){this.hyperplanes=t,this.offsets=e,this.children=n,this.indices=r};function Rt(t,e,n,r,i){if(void 0===n&&(n=30),e.length>n){var o=function(t,e,n){var r=t[0].length,i=Ot.tauRandInt(e.length,n),o=Ot.tauRandInt(e.length,n);o=(o+=i===o?1:0)%e.length;for(var a=e[i],s=e[o],u=0,l=Ot.zeros(r),c=0;c<l.length;c++)l[c]=t[a][c]-t[s][c],u-=l[c]*(t[a][c]+t[s][c])/2;var f=0,h=0,d=Ot.zeros(e.length);for(c=0;c<e.length;c++){for(var p=u,m=0;m<r;m++)p+=l[m]*t[e[c]][m];0===p?(d[c]=Ot.tauRandInt(2,n),0===d[c]?f+=1:h+=1):p>0?(d[c]=0,f+=1):(d[c]=1,h+=1)}var g=Ot.zeros(f),y=Ot.zeros(h);for(f=0,h=0,c=0;c<d.length;c++)0===d[c]?(g[f]=e[c],f+=1):(y[h]=e[c],h+=1);return{indicesLeft:g,indicesRight:y,hyperplane:l,offset:u}}(t,e,i),a=o.indicesLeft,s=o.indicesRight,u=o.hyperplane,l=o.offset;return{leftChild:Rt(t,a,n,r+1,i),rightChild:Rt(t,s,n,r+1,i),isLeaf:!1,hyperplane:u,offset:l}}return{indices:e,isLeaf:!0}}function Pt(t,e,n,r,i,o,a){var s;if(t.isLeaf)return r[o][0]=-a,(s=i[a]).splice.apply(s,Tt([0,t.indices.length],t.indices)),{nodeNum:o,leafNum:a+=1};e[o]=t.hyperplane,n[o]=t.offset,r[o][0]=o+1;var u=o,l=Pt(t.leftChild,e,n,r,i,o+1,a);return o=l.nodeNum,a=l.leafNum,r[u][1]=o+1,{nodeNum:(l=Pt(t.rightChild,e,n,r,i,o+1,a)).nodeNum,leafNum:l.leafNum}}function $t(t){return t.isLeaf?1:1+$t(t.leftChild)+$t(t.rightChild)}function Lt(t){return t.isLeaf?1:Lt(t.leftChild)+Lt(t.rightChild)}function jt(t,e,n,r){for(var i=e,o=0;o<n.length;o++)i+=t[o]*n[o];return 0===i?Ot.tauRandInt(2,r):i>0?0:1}Ft.FlatTree=It,Ft.makeForest=function(t,e,n,r){var i=Math.max(10,e),o=Ot.range(n).map((function(e,n){return function(t,e,n,r){return void 0===e&&(e=30),Rt(t,Ot.range(t.length),e,n,r)}(t,i,n,r)})),a=o.map((function(t){return function(t,e){var n=$t(t),r=Lt(t),i=Ot.range(n).map((function(){return Ot.zeros(t.hyperplane?t.hyperplane.length:0)})),o=Ot.zeros(n),a=Ot.range(n).map((function(){return[-1,-1]})),s=Ot.range(r).map((function(){return Ot.range(e).map((function(){return-1}))}));return Pt(t,i,o,a,s,0,0),new It(i,o,a,s)}(t,i)}));return a},Ft.makeLeafArray=function(t){var e,n;if(t.length>0){var r=[];try{for(var i=Bt(t),o=i.next();!o.done;o=i.next()){var a=o.value;r.push.apply(r,Tt(a.indices))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return[[-1]]},Ft.searchFlatTree=function(t,e,n){for(var r=0;e.children[r][0]>0;)r=0===jt(e.hyperplanes[r],e.offsets[r],t,n)?e.children[r][0]:e.children[r][1];var i=-1*e.children[r][0];return e.indices[i]};var Ut=J&&J.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},qt=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(kt,"__esModule",{value:!0});var Vt=qt(at),Wt=qt(_t),Zt=qt(Ft),Ht=qt(st);kt.makeNNDescent=function(t,e){return function(n,r,i,o,a,s,u,l){void 0===o&&(o=10),void 0===a&&(a=50),void 0===s&&(s=.001),void 0===u&&(u=.5),void 0===l&&(l=!0);for(var c=n.length,f=Vt.makeHeap(n.length,i),h=0;h<n.length;h++)for(var d=Vt.rejectionSample(i,n.length,e),p=0;p<d.length;p++){var m=t(n[h],n[d[p]]);Vt.heapPush(f,h,m,d[p],1),Vt.heapPush(f,d[p],m,h,1)}if(l)for(var g=0;g<r.length;g++)for(h=0;h<r[g].length&&!(r[g][h]<0);h++)for(p=h+1;p<r[g].length&&!(r[g][p]<0);p++)m=t(n[r[g][h]],n[r[g][p]]),Vt.heapPush(f,r[g][h],m,r[g][p],1),Vt.heapPush(f,r[g][p],m,r[g][h],1);for(g=0;g<o;g++){var y=Vt.buildCandidates(f,c,i,a,e),v=0;for(h=0;h<c;h++)for(p=0;p<a;p++){var w=Math.floor(y[0][h][p]);if(!(w<0||Ht.tauRand(e)<u))for(var b=0;b<a;b++){var _=Math.floor(y[0][h][b]),x=y[2][h][p],D=y[2][h][b];_<0||!x&&!D||(m=t(n[w],n[_]),v+=Vt.heapPush(f,w,m,_,1),v+=Vt.heapPush(f,_,m,w,1))}}if(v<=s*i*n.length)break}return Vt.deheapSort(f)}},kt.makeInitializations=function(t){return{initFromRandom:function(e,n,r,i,o){for(var a=0;a<r.length;a++)for(var s=Ht.rejectionSample(e,n.length,o),u=0;u<s.length;u++)if(!(s[u]<0)){var l=t(n[s[u]],r[a]);Vt.heapPush(i,a,l,s[u],1)}},initFromTree:function(e,n,r,i,o){for(var a=0;a<r.length;a++)for(var s=Zt.searchFlatTree(r[a],e,o),u=0;u<s.length;u++){if(s[u]<0)return;var l=t(n[s[u]],r[a]);Vt.heapPush(i,a,l,s[u],1)}}}},kt.makeInitializedNNSearch=function(t){return function(e,n,r,i){for(var o,a,s=Wt.getCSR(n),u=s.indices,l=s.indptr,c=0;c<i.length;c++)for(var f=new Set(r[0][c]);;){var h=Vt.smallestFlagged(r,c);if(-1===h)break;var d=u.slice(l[h],l[h+1]);try{for(var p=Ut(d),m=p.next();!m.done;m=p.next()){var g=m.value;if(g!==h&&-1!==g&&!f.has(g)){var y=t(e[g],i[c]);Vt.uncheckedHeapPush(r,c,y,g,1),f.add(g)}}}catch(t){o={error:t}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}return r}},kt.initializeSearch=function(t,e,n,r,i,o,a){var s,u,l=Vt.makeHeap(n.length,r);if(i(r,e,n,l,a),t)try{for(var c=Ut(t),f=c.next();!f.done;f=c.next())o(f.value,e,n,l,a)}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}return l};const Yt=Object.prototype.toString;function Xt(t){return Yt.call(t).endsWith("Array]")}function Kt(t,e,n){let r=0;const i=n(e);for(let e=0;e<t.x.length;e++)r+=Math.abs(t.y[e]-i(t.x[e]));return r}function Jt(t,e,n,r,i){let o=n*r*r,a=I.eye(e.length,e.length,o);const s=i(e);let u=new Float64Array(t.x.length);for(let e=0;e<t.x.length;e++)u[e]=s(t.x[e]);let l=function(t,e,n,r,i){const o=n.length,a=t.x.length;let s=new Array(o);for(let u=0;u<o;u++){s[u]=new Array(a);let o=n.slice();o[u]+=r;let l=i(o);for(let n=0;n<a;n++)s[u][n]=e[n]-l(t.x[n])}return new I(s)}(t,u,e,r,i),c=function(t,e){const n=t.x.length;let r=new Array(n);for(let i=0;i<n;i++)r[i]=[t.y[i]-e[i]];return new I(r)}(t,u),f=function(t,e=!1){return t=R.checkMatrix(t),e?new j(t).inverse():function(t,e,n=!1){return t=R.checkMatrix(t),e=R.checkMatrix(e),n?new j(t).solve(e):t.isSquare()?new P(t).solve(e):new L(t).solve(e)}(t,I.eye(t.rows))}(a.add(l.mmul(l.transpose())));return(e=(e=new I([e])).sub(f.mmul(l).mmul(c).mul(r).transpose())).to1DArray()}var Gt=function(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}(Object.freeze({__proto__:null,default:function(t,e,n={}){let{maxIterations:r=100,gradientDifference:i=.1,damping:o=0,errorTolerance:a=.01,minValues:s,maxValues:u,initialValues:l}=n;if(o<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Xt(t.x)||t.x.length<2||!Xt(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");let c=l||new Array(e.length).fill(1),f=c.length;if(u=u||new Array(f).fill(Number.MAX_SAFE_INTEGER),s=s||new Array(f).fill(Number.MIN_SAFE_INTEGER),u.length!==s.length)throw new Error("minValues and maxValues must be the same size");if(!Xt(c))throw new Error("initialValues must be an array");let h,d=Kt(t,c,e),p=d<=a;for(h=0;h<r&&!p;h++){c=Jt(t,c,o,i,e);for(let t=0;t<f;t++)c[t]=Math.min(Math.max(s[t],c[t]),u[t]);if(d=Kt(t,c,e),isNaN(d))break;p=d<=a}return{parameterValues:c,parameterError:d,iterations:h}}})),Qt=J&&J.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},te=J&&J.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ee=J&&J.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ne=J&&J.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ee(arguments[e]));return t},re=J&&J.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},ie=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ot,"__esModule",{value:!0});var oe=re(at),ae=re(_t),se=re(kt),ue=re(Ft),le=re(st),ce=ie(Gt),fe=1e-5,he=.001,de=function(){function t(t){void 0===t&&(t={});var e=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=pe,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new me;var n=function(n){void 0!==t[n]&&(e[n]=t[n])};n("distanceFn"),n("learningRate"),n("localConnectivity"),n("minDist"),n("nComponents"),n("nEpochs"),n("nNeighbors"),n("negativeSampleRate"),n("random"),n("repulsionStrength"),n("setOpMixRatio"),n("spread"),n("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,e){return void 0===e&&(e=function(){return!0}),Qt(this,void 0,void 0,(function(){return te(this,(function(n){switch(n.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(e)];case 1:return n.sent(),[2,this.embedding]}}))}))},t.prototype.setSupervisedProjection=function(t,e){void 0===e&&(e={}),this.Y=t,this.targetMetric=e.targetMetric||this.targetMetric,this.targetWeight=e.targetWeight||this.targetWeight,this.targetNNeighbors=e.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,e){this.knnIndices=t,this.knnDistances=e},t.prototype.initializeFit=function(t){if(t.length<=this.nNeighbors)throw new Error("Not enough data points ("+t.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var e=this.nearestNeighbors(t);this.knnIndices=e.knnIndices,this.knnDistances=e.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var n=this.initializeSimplicialSetEmbedding(),r=n.head,i=n.tail,o=n.epochsPerSample;return this.optimizationState.head=r,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=se.makeInitializations(this.distanceFn),e=t.initFromTree,n=t.initFromRandom;this.initFromTree=e,this.initFromRandom=n,this.search=se.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var e=this.knnIndices,n=this.knnDistances,r=[t.length,t.length],i=new ae.SparseMatrix([],[],[],r),o=0;o<e.length;o++)for(var a=e[o],s=n[o],u=0;u<a.length;u++){var l=a[u],c=s[u];c>0&&i.set(o,l,c)}var f=ae.transpose(i);return ae.maximum(i,f)},t.prototype.transform=function(t){var e=this,n=this.X;if(void 0===n||0===n.length)throw new Error("No data has been fit.");var r=Math.floor(this.nNeighbors*this.transformQueueSize);r=Math.min(n.length,r);var i=se.initializeSearch(this.rpForest,n,t,r,this.initFromRandom,this.initFromTree,this.random),o=this.search(n,this.searchGraph,i,t),a=oe.deheapSort(o),s=a.indices,u=a.weights;s=s.map((function(t){return t.slice(0,e.nNeighbors)})),u=u.map((function(t){return t.slice(0,e.nNeighbors)}));var l=Math.max(0,this.localConnectivity-1),c=this.smoothKNNDistance(u,this.nNeighbors,l),f=c.sigmas,h=c.rhos,d=this.computeMembershipStrengths(s,u,f,h),p=d.rows,m=d.cols,g=d.vals,y=[t.length,n.length],v=new ae.SparseMatrix(p,m,g,y),w=ae.normalize(v,"l1"),b=ae.getCSR(w),_=t.length,x=_e(le.reshape2d(b.indices,_,this.nNeighbors),le.reshape2d(b.values,_,this.nNeighbors),this.embedding),D=this.nEpochs?this.nEpochs/3:v.nRows<=1e4?100:30,E=v.getValues().reduce((function(t,e){return e>t?e:t}),0);v=v.map((function(t){return t<E/D?0:t})),v=ae.eliminateZeros(v);var A=this.makeEpochsPerSample(v.getValues(),D),M=v.getRows(),S=v.getCols();return this.assignOptimizationStateParameters({headEmbedding:x,tailEmbedding:this.embedding,head:M,tail:S,currentEpoch:0,nEpochs:D,nVertices:v.getDims()[1],epochsPerSample:A}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,e=this.X;if(t){if(t.length!==e.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var n=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,n)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var e,n=this.distanceFn,r=this.nNeighbors,i=se.makeNNDescent(n,this.random),o=5+Math.floor(.5==(e=Math.pow(t.length,.5)/20)?0:Math.round(e)),a=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length))));this.rpForest=ue.makeForest(t,r,o,this.random);var s=i(t,ue.makeLeafArray(this.rpForest),r,a);return{knnIndices:s.indices,knnDistances:s.weights}},t.prototype.fuzzySimplicialSet=function(t,e,n){void 0===n&&(n=1);var r=this,i=r.knnIndices,o=void 0===i?[]:i,a=r.knnDistances,s=void 0===a?[]:a,u=r.localConnectivity,l=this.smoothKNNDistance(s,e,u),c=l.sigmas,f=l.rhos,h=this.computeMembershipStrengths(o,s,c,f),d=h.rows,p=h.cols,m=h.vals,g=[t.length,t.length],y=new ae.SparseMatrix(d,p,m,g),v=ae.transpose(y),w=ae.pairwiseMultiply(y,v),b=ae.subtract(ae.add(y,v),w),_=ae.multiplyScalar(b,n),x=ae.multiplyScalar(w,1-n);return ae.add(_,x)},t.prototype.categoricalSimplicialSetIntersection=function(t,e,n,r){void 0===r&&(r=1);var i=we(t,e,r,n);return be(i=ae.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,e,n,r,i){void 0===n&&(n=1),void 0===r&&(r=64),void 0===i&&(i=1);for(var o=Math.log(e)/Math.log(2)*i,a=le.zeros(t.length),s=le.zeros(t.length),u=0;u<t.length;u++){var l=0,c=1/0,f=1,h=t[u],d=h.filter((function(t){return t>0}));if(d.length>=n){var p=Math.floor(n),m=n-p;p>0?(a[u]=d[p-1],m>fe&&(a[u]+=m*(d[p]-d[p-1]))):a[u]=m*d[0]}else d.length>0&&(a[u]=le.max(d));for(var g=0;g<r;g++){for(var y=0,v=1;v<t[u].length;v++){var w=t[u][v]-a[u];y+=w>0?Math.exp(-w/f):1}if(Math.abs(y-o)<fe)break;y>o?f=(l+(c=f))/2:(l=f,c===1/0?f*=2:f=(l+c)/2)}if(s[u]=f,a[u]>0){var b=le.mean(h);s[u]<he*b&&(s[u]=he*b)}else{var _=le.mean(t.map(le.mean));s[u]<he*_&&(s[u]=he*_)}}return{sigmas:s,rhos:a}},t.prototype.computeMembershipStrengths=function(t,e,n,r){for(var i=t.length,o=t[0].length,a=le.zeros(i*o),s=le.zeros(i*o),u=le.zeros(i*o),l=0;l<i;l++)for(var c=0;c<o;c++){var f=0;-1!==t[l][c]&&(f=t[l][c]===l?0:e[l][c]-r[l]<=0?1:Math.exp(-(e[l][c]-r[l])/n[l]),a[l*o+c]=l,s[l*o+c]=t[l][c],u[l*o+c]=f)}return{rows:a,cols:s,vals:u}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,e=this.getNEpochs(),n=this.nComponents,r=this.graph.getValues(),i=0,o=0;o<r.length;o++){var a=r[o];i<r[o]&&(i=a)}var s=this.graph.map((function(t){return t<i/e?0:t}));this.embedding=le.zeros(s.nRows).map((function(){return le.zeros(n).map((function(){return 20*le.tauRand(t.random)-10}))}));var u=[],l=[],c=[],f=s.getAll();for(o=0;o<f.length;o++){var h=f[o];h.value&&(u.push(h.value),c.push(h.row),l.push(h.col))}return{head:l,tail:c,epochsPerSample:this.makeEpochsPerSample(u,e)}},t.prototype.makeEpochsPerSample=function(t,e){var n=le.filled(t.length,-1),r=le.max(t),i=t.map((function(t){return t/r*e}));return i.forEach((function(t,r){t>0&&(n[r]=e/i[r])})),n},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this,e=t.repulsionStrength,n=t.learningRate,r=t.negativeSampleRate,i=this.optimizationState,o=i.epochsPerSample,a=i.headEmbedding,s=i.tailEmbedding,u=a[0].length,l=a.length===s.length,c=o.map((function(t){return t/r})),f=ne(c),h=ne(o);this.assignOptimizationStateParameters({epochOfNextSample:h,epochOfNextNegativeSample:f,epochsPerNegativeSample:c,moveOther:l,initialAlpha:n,alpha:n,gamma:e,dim:u})},t.prototype.initializeOptimization=function(){var t=this.embedding,e=this.embedding,n=this.optimizationState,r=n.head,i=n.tail,o=n.epochsPerSample,a=this.getNEpochs(),s=this.graph.nCols,u=ve(this.spread,this.minDist),l=u.a,c=u.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:e,head:r,tail:i,epochsPerSample:o,a:l,b:c,nEpochs:a,nVertices:s})},t.prototype.optimizeLayoutStep=function(t){for(var e=this.optimizationState,n=e.head,r=e.tail,i=e.headEmbedding,o=e.tailEmbedding,a=e.epochsPerSample,s=e.epochOfNextSample,u=e.epochOfNextNegativeSample,l=e.epochsPerNegativeSample,c=e.moveOther,f=e.initialAlpha,h=e.alpha,d=e.gamma,p=e.a,m=e.b,g=e.dim,y=e.nEpochs,v=e.nVertices,w=0;w<a.length;w++)if(!(s[w]>t)){var b=n[w],_=r[w],x=i[b],D=o[_],E=ye(x,D),A=0;E>0&&(A=-2*p*m*Math.pow(E,m-1),A/=p*Math.pow(E,m)+1);for(var M=0;M<g;M++){var S=ge(A*(x[M]-D[M]),4);x[M]+=S*h,c&&(D[M]+=-S*h)}s[w]+=a[w];for(var C=Math.floor((t-u[w])/l[w]),k=0;k<C;k++){var F=le.tauRandInt(v,this.random),N=o[F],T=ye(x,N),B=0;if(T>0)B=2*d*m,B/=(.001+T)*(p*Math.pow(T,m)+1);else if(b===F)continue;for(M=0;M<g;M++)S=4,B>0&&(S=ge(B*(x[M]-N[M]),4)),x[M]+=S*h}u[w]+=C*l[w]}return e.alpha=f*(1-t/y),e.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var e=this;return void 0===t&&(t=function(){return!0}),new Promise((function(n,r){var i=function(){return Qt(e,void 0,void 0,(function(){var e,o,a,s,u,l;return te(this,(function(c){try{if(e=this.optimizationState,o=e.nEpochs,a=e.currentEpoch,this.embedding=this.optimizeLayoutStep(a),s=this.optimizationState.currentEpoch,u=!1===t(s),l=s===o,u||l)return[2,n(l)];setTimeout((function(){return i()}),0)}catch(t){r(t)}return[2]}))}))};setTimeout((function(){return i()}),0)}))},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});for(var e=!1,n=[];!e;){var r=this.optimizationState,i=r.nEpochs,o=r.currentEpoch;n=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,s=!1===t(a);e=a===i||s}return n},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var e=t.nRows;return e<=2500?500:e<=5e3?400:e<=7500?300:200},t}();function pe(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)}ot.UMAP=de,ot.euclidean=pe,ot.cosine=function(t,e){for(var n=0,r=0,i=0,o=0;o<t.length;o++)n+=t[o]*e[o],r+=Math.pow(t[o],2),i+=Math.pow(e[o],2);return 0===r&&0===i?0:0===r||0===i?1:1-n/Math.sqrt(r*i)};var me=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function ge(t,e){return t>e?e:t<-e?-e:t}function ye(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n}function ve(t,e){var n=le.linear(0,3*t,300).map((function(t){return t<e?1:t})),r=le.zeros(n.length).map((function(r,i){return n[i]>=e?Math.exp(-(n[i]-e)/t):r})),i={x:n,y:r},o=ce.default(i,(function(t){var e=ee(t,2),n=e[0],r=e[1];return function(t){return 1/(1+n*Math.pow(t,2*r))}}),{damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01}).parameterValues,a=ee(o,2);return{a:a[0],b:a[1]}}function we(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=5),t.map((function(t,i,o){return-1===e[i]||-1===e[o]?t*Math.exp(-n):e[i]!==e[o]?t*Math.exp(-r):t}))}function be(t){t=ae.normalize(t,"max");var e=ae.transpose(t),n=ae.pairwiseMultiply(e,t);return t=ae.add(t,ae.subtract(e,n)),ae.eliminateZeros(t)}function _e(t,e,n){for(var r=le.zeros(t.length).map((function(t){return le.zeros(n[0].length)})),i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)for(var a=0;a<n[0].length;a++){var s=t[i][o];r[i][a]+=e[i][o]*n[s][a]}return r}ot.findABParams=ve,ot.fastIntersection=we,ot.resetLocalConnectivity=be,ot.initTransform=_e,Object.defineProperty(rt,"__esModule",{value:!0});var xe=ot,De=rt.UMAP=xe.UMAP;function Ee(){return Ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ee.apply(this,arguments)}var Ae={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Me(t){return"number"==typeof t}function Se(t){return!(!t||"object"!=typeof t||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function Ce(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function ke(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function Fe(t){return t&&!0===t.constructor.prototype.isUnit||!1}function Ne(t){return"string"==typeof t}var Te=Array.isArray;function Be(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function ze(t){return Array.isArray(t)||Be(t)}function Oe(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Ie(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Re(t){return t&&!0===t.constructor.prototype.isRange||!1}function Pe(t){return t&&!0===t.constructor.prototype.isIndex||!1}function $e(t){return"boolean"==typeof t}function Le(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function je(t){return t&&!0===t.constructor.prototype.isHelp||!1}function Ue(t){return"function"==typeof t}function qe(t){return t instanceof Date}function Ve(t){return t instanceof RegExp}function We(t){return!(!t||"object"!=typeof t||t.constructor!==Object||Ce(t)||ke(t))}function Ze(t){return null===t}function He(t){return void 0===t}function Ye(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function Xe(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function Ke(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Je(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function Ge(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function Qe(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function tn(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function en(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function nn(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function rn(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function on(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function an(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function sn(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function un(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function ln(t){return t&&!0===t.isRelationalNode&&!0===t.constructor.prototype.isNode||!1}function cn(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function fn(t){return t&&!0===t.constructor.prototype.isChain||!1}function hn(t){var e=typeof t;return"object"===e?null===t?"null":Se(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function dn(t){var e=typeof t;if("number"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return dn(t)}));if(t instanceof Date)return new Date(t.valueOf());if(Se(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return function(t,e){var n={};for(var r in t)mn(t,r)&&(n[r]=e(t[r]));return n}(t,dn)}function pn(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!pn(t[r],e[r]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!pn(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}return t===e}function mn(t,e){return t&&Object.hasOwnProperty.call(t,e)}var gn=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(Ae)};function yn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function bn(){return!0}function _n(){return!1}function xn(){}Ee(gn,Ae,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var Dn="Argument is not a typed-function.",En=function t(){function e(t){return"object"===wn(t)&&null!==t&&t.constructor===Object}var n,r,i=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],o={name:"any",test:bn,isAny:!0},a=0,s={createCount:0};function u(t){var e=n.get(t);if(e)return e;var i,o,a='Unknown type "'+t+'"',s=t.toLowerCase(),u=yn(r);try{for(u.s();!(o=u.n()).done;)if((i=o.value).toLowerCase()===s){a+='. Did you mean "'+i+'" ?';break}}catch(t){u.e(t)}finally{u.f()}throw new TypeError(a)}function l(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",i=e?u(e).index:r.length,o=[],a=0;a<t.length;++a){if(!t[a]||"string"!=typeof t[a].name||"function"!=typeof t[a].test)throw new TypeError("Object with properties {name: string, test: function} expected");var s=t[a].name;if(n.has(s))throw new TypeError('Duplicate type name "'+s+'"');o.push(s),n.set(s,{name:s,test:t[a].test,isAny:t[a].isAny,index:i+a,conversionsTo:[]})}var l=r.slice(i);r=r.slice(0,i).concat(o).concat(l);for(var c=i+o.length;c<r.length;++c)n.get(r[c]).index=c}function c(){n=new Map,r=[],a=0,l([o],!1)}function f(t){var e=r.filter((function(e){var r=n.get(e);return!r.isAny&&r.test(t)}));return e.length?e:["any"]}function h(t){return t&&"function"==typeof t&&"_typedFunctionData"in t}function d(t,e,n){if(!h(t))throw new TypeError(Dn);var r=n&&n.exact,i=v(Array.isArray(e)?e.join(","):e),o=p(i);if(!r||o in t.signatures){var a=t._typedFunctionData.signatureMap.get(o);if(a)return a}var s,u,l,c=i.length;if(r)for(u in s=[],t.signatures)s.push(t._typedFunctionData.signatureMap.get(u));else s=t._typedFunctionData.signatures;for(var f=0;f<c;++f){var d,m=i[f],g=[],w=void 0,b=yn(s);try{for(b.s();!(d=b.n()).done;){var _=x((w=d.value).params,f);if(_&&(!m.restParam||_.restParam)){if(!_.hasAny&&"continue"===function(){var t=y(_);if(m.types.some((function(e){return!t.has(e.name)})))return"continue"}())continue;g.push(w)}}}catch(t){b.e(t)}finally{b.f()}if(0===(s=g).length)break}var D,E=yn(s);try{for(E.s();!(D=E.n()).done;)if((l=D.value).params.length<=c)return l}catch(t){E.e(t)}finally{E.f()}throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+p(i,", ")+"))")}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return t.map((function(t){return t.name})).join(e)}function m(t){var e=0===t.indexOf("..."),n=(e?t.length>3?t.slice(3):"any":t).split("|").map((function(t){return u(t.trim())})),r=!1,i=e?"...":"";return{types:n.map((function(t){return r=t.isAny||r,i+=t.name+"|",{name:t.name,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:r,hasConversion:!1,restParam:e}}function g(t){var e=function(t){if(0===t.length)return[];var e=t.map(u);t.length>1&&e.sort((function(t,e){return t.index-e.index}));var n=e[0].conversionsTo;if(1===t.length)return n;n=n.concat([]);for(var r=new Set(t),i=1;i<e.length;++i){var o,a=void 0,s=yn(e[i].conversionsTo);try{for(s.s();!(o=s.n()).done;)a=o.value,r.has(a.from)||(n.push(a),r.add(a.from))}catch(t){s.e(t)}finally{s.f()}}return n}(t.types.map((function(t){return t.name}))),n=t.hasAny,r=t.name,i=e.map((function(t){var e=u(t.from);return n=e.isAny||n,r+="|"+t.from,{name:t.from,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:t,conversionIndex:t.index}}));return{types:t.types.concat(i),name:r,hasAny:n,hasConversion:i.length>0,restParam:t.restParam}}function y(t){return t.typeSet||(t.typeSet=new Set,t.types.forEach((function(e){return t.typeSet.add(e.name)}))),t.typeSet}function v(t){var e=[];if("string"!=typeof t)throw new TypeError("Signatures must be strings");var n=t.trim();if(""===n)return e;for(var r=n.split(","),i=0;i<r.length;++i){var o=m(r[i].trim());if(o.restParam&&i!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+r[i]+'": only allowed for the last parameter');if(0===o.types.length)return null;e.push(o)}return e}function w(t){var e=$(t);return!!e&&e.restParam}function b(t){if(t&&0!==t.types.length){if(1===t.types.length)return u(t.types[0].name).test;if(2===t.types.length){var e=u(t.types[0].name).test,n=u(t.types[1].name).test;return function(t){return e(t)||n(t)}}var r=t.types.map((function(t){return u(t.name).test}));return function(t){for(var e=0;e<r.length;e++)if(r[e](t))return!0;return!1}}return bn}function _(t){var e,n,r;if(w(t)){var i=(e=P(t).map(b)).length,o=b($(t));return function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return function(t){for(var e=i;e<t.length;e++)if(!o(t[e]))return!1;return!0}(t)&&t.length>=i+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(n=b(t[0]),function(t){return n(t[0])&&1===t.length}):2===t.length?(n=b(t[0]),r=b(t[1]),function(t){return n(t[0])&&r(t[1])&&2===t.length}):(e=t.map(b),function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return t.length===e.length})}function x(t,e){return e<t.length?t[e]:w(t)?$(t):null}function D(t,e){var n=x(t,e);return n?y(n):new Set}function E(t){return null===t.conversion||void 0===t.conversion}function A(t,e){var n=new Set;return t.forEach((function(t){var r,i,o=yn(D(t.params,e));try{for(o.s();!(i=o.n()).done;)r=i.value,n.add(r)}catch(t){o.e(t)}finally{o.f()}})),n.has("any")?["any"]:Array.from(n)}function M(t,e,n){var r,i,o,a=t||"unnamed",s=n,u=function(){var t=[];if(s.forEach((function(n){var r=b(x(n.params,o));(o<n.params.length||w(n.params))&&r(e[o])&&t.push(n)})),0===t.length){if((i=A(s,o)).length>0){var n=f(e[o]);return(r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+n.join(" | ")+", index: "+o+")")).data={category:"wrongType",fn:a,index:o,actual:n,expected:i},{v:r}}}else s=t};for(o=0;o<e.length;o++){var l=u();if("object"===wn(l))return l.v}var c=s.map((function(t){return w(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,c))return i=A(s,o),(r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:a,index:e.length,expected:i},r;var h=Math.max.apply(null,c);if(e.length>h)return(r=new TypeError("Too many arguments in function "+a+" (expected: "+h+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:a,index:e.length,expectedLength:h},r;for(var d=[],p=0;p<e.length;++p)d.push(f(e[p]).join("|"));return(r=new TypeError('Arguments of type "'+d.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:d},r}function S(t){for(var e=r.length+1,n=0;n<t.types.length;n++)E(t.types[n])&&(e=Math.min(e,t.types[n].typeIndex));return e}function C(t){for(var e=a+1,n=0;n<t.types.length;n++)E(t.types[n])||(e=Math.min(e,t.types[n].conversionIndex));return e}function k(t,e){if(t.hasAny){if(!e.hasAny)return 1}else if(e.hasAny)return-1;if(t.restParam){if(!e.restParam)return 1}else if(e.restParam)return-1;if(t.hasConversion){if(!e.hasConversion)return 1}else if(e.hasConversion)return-1;var n=S(t)-S(e);if(n<0)return-1;if(n>0)return 1;var r=C(t)-C(e);return r<0?-1:r>0?1:0}function F(t,e){var n=t.params,r=e.params,i=$(n),o=$(r),a=w(n),s=w(r);if(a&&i.hasAny){if(!s||!o.hasAny)return 1}else if(s&&o.hasAny)return-1;var u,l,c=0,f=0,h=yn(n);try{for(h.s();!(l=h.n()).done;)(u=l.value).hasAny&&++c,u.hasConversion&&++f}catch(t){h.e(t)}finally{h.f()}var d,p=0,m=0,g=yn(r);try{for(g.s();!(d=g.n()).done;)(u=d.value).hasAny&&++p,u.hasConversion&&++m}catch(t){g.e(t)}finally{g.f()}if(c!==p)return c-p;if(a&&i.hasConversion){if(!s||!o.hasConversion)return 1}else if(s&&o.hasConversion)return-1;if(f!==m)return f-m;if(a){if(!s)return 1}else if(s)return-1;var y=(n.length-r.length)*(a?-1:1);if(0!==y)return y;for(var v,b=[],_=0,x=0;x<n.length;++x){var D=k(n[x],r[x]);b.push(D),_+=D}if(0!==_)return _;for(var E=0,A=b;E<A.length;E++)if(0!==(v=A[E]))return v;return 0}function N(t,e){var n=e;if(t.some((function(t){return t.hasConversion}))){var r=w(t),i=t.map(T);n=function(){for(var t=[],n=r?arguments.length-1:arguments.length,o=0;o<n;o++)t[o]=i[o](arguments[o]);return r&&(t[n]=arguments[n].map(i[n])),e.apply(this,t)}}var o=n;if(w(t)){var a=t.length-1;o=function(){return n.apply(this,L(arguments,0,a).concat([L(arguments,a)]))}}return o}function T(t){var e,n,r,i,o=[],a=[];switch(t.types.forEach((function(t){t.conversion&&(o.push(u(t.conversion.from).test),a.push(t.conversion.convert))})),a.length){case 0:return function(t){return t};case 1:return e=o[0],r=a[0],function(t){return e(t)?r(t):t};case 2:return e=o[0],n=o[1],r=a[0],i=a[1],function(t){return e(t)?r(t):n(t)?i(t):t};default:return function(t){for(var e=0;e<a.length;e++)if(o[e](t))return a[e](t);return t}}}function B(t){return function t(e,n,r){if(n<e.length){var i=e[n],o=[];if(i.restParam){var a=i.types.filter(E);a.length<i.types.length&&o.push({types:a,name:"..."+a.map((function(t){return t.name})).join("|"),hasAny:a.some((function(t){return t.isAny})),hasConversion:!1,restParam:!0}),o.push(i)}else o=i.types.map((function(t){return{types:[t],name:t.name,hasAny:t.isAny,hasConversion:t.conversion,restParam:!1}}));return s=o,u=function(i){return t(e,n+1,r.concat([i]))},Array.prototype.concat.apply([],s.map(u))}return[r];var s,u}(t,0,[])}function z(t,e,n){var r,i,o=[],a=yn(t);try{for(a.s();!(i=a.n()).done;){var s=n[r=i.value];if("number"!=typeof s)throw new TypeError('No definition for referenced signature "'+r+'"');if("function"!=typeof(s=e[s]))return!1;o.push(s)}}catch(t){a.e(t)}finally{a.f()}return o}function O(t,e,n){for(var r=function(t){return t.map((function(t){return V(t)?U(t.referToSelf.callback):q(t)?j(t.referTo.references,t.referTo.callback):t}))}(t),i=new Array(r.length).fill(!1),o=!0;o;){o=!1;for(var a=!0,s=0;s<r.length;++s)if(!i[s]){var u=r[s];if(V(u))r[s]=u.referToSelf.callback(n),r[s].referToSelf=u.referToSelf,i[s]=!0,a=!1;else if(q(u)){var l=z(u.referTo.references,r,e);l?(r[s]=u.referTo.callback.apply(this,l),r[s].referTo=u.referTo,i[s]=!0,a=!1):o=!0}}if(a&&o)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return r}function I(t,e){if(s.createCount++,0===Object.keys(e).length)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&function(t){var e=/\bthis(\(|\.signatures\b)/;Object.keys(t).forEach((function(n){var r=t[n];if(e.test(r.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}(e);var n,r=[],i=[],o={},a=[],u=function(){if(!Object.prototype.hasOwnProperty.call(e,n))return"continue";var t=v(n);if(!t)return"continue";r.forEach((function(e){if(function(t,e){for(var n=Math.max(t.length,e.length),r=0;r<n;r++){var i,o=D(t,r),a=!1,s=void 0,u=yn(D(e,r));try{for(u.s();!(i=u.n()).done;)if(s=i.value,o.has(s)){a=!0;break}}catch(t){u.e(t)}finally{u.f()}if(!a)return!1}var l=t.length,c=e.length,f=w(t),h=w(e);return f?h?l===c:c>=l:h?l>=c:l===c}(e,t))throw new TypeError('Conflicting signatures "'+p(e)+'" and "'+p(t)+'".')})),r.push(t);var s=i.length;i.push(e[n]);var u,l=void 0,c=yn(B(t.map(g)));try{for(c.s();!(u=c.n()).done;){var f=p(l=u.value);a.push({params:l,name:f,fn:s}),l.every((function(t){return!t.hasConversion}))&&(o[f]=s)}}catch(t){c.e(t)}finally{c.f()}};for(n in e)u();a.sort(F);var l,c=O(i,o,ct);for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(o[l]=c[o[l]]);for(var f=[],h=new Map,d=0,m=a;d<m.length;d++)l=m[d],h.has(l.name)||(l.fn=c[l.fn],f.push(l),h.set(l.name,l));for(var y=f[0]&&f[0].params.length<=2&&!w(f[0].params),x=f[1]&&f[1].params.length<=2&&!w(f[1].params),E=f[2]&&f[2].params.length<=2&&!w(f[2].params),A=f[3]&&f[3].params.length<=2&&!w(f[3].params),M=f[4]&&f[4].params.length<=2&&!w(f[4].params),S=f[5]&&f[5].params.length<=2&&!w(f[5].params),C=y&&x&&E&&A&&M&&S,k=0;k<f.length;++k)f[k].test=_(f[k].params);for(var T=y?b(f[0].params[0]):_n,z=x?b(f[1].params[0]):_n,I=E?b(f[2].params[0]):_n,R=A?b(f[3].params[0]):_n,P=M?b(f[4].params[0]):_n,$=S?b(f[5].params[0]):_n,L=y?b(f[0].params[1]):_n,j=x?b(f[1].params[1]):_n,U=E?b(f[2].params[1]):_n,q=A?b(f[3].params[1]):_n,V=M?b(f[4].params[1]):_n,W=S?b(f[5].params[1]):_n,Z=0;Z<f.length;++Z)f[Z].implementation=N(f[Z].params,f[Z].fn);var H=y?f[0].implementation:xn,Y=x?f[1].implementation:xn,X=E?f[2].implementation:xn,K=A?f[3].implementation:xn,J=M?f[4].implementation:xn,G=S?f[5].implementation:xn,Q=y?f[0].params.length:-1,tt=x?f[1].params.length:-1,et=E?f[2].params.length:-1,nt=A?f[3].params.length:-1,rt=M?f[4].params.length:-1,it=S?f[5].params.length:-1,ot=C?6:0,at=f.length,st=f.map((function(t){return t.test})),ut=f.map((function(t){return t.implementation})),lt=function(){for(var e=ot;e<at;e++)if(st[e](arguments))return ut[e].apply(this,arguments);return s.onMismatch(t,arguments,f)};function ct(t,e){return arguments.length===Q&&T(t)&&L(e)?H.apply(this,arguments):arguments.length===tt&&z(t)&&j(e)?Y.apply(this,arguments):arguments.length===et&&I(t)&&U(e)?X.apply(this,arguments):arguments.length===nt&&R(t)&&q(e)?K.apply(this,arguments):arguments.length===rt&&P(t)&&V(e)?J.apply(this,arguments):arguments.length===it&&$(t)&&W(e)?G.apply(this,arguments):lt.apply(this,arguments)}try{Object.defineProperty(ct,"name",{value:t})}catch(t){}return ct.signatures=o,ct._typedFunctionData={signatures:f,signatureMap:h},ct}function R(t,e,n){throw M(t,e,n)}function P(t){return L(t,0,t.length-1)}function $(t){return t[t.length-1]}function L(t,e,n){return Array.prototype.slice.call(t,e,n)}function j(t,e){return{referTo:{references:t,callback:e}}}function U(t){if("function"!=typeof t)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:t}}}function q(t){return t&&"object"===wn(t.referTo)&&Array.isArray(t.referTo.references)&&"function"==typeof t.referTo.callback}function V(t){return t&&"object"===wn(t.referToSelf)&&"function"==typeof t.referToSelf.callback}function W(t,e){if(!t)return e;if(e&&e!==t){var n=new Error("Function names do not match (expected: "+t+", actual: "+e+")");throw n.data={actual:e,expected:t},n}return t}function Z(t){var e;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h(t[n])||"string"==typeof t[n].signature)&&(e=W(e,t[n].name));return e}function H(t,e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n in t&&e[n]!==t[n]){var r=new Error('Signature "'+n+'" is defined twice');throw r.data={signature:n,sourceFunction:e[n],destFunction:t[n]},r}t[n]=e[n]}}c(),l(i);var Y=s;function X(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(t.to===t.from)throw new SyntaxError('Illegal to define conversion from "'+t.from+'" to itself.')}return s=function(t){for(var n="string"==typeof t,r=n?t:"",i={},o=n?1:0;o<arguments.length;++o){var a=arguments[o],s={},u=void 0;if("function"==typeof a?(u=a.name,"string"==typeof a.signature?s[a.signature]=a:h(a)&&(s=a.signatures)):e(a)&&(s=a,n||(u=Z(a))),0===Object.keys(s).length){var l=new TypeError("Argument to 'typed' at index "+o+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw l.data={index:o,argument:a},l}n||(r=W(r,u)),H(i,s)}return I(r||"",i)},s.create=t,s.createCount=Y.createCount,s.onMismatch=R,s.throwMismatchError=R,s.createError=M,s.clear=c,s.clearConversions=function(){var t,e,i=yn(r);try{for(i.s();!(e=i.n()).done;)t=e.value,n.get(t).conversionsTo=[]}catch(t){i.e(t)}finally{i.f()}a=0},s.addTypes=l,s._findType=u,s.referTo=function(){var t=P(arguments).map((function(t){return p(v(t))})),e=$(arguments);if("function"!=typeof e)throw new TypeError("Callback function expected as last argument");return j(t,e)},s.referToSelf=U,s.convert=function(t,e){var n=u(e);if(n.test(t))return t;var r=n.conversionsTo;if(0===r.length)throw new Error("There are no conversions to "+e+" defined.");for(var i=0;i<r.length;i++)if(u(r[i].from).test(t))return r[i].convert(t);throw new Error("Cannot convert "+t+" to "+e)},s.findSignature=d,s.find=function(t,e,n){return d(t,e,n).implementation},s.isTypedFunction=h,s.warnAgainstDeprecatedThis=!0,s.addType=function(t,e){var r="any";!1!==e&&n.has("Object")&&(r="Object"),s.addTypes([t],r)},s.addConversion=function(t){X(t);var e=u(t.to);if(!e.conversionsTo.every((function(e){return e.from!==t.from})))throw new Error('There is already a conversion from "'+t.from+'" to "'+e.name+'"');e.conversionsTo.push({from:t.from,convert:t.convert,index:a++})},s.addConversions=function(t){t.forEach(s.addConversion)},s.removeConversion=function(t){X(t);var e=u(t.to),n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}(e.conversionsTo,(function(e){return e.from===t.from}));if(!n)throw new Error("Attempt to remove nonexistent conversion from "+t.from+" to "+t.to);if(n.convert!==t.convert)throw new Error("Conversion to remove does not match existing conversion");var r=e.conversionsTo.indexOf(n);e.conversionsTo.splice(r,1)},s.resolve=function(t,e){if(!h(t))throw new TypeError(Dn);for(var n=t._typedFunctionData.signatures,r=0;r<n.length;++r)if(n[r].test(e))return n[r];return null},s}();function An(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}function Mn(t,e,n){var r={2:"0b",8:"0o",16:"0x"}[e],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!An(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!An(t))throw new Error("Value must be an integer");t<0&&(t+=2**n),i="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(r).concat(t.toString(e)).concat(i)}function Sn(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n,r,i="auto";if(e&&(e.notation&&(i=e.notation),Me(e)?n=e:Me(e.precision)&&(n=e.precision),e.wordSize&&"number"!=typeof(r=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Cn(t),r="number"==typeof e?Fn(n,n.exponent+1+e):n,i=r.coefficients,o=r.exponent+1,a=o+(e||0);return i.length<a&&(i=i.concat(Nn(a-i.length))),o<0&&(i=Nn(1-o).concat(i),o=1),o<i.length&&i.splice(o,0,0===o?"0.":"."),r.sign+i.join("")}(t,n);case"exponential":return kn(t,n);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Fn(Cn(t),e),r=n.exponent,i=n.coefficients,o=r%3==0?r:r<0?r-3-r%3:r-r%3;if(Me(e))for(;e>i.length||r-o+1>i.length;)i.push(0);else for(var a=Math.abs(r-o)-(i.length-1),s=0;s<a;s++)i.push(0);for(var u=Math.abs(r-o),l=1;u>0;)l++,u--;var c=i.slice(l).join(""),f=Me(e)&&c.length||c.match(/[1-9]/)?"."+c:"",h=i.slice(0,l).join("")+f+"e"+(r>=0?"+":"")+o.toString();return n.sign+h}(t,n);case"bin":return Mn(t,2,r);case"oct":return Mn(t,8,r);case"hex":return Mn(t,16,r);case"auto":return function(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,o=Cn(t),a=e?Fn(o,e):o;if(a.exponent<r||a.exponent>=i)return kn(t,e);var s=a.coefficients,u=a.exponent;s.length<e&&(s=s.concat(Nn(e-s.length))),s=s.concat(Nn(u-s.length+1+(s.length<e?e-s.length:0)));var l=u>0?u:0;return l<(s=Nn(-u).concat(s)).length-1&&s.splice(l+1,0,"."),a.sign+s.join("")}(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Cn(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,(function(t){return i-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function kn(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Cn(t),r=e?Fn(n,e):n,i=r.coefficients,o=r.exponent;i.length<e&&(i=i.concat(Nn(e-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function Fn(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var i=e-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function Nn(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}var Tn=Number.EPSILON||2220446049250313e-31;function Bn(t,e,n){if(null==n)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var r=Math.abs(t-e);return r<Tn||r<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}function zn(t,e,n){var r=new t.constructor(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!An(n))throw new Error("size must be an integer");if(t.greaterThan(r.pow(n-1).sub(1))||t.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(r.pow(n))),i="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function On(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function In(t,e){var n=function(t,e){return"number"==typeof t?Sn(t,e):Se(t)?function(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n,r,i="auto";if(void 0!==e&&(e.notation&&(i=e.notation),"number"==typeof e?n=e:void 0!==e.precision&&(n=e.precision),e.wordSize&&"number"!=typeof(r=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(t,e){return t.toFixed(e)}(t,n);case"exponential":return On(t,n);case"engineering":return function(t,e){var n=t.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)).toPrecision(e);return-1!==i.indexOf("e")&&(i=new t.constructor(i).toFixed()),i+"e"+(n>=0?"+":"")+r.toString()}(t,n);case"bin":return zn(t,2,r);case"oct":return zn(t,8,r);case"hex":return zn(t,16,r);case"auto":var o=e&&void 0!==e.lowerExp?e.lowerExp:-3,a=e&&void 0!==e.upperExp?e.upperExp:5;if(t.isZero())return"0";var s=t.toSignificantDigits(n),u=s.e;return(u>=o&&u<a?s.toFixed():On(t,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,e):function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t)?e&&"decimal"===e.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?Rn(t,e):Ne(t)?'"'+t+'"':"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((n=>'"'+n+'": '+In(t[n],e))).join(", ")+"}":String(t)}(t,e);return e&&"object"==typeof e&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function Rn(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)0!==i&&(n+=", "),n+=Rn(t[i],e);return n+"]"}return In(t,e)}function Pn(t,e,n){if(!(this instanceof Pn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function $n(t,e,n){if(!(this instanceof $n))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function Ln(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function jn(t,e,n){var r,i=t.length;if(i!==e[n])throw new Pn(i,e[n]);if(n<e.length-1){var o=n+1;for(r=0;r<i;r++){var a=t[r];if(!Array.isArray(a))throw new Pn(e.length-1,e.length,"<");jn(t[r],e,o)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new Pn(e.length+1,e.length,">")}function Un(t,e){if(0===e.length){if(Array.isArray(t))throw new Pn(t.length,0)}else jn(t,e,0)}function qn(t,e){if(!Me(t)||!An(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new $n(t,e)}function Vn(t,e,n){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!Me(t)||!An(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+In(e)+")")})),Wn(t,e,0,void 0!==n?n:0),t}function Wn(t,e,n,r){var i,o,a=t.length,s=e[n],u=Math.min(a,s);if(t.length=s,n<e.length-1){var l=n+1;for(i=0;i<u;i++)o=t[i],Array.isArray(o)||(o=[o],t[i]=o),Wn(o,e,l,r);for(i=u;i<s;i++)o=[],t[i]=o,Wn(o,e,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<s;i++)t[i]=r}}function Zn(t,e){var n=Jn(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Pn(0,r,"!=");var i=Yn(e=Hn(e,r));if(r!==i)throw new Pn(i,r,"!=");try{return function(t,e){for(var n,r=t,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var a=r.length/o,s=0;s<a;s++)n.push(r.slice(s*o,(s+1)*o));r=n}return r}(n,e)}catch(t){if(t instanceof Pn)throw new Pn(i,r,"!=");throw t}}function Hn(t,e){var n=Yn(t),r=t.slice(),i=t.indexOf(-1);if(t.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(e%n!=0)throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);r[i]=-e/n}return r}function Yn(t){return t.reduce(((t,e)=>t*e),1)}function Xn(t,e,n,r){var i=r||Ln(t);if(n)for(var o=0;o<n;o++)t=[t],i.unshift(1);for(t=Kn(t,e,0);i.length<e;)i.push(1);return t}function Kn(t,e,n){var r,i;if(Array.isArray(t)){var o=n+1;for(r=0,i=t.length;r<i;r++)t[r]=Kn(t[r],e,o)}else for(var a=n;a<e;a++)t=[t];return t}function Jn(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(n){Array.isArray(n)?n.forEach(t):e.push(n)})),e}function Gn(t,e){for(var n,r=0,i=0;i<t.length;i++){var o=t[i],a=Array.isArray(o);if(0===i&&a&&(r=o.length),a&&o.length!==r)return;var s=a?Gn(o,e):e(o);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}function Qn(t,e,n,r){function i(r){var i=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],o=t[i];void 0!==o&&(n[i]=o)}return n}(r,e.map(tr));return function(t,e,n){var r=e.filter((t=>!function(t){return t&&"?"===t[0]}(t))).every((t=>void 0!==n[t]));if(!r){var i=e.filter((t=>void 0===n[t]));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map((t=>'"'.concat(t,'"'))).join(", "),"."))}}(t,e,r),n(i)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function tr(t){return t&&"?"===t[0]?t.slice(1):t}function er(t,e){return!(!t||"object"!=typeof t||!mn(rr,e)&&(e in Object.prototype||e in Function.prototype))}function nr(t){return"object"==typeof t&&t&&t.constructor===Object}Pn.prototype=new RangeError,Pn.prototype.constructor=RangeError,Pn.prototype.name="DimensionError",Pn.prototype.isDimensionError=!0,$n.prototype=new RangeError,$n.prototype.constructor=RangeError,$n.prototype.name="IndexError",$n.prototype.isIndexError=!0;var rr={length:!0,name:!0},ir={toString:!0,valueOf:!0,toLocaleString:!0};class or{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return function(t,e){if(nr(t)&&er(t,e))return t[e];if("function"==typeof t[e]&&function(t,e){return!(null==t||"function"!=typeof t[e]||mn(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)||!mn(ir,e)&&(e in Object.prototype||e in Function.prototype))}(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}(this.wrappedObject,t)}set(t,e){return function(t,e,n){if(nr(t)&&er(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}(this.wrappedObject,t,e),this}has(t){return t in this.wrappedObject}}function ar(t){return!!t&&(t instanceof Map||t instanceof or||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}var sr=function(){return sr=En.create,En},ur=Qn("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var{BigNumber:e,Complex:n,DenseMatrix:r,Fraction:i}=t,o=sr();return o.clear(),o.addTypes([{name:"number",test:Me},{name:"Complex",test:Ce},{name:"BigNumber",test:Se},{name:"Fraction",test:ke},{name:"Unit",test:Fe},{name:"identifier",test:t=>Ne&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(t)},{name:"string",test:Ne},{name:"Chain",test:fn},{name:"Array",test:Te},{name:"Matrix",test:Be},{name:"DenseMatrix",test:Oe},{name:"SparseMatrix",test:Ie},{name:"Range",test:Re},{name:"Index",test:Pe},{name:"boolean",test:$e},{name:"ResultSet",test:Le},{name:"Help",test:je},{name:"function",test:Ue},{name:"Date",test:qe},{name:"RegExp",test:Ve},{name:"null",test:Ze},{name:"undefined",test:He},{name:"AccessorNode",test:Ye},{name:"ArrayNode",test:Xe},{name:"AssignmentNode",test:Ke},{name:"BlockNode",test:Je},{name:"ConditionalNode",test:Ge},{name:"ConstantNode",test:Qe},{name:"FunctionNode",test:en},{name:"FunctionAssignmentNode",test:tn},{name:"IndexNode",test:nn},{name:"Node",test:rn},{name:"ObjectNode",test:on},{name:"OperatorNode",test:an},{name:"ParenthesisNode",test:sn},{name:"RangeNode",test:un},{name:"RelationalNode",test:ln},{name:"SymbolNode",test:cn},{name:"Map",test:ar},{name:"Object",test:We}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(t){if(e||lr(t),t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return n||cr(t),new n(t,0)}},{from:"BigNumber",to:"Complex",convert:function(t){return n||cr(t),new n(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return n||cr(t),new n(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){i||fr(t);var e=new i(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||lr(t);try{return new e(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){i||fr(t);try{return new i(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){n||cr(t);try{return new n(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||lr(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return i||fr(t),new i(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}]),o.onMismatch=(t,e,n)=>{var r=o.createError(t,e,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===e.length&&ze(e[0])&&n.some((t=>!t.params.includes(",")))){var i=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw i.data=r.data,i}throw r},o.onMismatch=(t,e,n)=>{var r=o.createError(t,e,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===e.length&&ze(e[0])&&n.some((t=>!t.params.includes(",")))){var i=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw i.data=r.data,i}throw r},o}));function lr(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function cr(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function fr(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}
/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var hr,dr,pr=9e15,mr=1e9,gr="0123456789abcdef",yr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",vr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",wr={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-pr,maxE:pr,crypto:!1},br=!0,_r="[DecimalError] ",xr=_r+"Invalid argument: ",Dr=_r+"Precision limit exceeded",Er=_r+"crypto unavailable",Ar="[object Decimal]",Mr=Math.floor,Sr=Math.pow,Cr=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,kr=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Fr=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Nr=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tr=1e7,Br=7,zr=yr.length-1,Or=vr.length-1,Ir={toStringTag:Ar};function Rr(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=Br-r.length)&&(o+=Yr(n)),o+=r;a=t[e],(n=Br-(r=a+"").length)&&(o+=Yr(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function Pr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(xr+t)}function $r(t,e,n,r){var i,o,a,s;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Br,i=0):(i=Math.ceil((e+1)/Br),e%=Br),o=Sr(10,Br-e),s=t[i]%o|0,null==r?e<3?(0==e?s=s/100|0:1==e&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(t[i+1]/o/100|0)==Sr(10,e-2)-1||(s==o/2||0==s)&&0==(t[i+1]/o/100|0):e<4?(0==e?s=s/1e3|0:1==e?s=s/100|0:2==e&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(t[i+1]/o/1e3|0)==Sr(10,e-3)-1,a}function Lr(t,e,n){for(var r,i,o=[0],a=0,s=t.length;a<s;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=gr.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}Ir.absoluteValue=Ir.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ur(t)},Ir.ceil=function(){return Ur(new this.constructor(this),this.e+1,2)},Ir.clampedTo=Ir.clamp=function(t,e){var n=this,r=n.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(xr+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new r(n)},Ir.comparedTo=Ir.cmp=function(t){var e,n,r,i,o=this,a=o.d,s=(t=new o.constructor(t)).d,u=o.s,l=t.s;if(!a||!s)return u&&l?u!==l?u:a===s?0:!a^u<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?u:s[0]?-l:0;if(u!==l)return u;if(o.e!==t.e)return o.e>t.e^u<0?1:-1;for(e=0,n=(r=a.length)<(i=s.length)?r:i;e<n;++e)if(a[e]!==s[e])return a[e]>s[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},Ir.cosine=Ir.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Br,r.rounding=1,n=function(t,e){var n,r,i;if(e.isZero())return e;(r=e.d.length)<32?i=(1/ri(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=ni(t,1,e.times(i),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(r,ii(r,n)),r.precision=t,r.rounding=e,Ur(2==dr||3==dr?n.neg():n,t,e,!0)):new r(1):new r(NaN)},Ir.cubeRoot=Ir.cbrt=function(){var t,e,n,r,i,o,a,s,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(br=!1,(o=c.s*Sr(c.s*c,1/3))&&Math.abs(o)!=1/0?r=new f(o.toString()):(n=Rr(c.d),(o=((t=c.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=Sr(n,1/3),t=Mr((t+1)/3)-(t%3==(t<0?-1:2)),(r=new f(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=c.s),a=(t=f.precision)+3;;)if(l=(u=(s=r).times(s).times(s)).plus(c),r=jr(l.plus(c).times(s),l.plus(u),a+2,1),Rr(s.d).slice(0,a)===(n=Rr(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(Ur(r,t+1,1),e=!r.times(r).times(r).eq(c));break}if(!i&&(Ur(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}a+=4,i=1}return br=!0,Ur(r,t,f.rounding,e)},Ir.decimalPlaces=Ir.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-Mr(this.e/Br))*Br,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},Ir.dividedBy=Ir.div=function(t){return jr(this,new this.constructor(t))},Ir.dividedToIntegerBy=Ir.divToInt=function(t){var e=this.constructor;return Ur(jr(this,new e(t),0,1,1),e.precision,e.rounding)},Ir.equals=Ir.eq=function(t){return 0===this.cmp(t)},Ir.floor=function(){return Ur(new this.constructor(this),this.e+1,3)},Ir.greaterThan=Ir.gt=function(t){return this.cmp(t)>0},Ir.greaterThanOrEqualTo=Ir.gte=function(t){var e=this.cmp(t);return 1==e||0===e},Ir.hyperbolicCosine=Ir.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?e=(1/ri(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=ni(a,1,o.times(e),new a(1),!0);for(var u,l=t,c=new a(8);l--;)u=o.times(o),o=s.minus(u.times(c.minus(u.times(c))));return Ur(o,a.precision=n,a.rounding=r,!0)},Ir.hyperbolicSine=Ir.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=ni(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=ni(o,2,i=i.times(1/ri(5,t)),i,!0);for(var a,s=new o(5),u=new o(16),l=new o(20);t--;)a=i.times(i),i=i.times(s.plus(a.times(u.times(a).plus(l))))}return o.precision=e,o.rounding=n,Ur(i,e,n,!0)},Ir.hyperbolicTangent=Ir.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,jr(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},Ir.inverseCosine=Ir.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?e.isNeg()?Zr(n,i,o):new n(0):new n(NaN):e.isZero()?Zr(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=Zr(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},Ir.inverseHyperbolicCosine=Ir.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,br=!1,n=n.times(n).minus(1).sqrt().plus(n),br=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},Ir.inverseHyperbolicSine=Ir.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,br=!1,n=n.times(n).plus(1).sqrt().plus(n),br=!0,r.precision=t,r.rounding=e,n.ln())},Ir.inverseHyperbolicTangent=Ir.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Ur(new o(i),t,e,!0):(o.precision=n=r-i.e,i=jr(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},Ir.inverseSine=Ir.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=Zr(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},Ir.inverseTangent=Ir.atan=function(){var t,e,n,r,i,o,a,s,u,l=this,c=l.constructor,f=c.precision,h=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=Or)return(a=Zr(c,f+4,h).times(.25)).s=l.s,a}else{if(!l.s)return new c(NaN);if(f+4<=Or)return(a=Zr(c,f+4,h).times(.5)).s=l.s,a}for(c.precision=s=f+10,c.rounding=1,t=n=Math.min(28,s/Br+2|0);t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(br=!1,e=Math.ceil(s/Br),r=1,u=l.times(l),a=new c(l),i=l;-1!==t;)if(i=i.times(u),o=a.minus(i.div(r+=2)),i=i.times(u),void 0!==(a=o.plus(i.div(r+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),br=!0,Ur(a,c.precision=f,c.rounding=h,!0)},Ir.isFinite=function(){return!!this.d},Ir.isInteger=Ir.isInt=function(){return!!this.d&&Mr(this.e/Br)>this.d.length-2},Ir.isNaN=function(){return!this.s},Ir.isNegative=Ir.isNeg=function(){return this.s<0},Ir.isPositive=Ir.isPos=function(){return this.s>0},Ir.isZero=function(){return!!this.d&&0===this.d[0]},Ir.lessThan=Ir.lt=function(t){return this.cmp(t)<0},Ir.lessThanOrEqualTo=Ir.lte=function(t){return this.cmp(t)<1},Ir.logarithm=Ir.log=function(t){var e,n,r,i,o,a,s,u,l=this,c=l.constructor,f=c.precision,h=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(br=!1,a=Qr(l,s=f+5),r=e?Wr(c,s+10):Qr(t,s),$r((u=jr(a,r,s,1)).d,i=f,h))do{if(a=Qr(l,s+=10),r=e?Wr(c,s+10):Qr(t,s),u=jr(a,r,s,1),!o){+Rr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ur(u,f+1,0));break}}while($r(u.d,i+=10,h));return br=!0,Ur(u,f,h)},Ir.minus=Ir.sub=function(t){var e,n,r,i,o,a,s,u,l,c,f,h,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return d.s&&t.s?d.d?t.s=-t.s:t=new p(t.d||d.s!==t.s?d:NaN):t=new p(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(l=d.d,h=t.d,s=p.precision,u=p.rounding,!l[0]||!h[0]){if(h[0])t.s=-t.s;else{if(!l[0])return new p(3===u?-0:0);t=new p(d)}return br?Ur(t,s,u):t}if(n=Mr(t.e/Br),c=Mr(d.e/Br),l=l.slice(),o=c-n){for((f=o<0)?(e=l,o=-o,a=h.length):(e=h,n=c,a=l.length),o>(r=Math.max(Math.ceil(s/Br),a)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((f=(r=l.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(l[r]!=h[r]){f=l[r]<h[r];break}o=0}for(f&&(e=l,l=h,h=e,t.s=-t.s),a=l.length,r=h.length-a;r>0;--r)l[a++]=0;for(r=h.length;r>o;){if(l[--r]<h[r]){for(i=r;i&&0===l[--i];)l[i]=Tr-1;--l[i],l[r]+=Tr}l[r]-=h[r]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=Vr(l,n),br?Ur(t,s,u):t):new p(3===u?-0:0)},Ir.modulo=Ir.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Ur(new r(n),r.precision,r.rounding):(br=!1,9==r.modulo?(e=jr(n,t.abs(),0,3,1)).s*=t.s:e=jr(n,t,0,r.modulo,1),e=e.times(t),br=!0,n.minus(e))},Ir.naturalExponential=Ir.exp=function(){return Gr(this)},Ir.naturalLogarithm=Ir.ln=function(){return Qr(this)},Ir.negated=Ir.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ur(t)},Ir.plus=Ir.add=function(t){var e,n,r,i,o,a,s,u,l,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return f.s&&t.s?f.d||(t=new h(t.d||f.s===t.s?f:NaN)):t=new h(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,s=h.precision,u=h.rounding,!l[0]||!c[0])return c[0]||(t=new h(f)),br?Ur(t,s,u):t;if(o=Mr(f.e/Br),r=Mr(t.e/Br),l=l.slice(),i=o-r){for(i<0?(n=l,i=-i,a=c.length):(n=c,r=o,a=l.length),i>(a=(o=Math.ceil(s/Br))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=l.length)-(i=c.length)<0&&(i=a,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Tr|0,l[i]%=Tr;for(e&&(l.unshift(e),++r),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=Vr(l,r),br?Ur(t,s,u):t},Ir.precision=Ir.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(xr+t);return n.d?(e=Hr(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},Ir.round=function(){var t=this,e=t.constructor;return Ur(new e(t),t.e+1,e.rounding)},Ir.sine=Ir.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Br,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:ni(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=ni(t,2,e=e.times(1/ri(5,n)),e);for(var i,o=new t(5),a=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(s))));return e}(r,ii(r,n)),r.precision=t,r.rounding=e,Ur(dr>2?n.neg():n,t,e,!0)):new r(NaN)},Ir.squareRoot=Ir.sqrt=function(){var t,e,n,r,i,o,a=this,s=a.d,u=a.e,l=a.s,c=a.constructor;if(1!==l||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?a:1/0);for(br=!1,0==(l=Math.sqrt(+a))||l==1/0?(((e=Rr(s)).length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Mr((u+1)/2)-(u<0||u%2),r=new c(e=l==1/0?"5e"+u:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+u)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(r=(o=r).plus(jr(a,o,n+2,1)).times(.5),Rr(o.d).slice(0,n)===(e=Rr(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(Ur(r,u+1,1),t=!r.times(r).eq(a));break}if(!i&&(Ur(o,u+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return br=!0,Ur(r,u,c.rounding,t)},Ir.tangent=Ir.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=jr(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Ur(2==dr||4==dr?n.neg():n,t,e,!0)):new r(NaN)},Ir.times=Ir.mul=function(t){var e,n,r,i,o,a,s,u,l,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!(h&&h[0]&&d&&d[0]))return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:h&&d?0*t.s:t.s/0);for(n=Mr(c.e/Br)+Mr(t.e/Br),(u=h.length)<(l=d.length)&&(o=h,h=d,d=o,a=u,u=l,l=a),o=[],r=a=u+l;r--;)o.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=o[i]+d[r]*h[i-r-1]+e,o[i--]=s%Tr|0,e=s/Tr|0;o[i]=(o[i]+e)%Tr|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=Vr(o,n),br?Ur(t,f.precision,f.rounding):t},Ir.toBinary=function(t,e){return oi(this,2,t,e)},Ir.toDecimalPlaces=Ir.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(Pr(t,0,mr),void 0===e?e=r.rounding:Pr(e,0,8),Ur(n,t+n.e+1,e))},Ir.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=qr(r,!0):(Pr(t,0,mr),void 0===e?e=i.rounding:Pr(e,0,8),n=qr(r=Ur(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},Ir.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=qr(i):(Pr(t,0,mr),void 0===e?e=o.rounding:Pr(e,0,8),n=qr(r=Ur(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},Ir.toFraction=function(t){var e,n,r,i,o,a,s,u,l,c,f,h,d=this,p=d.d,m=d.constructor;if(!p)return new m(d);if(l=n=new m(1),r=u=new m(0),a=(o=(e=new m(r)).e=Hr(p)-d.e-1)%Br,e.d[0]=Sr(10,a<0?Br+a:a),null==t)t=o>0?e:l;else{if(!(s=new m(t)).isInt()||s.lt(l))throw Error(xr+s);t=s.gt(e)?o>0?e:l:s}for(br=!1,s=new m(Rr(p)),c=m.precision,m.precision=o=p.length*Br*2;f=jr(s,e,0,1,1),1!=(i=n.plus(f.times(r))).cmp(t);)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=s.minus(f.times(i)),s=i;return i=jr(t.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=d.s,h=jr(l,r,o,1).minus(d).abs().cmp(jr(u,n,o,1).minus(d).abs())<1?[l,r]:[u,n],m.precision=c,br=!0,h},Ir.toHexadecimal=Ir.toHex=function(t,e){return oi(this,16,t,e)},Ir.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:Pr(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(br=!1,n=jr(n,t,0,e,1).times(t),br=!0,Ur(n)):(t.s=n.s,n=t),n},Ir.toNumber=function(){return+this},Ir.toOctal=function(t,e){return oi(this,8,t,e)},Ir.toPower=Ir.pow=function(t){var e,n,r,i,o,a,s=this,u=s.constructor,l=+(t=new u(t));if(!(s.d&&t.d&&s.d[0]&&t.d[0]))return new u(Sr(+s,l));if((s=new u(s)).eq(1))return s;if(r=u.precision,o=u.rounding,t.eq(1))return Ur(s,r,o);if((e=Mr(t.e/Br))>=t.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return i=Xr(u,s,n,r),t.s<0?new u(1).div(i):Ur(i,r,o);if((a=s.s)<0){if(e<t.d.length-1)return new u(NaN);if(0==(1&t.d[e])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(e=0!=(n=Sr(+s,l))&&isFinite(n)?new u(n+"").e:Mr(l*(Math.log("0."+Rr(s.d))/Math.LN10+s.e+1)))>u.maxE+1||e<u.minE-1?new u(e>0?a/0:0):(br=!1,u.rounding=s.s=1,n=Math.min(12,(e+"").length),(i=Gr(t.times(Qr(s,r+n)),r)).d&&$r((i=Ur(i,r+5,1)).d,r,o)&&(e=r+10,+Rr((i=Ur(Gr(t.times(Qr(s,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=Ur(i,r+1,0))),i.s=a,br=!0,u.rounding=o,Ur(i,r,o))},Ir.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=qr(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Pr(t,1,mr),void 0===e?e=i.rounding:Pr(e,0,8),n=qr(r=Ur(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},Ir.toSignificantDigits=Ir.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(Pr(t,1,mr),void 0===e?e=n.rounding:Pr(e,0,8)),Ur(new n(this),t,e)},Ir.toString=function(){var t=this,e=t.constructor,n=qr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},Ir.truncated=Ir.trunc=function(){return Ur(new this.constructor(this),this.e+1,1)},Ir.valueOf=Ir.toJSON=function(){var t=this,e=t.constructor,n=qr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var jr=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a,s,u){var l,c,f,h,d,p,m,g,y,v,w,b,_,x,D,E,A,M,S,C,k=r.constructor,F=r.s==i.s?1:-1,N=r.d,T=i.d;if(!(N&&N[0]&&T&&T[0]))return new k(r.s&&i.s&&(N?!T||N[0]!=T[0]:T)?N&&0==N[0]||!T?0*F:F/0:NaN);for(u?(d=1,c=r.e-i.e):(u=Tr,d=Br,c=Mr(r.e/d)-Mr(i.e/d)),S=T.length,A=N.length,v=(y=new k(F)).d=[],f=0;T[f]==(N[f]||0);f++);if(T[f]>(N[f]||0)&&c--,null==o?(x=o=k.precision,a=k.rounding):x=s?o+(r.e-i.e)+1:o,x<0)v.push(1),p=!0;else{if(x=x/d+2|0,f=0,1==S){for(h=0,T=T[0],x++;(f<A||h)&&x--;f++)D=h*u+(N[f]||0),v[f]=D/T|0,h=D%T|0;p=h||f<A}else{for((h=u/(T[0]+1)|0)>1&&(T=t(T,h,u),N=t(N,h,u),S=T.length,A=N.length),E=S,b=(w=N.slice(0,S)).length;b<S;)w[b++]=0;(C=T.slice()).unshift(0),M=T[0],T[1]>=u/2&&++M;do{h=0,(l=e(T,w,S,b))<0?(_=w[0],S!=b&&(_=_*u+(w[1]||0)),(h=_/M|0)>1?(h>=u&&(h=u-1),1==(l=e(m=t(T,h,u),w,g=m.length,b=w.length))&&(h--,n(m,S<g?C:T,g,u))):(0==h&&(l=h=1),m=T.slice()),(g=m.length)<b&&m.unshift(0),n(w,m,b,u),-1==l&&(l=e(T,w,S,b=w.length))<1&&(h++,n(w,S<b?C:T,b,u)),b=w.length):0===l&&(h++,w=[0]),v[f++]=h,l&&w[0]?w[b++]=N[E]||0:(w=[N[E]],b=1)}while((E++<A||void 0!==w[0])&&x--);p=void 0!==w[0]}v[0]||v.shift()}if(1==d)y.e=c,hr=p;else{for(f=1,h=v[0];h>=10;h/=10)f++;y.e=f+c*d-1,Ur(y,s?o+y.e+1:o,a,p)}return y}}();function Ur(t,e,n,r){var i,o,a,s,u,l,c,f,h,d=t.constructor;t:if(null!=e){if(!(f=t.d))return t;for(i=1,s=f[0];s>=10;s/=10)i++;if((o=e-i)<0)o+=Br,a=e,u=(c=f[h=0])/Sr(10,i-a-1)%10|0;else if((h=Math.ceil((o+1)/Br))>=(s=f.length)){if(!r)break t;for(;s++<=h;)f.push(0);c=u=0,i=1,a=(o%=Br)-Br+1}else{for(c=s=f[h],i=1;s>=10;s/=10)i++;u=(a=(o%=Br)-Br+i)<0?0:c/Sr(10,i-a-1)%10|0}if(r=r||e<0||void 0!==f[h+1]||(a<0?c:c%Sr(10,i-a-1)),l=n<4?(u||r)&&(0==n||n==(t.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?a>0?c/Sr(10,i-a):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=Sr(10,(Br-e%Br)%Br),t.e=-e||0):f[0]=t.e=0,t;if(0==o?(f.length=h,s=1,h--):(f.length=h+1,s=Sr(10,Br-o),f[h]=a>0?(c/Sr(10,i-a)%Sr(10,a)|0)*s:0),l)for(;;){if(0==h){for(o=1,a=f[0];a>=10;a/=10)o++;for(a=f[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(t.e++,f[0]==Tr&&(f[0]=1));break}if(f[h]+=s,f[h]!=Tr)break;f[h--]=0,s=1}for(o=f.length;0===f[--o];)f.pop()}return br&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function qr(t,e,n){if(!t.isFinite())return ti(t);var r,i=t.e,o=Rr(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+Yr(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+Yr(-i-1)+o,n&&(r=n-a)>0&&(o+=Yr(r))):i>=a?(o+=Yr(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+Yr(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=Yr(r))),o}function Vr(t,e){var n=t[0];for(e*=Br;n>=10;n/=10)e++;return e}function Wr(t,e,n){if(e>zr)throw br=!0,n&&(t.precision=n),Error(Dr);return Ur(new t(yr),e,1,!0)}function Zr(t,e,n){if(e>Or)throw Error(Dr);return Ur(new t(vr),e,n,!0)}function Hr(t){var e=t.length-1,n=e*Br+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Yr(t){for(var e="";t--;)e+="0";return e}function Xr(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/Br+4);for(br=!1;;){if(n%2&&ai((o=o.times(e)).d,a)&&(i=!0),0===(n=Mr(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}ai((e=e.times(e)).d,a)}return br=!0,o}function Kr(t){return 1&t.d[t.d.length-1]}function Jr(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;){if(!(r=new t(e[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function Gr(t,e){var n,r,i,o,a,s,u,l=0,c=0,f=0,h=t.constructor,d=h.rounding,p=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(br=!1,u=p):u=e,s=new h(.03125);t.e>-2;)t=t.times(s),f+=5;for(u+=r=Math.log(Sr(2,f))/Math.LN10*2+5|0,n=o=a=new h(1),h.precision=u;;){if(o=Ur(o.times(t),u,1),n=n.times(++c),Rr((s=a.plus(jr(o,n,u,1))).d).slice(0,u)===Rr(a.d).slice(0,u)){for(i=f;i--;)a=Ur(a.times(a),u,1);if(null!=e)return h.precision=p,a;if(!(l<3&&$r(a.d,u-r,d,l)))return Ur(a,h.precision=p,d,br=!0);h.precision=u+=10,n=o=s=new h(1),c=0,l++}a=s}}function Qr(t,e){var n,r,i,o,a,s,u,l,c,f,h,d=1,p=t,m=p.d,g=p.constructor,y=g.rounding,v=g.precision;if(p.s<0||!m||!m[0]||!p.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=p.s?NaN:m?0:p);if(null==e?(br=!1,c=v):c=e,g.precision=c+=10,r=(n=Rr(m)).charAt(0),!(Math.abs(o=p.e)<15e14))return l=Wr(g,c+2,v).times(o+""),p=Qr(new g(r+"."+n.slice(1)),c-10).plus(l),g.precision=v,null==e?Ur(p,v,y,br=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=Rr((p=p.times(t)).d)).charAt(0),d++;for(o=p.e,r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1)),f=p,u=a=p=jr(p.minus(1),p.plus(1),c,1),h=Ur(p.times(p),c,1),i=3;;){if(a=Ur(a.times(h),c,1),Rr((l=u.plus(jr(a,new g(i),c,1))).d).slice(0,c)===Rr(u.d).slice(0,c)){if(u=u.times(2),0!==o&&(u=u.plus(Wr(g,c+2,v).times(o+""))),u=jr(u,new g(d),c,1),null!=e)return g.precision=v,u;if(!$r(u.d,c-10,y,s))return Ur(u,g.precision=v,y,br=!0);g.precision=c+=10,l=a=p=jr(f.minus(1),f.plus(1),c,1),h=Ur(p.times(p),c,1),i=s=1}u=l,i+=2}}function ti(t){return String(t.s*t.s/0)}function ei(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Br,n<0&&(r+=Br),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Br;r<i;)t.d.push(+e.slice(r,r+=Br));e=e.slice(r),r=Br-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),br&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function ni(t,e,n,r,i){var o,a,s,u,l=t.precision,c=Math.ceil(l/Br);for(br=!1,u=n.times(n),s=new t(r);;){if(a=jr(s.times(u),new t(e++*e++),l,1),s=i?r.plus(a):r.minus(a),r=jr(a.times(u),new t(e++*e++),l,1),void 0!==(a=s.plus(r)).d[c]){for(o=c;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o}return br=!0,a.d.length=c+1,a}function ri(t,e){for(var n=t;--e;)n*=t;return n}function ii(t,e){var n,r=e.s<0,i=Zr(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return dr=r?4:1,e;if((n=e.divToInt(i)).isZero())dr=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return dr=Kr(n)?r?2:3:r?4:1,e;dr=Kr(n)?r?1:4:r?3:2}return e.minus(i).abs()}function oi(t,e,n,r){var i,o,a,s,u,l,c,f,h,d=t.constructor,p=void 0!==n;if(p?(Pr(n,1,mr),void 0===r?r=d.rounding:Pr(r,0,8)):(n=d.precision,r=d.rounding),t.isFinite()){for(p?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,(a=(c=qr(t)).indexOf("."))>=0&&(c=c.replace(".",""),(h=new d(1)).e=c.length-a,h.d=Lr(qr(h),10,i),h.e=h.d.length),o=u=(f=Lr(c,10,i)).length;0==f[--u];)f.pop();if(f[0]){if(a<0?o--:((t=new d(t)).d=f,t.e=o,f=(t=jr(t,h,n,r,0,i)).d,o=t.e,l=hr),a=f[n],s=i/2,l=l||void 0!==f[n+1],l=r<4?(void 0!==a||l)&&(0===r||r===(t.s<0?3:2)):a>s||a===s&&(4===r||l||6===r&&1&f[n-1]||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++o,f.unshift(1));for(u=f.length;!f[u-1];--u);for(a=0,c="";a<u;a++)c+=gr.charAt(f[a]);if(p){if(u>1)if(16==e||8==e){for(a=16==e?4:3,--u;u%a;u++)c+="0";for(u=(f=Lr(c,i,e)).length;!f[u-1];--u);for(a=1,c="1.";a<u;a++)c+=gr.charAt(f[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>u)for(o-=u;o--;)c+="0";else o<u&&(c=c.slice(0,o)+"."+c.slice(o))}else c=p?"0p+0":"0";c=(16==e?"0x":2==e?"0b":8==e?"0o":"")+c}else c=ti(t);return t.s<0?"-"+c:c}function ai(t,e){if(t.length>e)return t.length=e,!0}function si(t){return new this(t).abs()}function ui(t){return new this(t).acos()}function li(t){return new this(t).acosh()}function ci(t,e){return new this(t).plus(e)}function fi(t){return new this(t).asin()}function hi(t){return new this(t).asinh()}function di(t){return new this(t).atan()}function pi(t){return new this(t).atanh()}function mi(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?Zr(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=Zr(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(jr(t,e,o,1)),e=Zr(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(jr(t,e,o,1)):(n=Zr(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function gi(t){return new this(t).cbrt()}function yi(t){return Ur(t=new this(t),t.e+1,2)}function vi(t,e,n){return new this(t).clamp(e,n)}function wi(t){if(!t||"object"!=typeof t)throw Error(_r+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,mr,"rounding",0,8,"toExpNeg",-pr,0,"toExpPos",0,pr,"maxE",0,pr,"minE",-pr,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=wr[n]),void 0!==(r=t[n])){if(!(Mr(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(xr+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=wr[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(xr+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Er);this[n]=!0}else this[n]=!1}return this}function bi(t){return new this(t).cos()}function _i(t){return new this(t).cosh()}function xi(t,e){return new this(t).div(e)}function Di(t){return new this(t).exp()}function Ei(t){return Ur(t=new this(t),t.e+1,3)}function Ai(){var t,e,n=new this(0);for(br=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return br=!0,new this(1/0);n=e}return br=!0,n.sqrt()}function Mi(t){return t instanceof Hi||t&&t.toStringTag===Ar||!1}function Si(t){return new this(t).ln()}function Ci(t,e){return new this(t).log(e)}function ki(t){return new this(t).log(2)}function Fi(t){return new this(t).log(10)}function Ni(){return Jr(this,arguments,"lt")}function Ti(){return Jr(this,arguments,"gt")}function Bi(t,e){return new this(t).mod(e)}function zi(t,e){return new this(t).mul(e)}function Oi(t,e){return new this(t).pow(e)}function Ii(t){var e,n,r,i,o=0,a=new this(1),s=[];if(void 0===t?t=this.precision:Pr(t,1,mr),r=Math.ceil(t/Br),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Er);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(i%1e7),o+=4);o=r/4}else for(;o<r;)s[o++]=1e7*Math.random()|0;for(r=s[--o],t%=Br,r&&t&&(i=Sr(10,Br-t),s[o]=(r/i|0)*i);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=Br)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<Br&&(n-=Br-r)}return a.e=n,a.d=s,a}function Ri(t){return Ur(t=new this(t),t.e+1,this.rounding)}function Pi(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function $i(t){return new this(t).sin()}function Li(t){return new this(t).sinh()}function ji(t){return new this(t).sqrt()}function Ui(t,e){return new this(t).sub(e)}function qi(){var t=0,e=arguments,n=new this(e[t]);for(br=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return br=!0,Ur(n,this.precision,this.rounding)}function Vi(t){return new this(t).tan()}function Wi(t){return new this(t).tanh()}function Zi(t){return Ur(t=new this(t),t.e+1,1)}Ir[Symbol.for("nodejs.util.inspect.custom")]=Ir.toString,Ir[Symbol.toStringTag]="Decimal";var Hi=Ir.constructor=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,Mi(t))return i.s=t.s,void(br?!t.d||t.e>o.maxE?(i.e=NaN,i.d=null):t.e<o.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"==(r=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(br?e>o.maxE?(i.e=NaN,i.d=null):e<o.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):ei(i,t.toString())}if("string"!==r)throw Error(xr+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===n&&(t=t.slice(1)),i.s=1),Nr.test(t)?ei(i,t):function(t,e){var n,r,i,o,a,s,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Nr.test(e))return ei(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(kr.test(e))n=16,e=e.toLowerCase();else if(Cr.test(e))n=2;else{if(!Fr.test(e))throw Error(xr+e);n=8}for((o=e.search(/p/i))>0?(u=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,r=t.constructor,a&&(o=(s=(e=e.replace(".","")).length)-o,i=Xr(r,new r(n),o,2*o)),o=c=(l=Lr(e,n,Tr)).length-1;0===l[o];--o)l.pop();return o<0?new r(0*t.s):(t.e=Vr(l,c),t.d=l,br=!1,a&&(t=jr(t,i,4*s)),u&&(t=t.times(Math.abs(u)<54?Sr(2,u):Hi.pow(2,u))),br=!0,t)}(i,t)}if(o.prototype=Ir,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=wi,o.clone=t,o.isDecimal=Mi,o.abs=si,o.acos=ui,o.acosh=li,o.add=ci,o.asin=fi,o.asinh=hi,o.atan=di,o.atanh=pi,o.atan2=mi,o.cbrt=gi,o.ceil=yi,o.clamp=vi,o.cos=bi,o.cosh=_i,o.div=xi,o.exp=Di,o.floor=Ei,o.hypot=Ai,o.ln=Si,o.log=Ci,o.log10=Fi,o.log2=ki,o.max=Ni,o.min=Ti,o.mod=Bi,o.mul=zi,o.pow=Oi,o.random=Ii,o.round=Ri,o.sign=Pi,o.sin=$i,o.sinh=Li,o.sqrt=ji,o.sub=Ui,o.sum=qi,o.tan=Vi,o.tanh=Wi,o.trunc=Zi,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(wr);yr=new Hi(yr),vr=new Hi(vr);var Yi=Qn("BigNumber",["?on","config"],(t=>{var{on:e,config:n}=t,r=Hi.clone({precision:n.precision,modulo:Hi.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(t){return new r(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&r.config({precision:t.precision})})),r}),{isClass:!0}),Xi={exports:{}};
/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(t,e){!function(e){var n=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:.5*(Math.exp(t)+Math.exp(-t))},r=Math.sinh||function(t){return Math.abs(t)<1e-9?t:.5*(Math.exp(t)-Math.exp(-t))},i=function(){throw SyntaxError("Invalid Param")};function o(t,e){var n=Math.abs(t),r=Math.abs(e);return 0===t?Math.log(r):0===e?Math.log(n):n<3e3&&r<3e3?.5*Math.log(t*t+e*e):(t/=2,e/=2,.5*Math.log(t*t+e*e)+Math.LN2)}function a(t,e){if(!(this instanceof a))return new a(t,e);var n=function(t,e){var n={re:0,im:0};if(null==t)n.re=n.im=0;else if(void 0!==e)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return a.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return a.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else 2===t.length?(n.re=t[0],n.im=t[1]):i();break;case"string":n.im=n.re=0;var r=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),o=1,s=0;null===r&&i();for(var u=0;u<r.length;u++){var l=r[u];" "===l||"\t"===l||"\n"===l||("+"===l?o++:"-"===l?s++:"i"===l||"I"===l?(o+s===0&&i()," "===r[u+1]||isNaN(r[u+1])?n.im+=parseFloat((s%2?"-":"")+"1"):(n.im+=parseFloat((s%2?"-":"")+r[u+1]),u++),o=s=0):((o+s===0||isNaN(l))&&i(),"i"===r[u+1]||"I"===r[u+1]?(n.im+=parseFloat((s%2?"-":"")+l),u++):n.re+=parseFloat((s%2?"-":"")+l),o=s=0))}o+s>0&&i();break;case"number":n.im=0,n.re=t;break;default:i()}return isNaN(n.re)||isNaN(n.im),n}(t,e);this.re=n.re,this.im=n.im}a.prototype={re:0,im:0,sign:function(){var t=this.abs();return new a(this.re/t,this.im/t)},add:function(t,e){var n=new a(t,e);return this.isInfinite()&&n.isInfinite()?a.NAN:this.isInfinite()||n.isInfinite()?a.INFINITY:new a(this.re+n.re,this.im+n.im)},sub:function(t,e){var n=new a(t,e);return this.isInfinite()&&n.isInfinite()?a.NAN:this.isInfinite()||n.isInfinite()?a.INFINITY:new a(this.re-n.re,this.im-n.im)},mul:function(t,e){var n=new a(t,e);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?a.NAN:this.isInfinite()||n.isInfinite()?a.INFINITY:0===n.im&&0===this.im?new a(this.re*n.re,0):new a(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){var n=new a(t,e);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return a.NAN;if(this.isInfinite()||n.isZero())return a.INFINITY;if(this.isZero()||n.isInfinite())return a.ZERO;t=this.re,e=this.im;var r,i,o=n.re,s=n.im;return 0===s?new a(t/o,e/o):Math.abs(o)<Math.abs(s)?new a((t*(i=o/s)+e)/(r=o*i+s),(e*i-t)/r):new a((t+e*(i=s/o))/(r=s*i+o),(e-t*i)/r)},pow:function(t,e){var n=new a(t,e);if(t=this.re,e=this.im,n.isZero())return a.ONE;if(0===n.im){if(0===e&&t>0)return new a(Math.pow(t,n.re),0);if(0===t)switch((n.re%4+4)%4){case 0:return new a(Math.pow(e,n.re),0);case 1:return new a(0,Math.pow(e,n.re));case 2:return new a(-Math.pow(e,n.re),0);case 3:return new a(0,-Math.pow(e,n.re))}}if(0===t&&0===e&&n.re>0&&n.im>=0)return a.ZERO;var r=Math.atan2(e,t),i=o(t,e);return t=Math.exp(n.re*i-n.im*r),e=n.im*i+n.re*r,new a(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new a(Math.sqrt(n),0);t=.5*Math.sqrt(2*(i+n))}else t=Math.abs(r)/Math.sqrt(2*(i-n));return e=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new a(t,r<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new a(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new a(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;var n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new a(o(t,e),Math.atan2(e,t))},abs:function(){return t=this.re,e=this.im,n=Math.abs(t),r=Math.abs(e),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=t/e):r=e/t,n*Math.sqrt(1+r*r));var t,e,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new a(Math.sin(t)*n(e),Math.cos(t)*r(e))},cos:function(){var t=this.re,e=this.im;return new a(Math.cos(t)*n(e),-Math.sin(t)*r(e))},tan:function(){var t=2*this.re,e=2*this.im,i=Math.cos(t)+n(e);return new a(Math.sin(t)/i,r(e)/i)},cot:function(){var t=2*this.re,e=2*this.im,i=Math.cos(t)-n(e);return new a(-Math.sin(t)/i,r(e)/i)},sec:function(){var t=this.re,e=this.im,i=.5*n(2*e)+.5*Math.cos(2*t);return new a(Math.cos(t)*n(e)/i,Math.sin(t)*r(e)/i)},csc:function(){var t=this.re,e=this.im,i=.5*n(2*e)-.5*Math.cos(2*t);return new a(Math.sin(t)*n(e)/i,-Math.cos(t)*r(e)/i)},asin:function(){var t=this.re,e=this.im,n=new a(e*e-t*t+1,-2*t*e).sqrt(),r=new a(n.re-e,n.im+t).log();return new a(r.im,-r.re)},acos:function(){var t=this.re,e=this.im,n=new a(e*e-t*t+1,-2*t*e).sqrt(),r=new a(n.re-e,n.im+t).log();return new a(Math.PI/2-r.im,r.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new a(0,1/0);if(-1===e)return new a(0,-1/0)}var n=t*t+(1-e)*(1-e),r=new a((1-e*e-t*t)/n,-2*t/n).log();return new a(-.5*r.im,.5*r.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new a(Math.atan2(1,t),0);var n=t*t+e*e;return 0!==n?new a(t/n,-e/n).atan():new a(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new a(0,1/0);var n=t*t+e*e;return 0!==n?new a(t/n,-e/n).acos():new a(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new a(Math.PI/2,1/0);var n=t*t+e*e;return 0!==n?new a(t/n,-e/n).asin():new a(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new a(r(t)*Math.cos(e),n(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new a(n(t)*Math.cos(e),r(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,i=n(t)+Math.cos(e);return new a(r(t)/i,Math.sin(e)/i)},coth:function(){var t=2*this.re,e=2*this.im,i=n(t)-Math.cos(e);return new a(r(t)/i,-Math.sin(e)/i)},csch:function(){var t=this.re,e=this.im,i=Math.cos(2*e)-n(2*t);return new a(-2*r(t)*Math.cos(e)/i,2*n(t)*Math.sin(e)/i)},sech:function(){var t=this.re,e=this.im,i=Math.cos(2*e)+n(2*t);return new a(2*n(t)*Math.cos(e)/i,-2*r(t)*Math.sin(e)/i)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else e=t.im,t.im=-t.re,t.re=e;return t},atanh:function(){var t=this.re,e=this.im,n=t>1&&0===e,r=1-t,i=1+t,s=r*r+e*e,u=0!==s?new a((i*r-e*e)/s,(e*r+i*e)/s):new a(-1!==t?t/0:0,0!==e?e/0:0),l=u.re;return u.re=o(u.re,u.im)/2,u.im=Math.atan2(u.im,l)/2,n&&(u.im=-u.im),u},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new a(0,Math.PI/2);var n=t*t+e*e;return 0!==n?new a(t/n,-e/n).atanh():new a(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new a(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var n=t*t+e*e;return 0!==n?new a(t/n,-e/n).asinh():new a(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return a.INFINITY;var n=t*t+e*e;return 0!==n?new a(t/n,-e/n).acosh():new a(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return a.INFINITY;if(this.isInfinite())return a.ZERO;var t=this.re,e=this.im,n=t*t+e*e;return new a(t/n,-e/n)},conjugate:function(){return new a(this.re,-this.im)},neg:function(){return new a(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new a(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new a(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new a(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var n=new a(t,e);return Math.abs(n.re-this.re)<=a.EPSILON&&Math.abs(n.im-this.im)<=a.EPSILON},clone:function(){return new a(this.re,this.im)},toString:function(){var t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<a.EPSILON&&(t=0),Math.abs(e)<a.EPSILON&&(e=0),0===e?n+t:(0!==t?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),1!==e&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},a.ZERO=new a(0,0),a.ONE=new a(1,0),a.I=new a(0,1),a.PI=new a(Math.PI,0),a.E=new a(Math.E,0),a.INFINITY=new a(1/0,1/0),a.NAN=new a(NaN,NaN),a.EPSILON=1e-15,Object.defineProperty(a,"__esModule",{value:!0}),a.default=a,a.Complex=a,t.exports=a}()}(Xi);var Ki=G(Xi.exports),Ji=Qn("Complex",[],(()=>(Object.defineProperty(Ki,"name",{value:"Complex"}),Ki.prototype.constructor=Ki,Ki.prototype.type="Complex",Ki.prototype.isComplex=!0,Ki.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ki.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ki.prototype.format=function(t){var e=this.im,n=this.re,r=Sn(this.re,t),i=Sn(this.im,t),o=Me(t)?t:t?t.precision:null;if(null!==o){var a=Math.pow(10,-o);Math.abs(n/e)<a&&(n=0),Math.abs(e/n)<a&&(e=0)}return 0===e?r:0===n?1===e?"i":-1===e?"-i":i+"i":e<0?-1===e?r+" - i":r+" - "+i.substring(1)+"i":1===e?r+" + i":r+" + "+i+"i"},Ki.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return Ki(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(Me(n)){if(Fe(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Me(r))return new Ki({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ki.prototype.valueOf=Ki.prototype.toString,Ki.fromJSON=function(t){return new Ki(t)},Ki.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Ki)),{isClass:!0}),Gi={exports:{}};
/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(t,e){!function(e){var n={s:1,n:0,d:1};function r(t,e){if(isNaN(t=parseInt(t,10)))throw u.InvalidParameter;return t*e}function i(t,e){if(0===e)throw u.DivisionByZero;var n=Object.create(u.prototype);n.s=t<0?-1:1;var r=s(t=t<0?-t:t,e);return n.n=t/r,n.d=e/r,n}function o(t){for(var e={},n=t,r=2,i=4;i<=n;){for(;n%r==0;)n/=r,e[r]=(e[r]||0)+1;i+=1+2*r++}return n!==t?n>1&&(e[n]=(e[n]||0)+1):e[t]=(e[t]||0)+1,e}var a=function(t,e){var i,o=0,a=1,s=1,l=0,c=0,f=0,h=1,d=1,p=0,m=1,g=1,y=1,v=1e7;if(null==t);else if(void 0!==e){if(s=(o=t)*(a=e),o%1!=0||a%1!=0)throw u.NonIntegerParameter}else switch(typeof t){case"object":if("d"in t&&"n"in t)o=t.n,a=t.d,"s"in t&&(o*=t.s);else{if(!(0 in t))throw u.InvalidParameter;o=t[0],1 in t&&(a=t[1])}s=o*a;break;case"number":if(t<0&&(s=t,t=-t),t%1==0)o=t;else if(t>0){for(t>=1&&(t/=d=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));m<=v&&y<=v;){if(t===(i=(p+g)/(m+y))){m+y<=v?(o=p+g,a=m+y):y>m?(o=g,a=y):(o=p,a=m);break}t>i?(p+=g,m+=y):(g+=p,y+=m),m>v?(o=g,a=y):(o=p,a=m)}o*=d}else(isNaN(t)||isNaN(e))&&(a=o=NaN);break;case"string":if(null===(m=t.match(/\d+|./g)))throw u.InvalidParameter;if("-"===m[p]?(s=-1,p++):"+"===m[p]&&p++,m.length===p+1?c=r(m[p++],s):"."===m[p+1]||"."===m[p]?("."!==m[p]&&(l=r(m[p++],s)),(1+ ++p===m.length||"("===m[p+1]&&")"===m[p+3]||"'"===m[p+1]&&"'"===m[p+3])&&(c=r(m[p],s),h=Math.pow(10,m[p].length),p++),("("===m[p]&&")"===m[p+2]||"'"===m[p]&&"'"===m[p+2])&&(f=r(m[p+1],s),d=Math.pow(10,m[p+1].length)-1,p+=3)):"/"===m[p+1]||":"===m[p+1]?(c=r(m[p],s),h=r(m[p+2],1),p+=3):"/"===m[p+3]&&" "===m[p+1]&&(l=r(m[p],s),c=r(m[p+2],s),h=r(m[p+4],1),p+=5),m.length<=p){s=o=f+(a=h*d)*l+d*c;break}default:throw u.InvalidParameter}if(0===a)throw u.DivisionByZero;n.s=s<0?-1:1,n.n=Math.abs(o),n.d=Math.abs(a)};function s(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function u(t,e){if(a(t,e),!(this instanceof u))return i(n.s*n.n,n.d);t=s(n.d,n.n),this.s=n.s,this.n=n.n/t,this.d=n.d/t}u.DivisionByZero=new Error("Division by Zero"),u.InvalidParameter=new Error("Invalid argument"),u.NonIntegerParameter=new Error("Parameters must be integer"),u.prototype={s:1,n:0,d:1,abs:function(){return i(this.n,this.d)},neg:function(){return i(-this.s*this.n,this.d)},add:function(t,e){return a(t,e),i(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(t,e){return a(t,e),i(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(t,e){return a(t,e),i(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(t,e){return a(t,e),i(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return i(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new u(NaN);if(void 0===t)return i(this.s*this.n%this.d,1);if(a(t,e),0===n.n&&0===this.d)throw u.DivisionByZero;return i(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(t,e){return a(t,e),i(s(n.n,this.n)*s(n.d,this.d),n.d*this.d)},lcm:function(t,e){return a(t,e),0===n.n&&0===this.n?i(0,1):i(n.n*this.n,s(n.n,this.n)*s(n.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):i(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):i(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):i(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return i(this.s*this.d,this.n)},pow:function(t,e){if(a(t,e),1===n.d)return n.s<0?i(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):i(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var r=o(this.n),s=o(this.d),u=1,l=1;for(var c in r)if("1"!==c){if("0"===c){u=0;break}if(r[c]*=n.n,r[c]%n.d!=0)return null;r[c]/=n.d,u*=Math.pow(c,r[c])}for(var c in s)if("1"!==c){if(s[c]*=n.n,s[c]%n.d!=0)return null;s[c]/=n.d,l*=Math.pow(c,s[c])}return n.s<0?i(l,u):i(u,l)},equals:function(t,e){return a(t,e),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(t,e){a(t,e);var r=this.s*this.n*n.d-n.s*n.n*this.d;return(0<r)-(r<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),n=e.toContinued(),r=1;r<n.length;r++){for(var o=i(n[r-1],1),a=r-2;a>=0;a--)o=o.inverse().add(n[a]);if(o.sub(e).abs().valueOf()<t)return o.mul(this.s)}return this},divisible:function(t,e){return a(t,e),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(t&&(e=Math.floor(r/i))>0&&(n+=e,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(t){var e,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(t&&(e=Math.floor(r/i))>0&&(n+=e,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,r=[];if(isNaN(e)||isNaN(n))return r;do{r.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return r},toString:function(t){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";t=t||15;var r=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,r=1;1!==n;r++)if(n=10*n%e,r>2e3)return 0;return r}(0,n),i=function(t,e,n){for(var r=1,i=function(t,e,n){for(var r=1;e>0;t=t*t%n,e>>=1)1&e&&(r=r*t%n);return r}(10,n,e),o=0;o<300;o++){if(r===i)return o;r=10*r%e,i=10*i%e}return 0}(0,n,r),o=this.s<0?"-":"";if(o+=e/n|0,e%=n,(e*=10)&&(o+="."),r){for(var a=i;a--;)o+=e/n|0,e%=n,e*=10;for(o+="(",a=r;a--;)o+=e/n|0,e%=n,e*=10;o+=")"}else for(a=t;e&&a--;)o+=e/n|0,e%=n,e*=10;return o}},Object.defineProperty(u,"__esModule",{value:!0}),u.default=u,u.Fraction=u,t.exports=u}()}(Gi);var Qi=G(Gi.exports),to=Qn("Fraction",[],(()=>(Object.defineProperty(Qi,"name",{value:"Fraction"}),Qi.prototype.constructor=Qi,Qi.prototype.type="Fraction",Qi.prototype.isFraction=!0,Qi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Qi.fromJSON=function(t){return new Qi(t)},Qi)),{isClass:!0}),eo=Qn("Matrix",[],(()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0});function no(t){return Object.keys(t.signatures||{}).reduce((function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)}),-1)}var ro=Qn("DenseMatrix",["Matrix"],(t=>{var{Matrix:e}=t;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!Ne(e))throw new Error("Invalid datatype: "+e);if(Be(t))"DenseMatrix"===t.type?(this._data=dn(t._data),this._size=dn(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&Te(t.data)&&Te(t.size))this._data=t.data,this._size=t.size,Un(this._data,this._size),this._datatype=e||t.datatype;else if(Te(t))this._data=s(t),this._size=Ln(this._data),Un(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+hn(t)+")");this._data=[],this._size=[0],this._datatype=e}}function r(t,e,n,i){var o=i===n-1,a=e.dimension(i);return o?a.map((function(e){return qn(e,t.length),t[e]})).valueOf():a.map((function(o){return qn(o,t.length),r(t[o],e,n,i+1)})).valueOf()}function i(t,e,n,r,o){var a=o===r-1,s=e.dimension(o);a?s.forEach((function(e,r){qn(e),t[e]=n[r[0]]})):s.forEach((function(a,s){qn(a),i(t[a],e,n[s[0]],r,o+1)}))}function o(t,e,n){if(0===e.length){for(var r=t._data;Te(r);)r=r[0];return r}return t._size=e.slice(0),t._data=Vn(t._data,t._size,n),t}function a(t,e,n){for(var r=t._size.slice(0),i=!1;r.length<e.length;)r.push(0),i=!0;for(var a=0,s=e.length;a<s;a++)e[a]>r[a]&&(r[a]=e[a],i=!0);i&&o(t,r,n)}function s(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];Te(r)?t[e]=s(r):r&&!0===r.isMatrix&&(t[e]=s(r.valueOf()))}return t}return n.prototype=new e,n.prototype.createDenseMatrix=function(t,e){return new n(t,e)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Gn(this._data,hn)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(t,e){return new n(t,e)},n.prototype.subset=function(t,e,o){switch(arguments.length){case 1:return function(t,e){if(!Pe(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var i=e.size();if(i.length!==t._size.length)throw new Pn(i.length,t._size.length);for(var o=e.min(),a=e.max(),s=0,u=t._size.length;s<u;s++)qn(o[s],t._size[s]),qn(a[s],t._size[s]);return new n(r(t._data,e,i.length,0),t._datatype)}(this,t);case 2:case 3:return function(t,e,n,r){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var o,s=e.size(),u=e.isScalar();if(Be(n)?(o=n.size(),n=n.valueOf()):o=Ln(n),u){if(0!==o.length)throw new TypeError("Scalar expected");t.set(e.min(),n,r)}else{if(s.length<t._size.length)throw new Pn(s.length,t._size.length,"<");if(o.length<s.length){for(var l=0,c=0;1===s[l]&&1===o[l];)l++;for(;1===s[l];)c++,l++;n=Xn(n,s.length,c,o)}if(!pn(s,o))throw new Pn(s,o,">");var f=e.max().map((function(t){return t+1}));a(t,f,r);var h=s.length;i(t._data,e,n,h,0)}return t}(this,t,e,o);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(t){if(!Te(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Pn(t.length,this._size.length);for(var e=0;e<t.length;e++)qn(t[e],this._size[e]);for(var n=this._data,r=0,i=t.length;r<i;r++){var o=t[r];qn(o,n.length),n=n[o]}return n},n.prototype.set=function(t,e,n){if(!Te(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new Pn(t.length,this._size.length,"<");var r,i,o;a(this,t.map((function(t){return t+1})),n);var s=this._data;for(r=0,i=t.length-1;r<i;r++)qn(o=t[r],s.length),s=s[o];return qn(o=t[t.length-1],s.length),s[o]=e,this},n.prototype.resize=function(t,e,n){if(!ze(t))throw new TypeError("Array or Matrix expected");var r=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));return o(n?this.clone():this,r,e)},n.prototype.reshape=function(t,e){var n=e?this.clone():this;n._data=Zn(n._data,t);var r=n._size.reduce(((t,e)=>t*e));return n._size=Hn(t,r),n},n.prototype.clone=function(){return new n({data:dn(this._data),size:dn(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(t){var e=this,r=no(t),i=function n(i,o){return Te(i)?i.map((function(t,e){return n(t,o.concat(e))})):1===r?t(i):2===r?t(i,o):t(i,o,e)}(this._data,[]);return new n(i,void 0!==this._datatype?Gn(i,hn):void 0)},n.prototype.forEach=function(t){var e=this;!function n(r,i){Te(r)?r.forEach((function(t,e){n(t,i.concat(e))})):t(r,i,e)}(this._data,[])},n.prototype[Symbol.iterator]=function*(){yield*function*t(e,n){if(Te(e))for(var r=0;r<e.length;r++)yield*t(e[r],n.concat(r));else yield{value:e,index:n}}(this._data,[])},n.prototype.rows=function(){var t=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var e=this._data;for(var r of e)t.push(new n([r],this._datatype));return t},n.prototype.columns=function(){var t=this,e=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,o=function(r){var o=i.map((t=>[t[r]]));e.push(new n(o,t._datatype))},a=0;a<r[1];a++)o(a);return e},n.prototype.toArray=function(){return dn(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(t){return In(this._data,t)},n.prototype.toString=function(){return In(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(t){if(t){if(Se(t)&&(t=t.toNumber()),!Me(t)||!An(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,r=t<0?-t:0,i=this._size[0],o=this._size[1],a=Math.min(i-r,o-e),s=[],u=0;u<a;u++)s[u]=this._data[u+r][u+e];return new n({data:s,size:[a],datatype:this._datatype})},n.diagonal=function(t,e,r,i){if(!Te(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(Se(t)&&(t=t.toNumber()),!Me(t)||!An(t)||t<1)throw new Error("Size values must be positive integers");return t})),r){if(Se(r)&&(r=r.toNumber()),!Me(r)||!An(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var o,a=r>0?r:0,s=r<0?-r:0,u=t[0],l=t[1],c=Math.min(u-s,l-a);if(Te(e)){if(e.length!==c)throw new Error("Invalid value array length");o=function(t){return e[t]}}else if(Be(e)){var f=e.size();if(1!==f.length||f[0]!==c)throw new Error("Invalid matrix length");o=function(t){return e.get([t])}}else o=function(){return e};i||(i=Se(o(0))?o(0).mul(0):0);var h=[];if(t.length>0){h=Vn(h,t,i);for(var d=0;d<c;d++)h[d+s][d+a]=o(d)}return new n({data:h,size:[u,l]})},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(t,e){if(!(Me(t)&&An(t)&&Me(e)&&An(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return qn(t,this._size[0]),qn(e,this._size[0]),n._swapRows(t,e,this._data),this},n._swapRows=function(t,e,n){var r=n[t];n[t]=n[e],n[e]=r},n}),{isClass:!0});function io(t,e){Be(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?io(i,e):e(i)}}function oo(t,e,n){return t&&"function"==typeof t.map?t.map((function(t){return oo(t,e)})):e(t)}function ao(t,e,n){var r,i,o,a;if(e<=0){if(Array.isArray(t[0])){for(a=function(t){var e,n,r=t.length,i=t[0].length,o=[];for(n=0;n<i;n++){var a=[];for(e=0;e<r;e++)a.push(t[e][n]);o.push(a)}return o}(t),i=[],r=0;r<a.length;r++)i[r]=ao(a[r],e-1,n);return i}for(o=t[0],r=1;r<t.length;r++)o=n(o,t[r]);return o}for(i=[],r=0;r<t.length;r++)i[r]=ao(t[r],e-1,n);return i}var so="isInteger",uo=Qn(so,["typed"],(t=>{var{typed:e}=t;return e(so,{number:An,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),lo="number",co="number, number";function fo(t){return Math.abs(t)}function ho(t,e){return t+e}function po(t,e){return t*e}function mo(t){return-t}function go(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}function yo(t){return 0===t}fo.signature=lo,ho.signature=co,po.signature=co,mo.signature=lo,go.signature=co,yo.signature="number";var vo="isZero",wo=Qn(vo,["typed"],(t=>{var{typed:e}=t;return e(vo,{number:yo,BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:e.referToSelf((t=>n=>e.find(t,n.valueType())(n.value))),"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),bo=Qn("compareUnits",["typed"],(t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf((t=>(n,r)=>{if(!n.equalBase(r))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),r.valueType()])(n.value,r.value)}))}})),_o="equalScalar",xo=Qn(_o,["typed","config"],(t=>{var{typed:e,config:n}=t,r=bo({typed:e});return e(_o,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return Bn(t,e,n.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||function(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}(t,e,n.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,n){return Bn(t.re,e.re,n)&&Bn(t.im,e.im,n)}(t,e,n.epsilon)}},r)}));Qn(_o,["typed","config"],(t=>{var{typed:e,config:n}=t;return e(_o,{"number, number":function(t,e){return Bn(t,e,n.epsilon)}})}));var Do=Qn("SparseMatrix",["typed","equalScalar","Matrix"],(t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!Ne(e))throw new Error("Invalid datatype: "+e);if(Be(t))!function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?dn(e._values):void 0,t._index=dn(e._index),t._ptr=dn(e._ptr),t._size=dn(e._size),t._datatype=n||e._datatype):o(t,e.valueOf(),n||e._datatype)}(this,t,e);else if(t&&Te(t.index)&&Te(t.ptr)&&Te(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(Te(t))o(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+hn(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function o(t,r,i){t._values=[],t._index=[],t._ptr=[],t._datatype=i;var o=r.length,a=0,s=n,u=0;if(Ne(i)&&(s=e.find(n,[i,i])||n,u=e.convert(0,i)),o>0){var l=0;do{t._ptr.push(t._index.length);for(var c=0;c<o;c++){var f=r[c];if(Te(f)){if(0===l&&a<f.length&&(a=f.length),l<f.length){var h=f[l];s(h,u)||(t._values.push(h),t._index.push(c))}}else 0===l&&a<1&&(a=1),s(f,u)||(t._values.push(f),t._index.push(c))}l++}while(l<a)}t._ptr.push(t._index.length),t._size=[o,a]}function a(t,e,n,r){if(n-e==0)return n;for(var i=e;i<n;i++)if(r[i]===t)return i;return e}function s(t,e,n,r,i,o,a){i.splice(t,0,r),o.splice(t,0,e);for(var s=n+1;s<a.length;s++)a[s]++}function u(t,r,i,o){var a=o||0,s=n,u=0;Ne(t._datatype)&&(s=e.find(n,[t._datatype,t._datatype])||n,u=e.convert(0,t._datatype),a=e.convert(a,t._datatype));var l,c,f,h=!s(a,u),d=t._size[0],p=t._size[1];if(i>p){for(c=p;c<i;c++)if(t._ptr[c]=t._values.length,h)for(l=0;l<d;l++)t._values.push(a),t._index.push(l);t._ptr[i]=t._values.length}else i<p&&(t._ptr.splice(i+1,p-i),t._values.splice(t._ptr[i],t._values.length),t._index.splice(t._ptr[i],t._index.length));if(p=i,r>d){if(h){var m=0;for(c=0;c<p;c++){t._ptr[c]=t._ptr[c]+m,f=t._ptr[c+1]+m;var g=0;for(l=d;l<r;l++,g++)t._values.splice(f+g,0,a),t._index.splice(f+g,0,l),m++}t._ptr[p]=t._values.length}}else if(r<d){var y=0;for(c=0;c<p;c++){t._ptr[c]=t._ptr[c]-y;var v=t._ptr[c],w=t._ptr[c+1]-y;for(f=v;f<w;f++)(l=t._index[f])>r-1&&(t._values.splice(f,1),t._index.splice(f,1),y++)}t._ptr[c]=t._values.length}return t._size[0]=r,t._size[1]=i,t}function l(t,e,n,r,i){var o,a,s=r[0],u=r[1],l=[];for(o=0;o<s;o++)for(l[o]=[],a=0;a<u;a++)l[o][a]=0;for(a=0;a<u;a++)for(var c=n[a],f=n[a+1],h=c;h<f;h++)l[o=e[h]][a]=t?i?dn(t[h]):t[h]:1;return l}return i.prototype=new r,i.prototype.createSparseMatrix=function(t,e){return new i(t,e)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Gn(this._values,hn)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(t,e){return new i(t,e)},i.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},i.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(t,e){if(!Pe(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var n,r,o,a,s=e.size();if(s.length!==t._size.length)throw new Pn(s.length,t._size.length);var u=e.min(),l=e.max();for(n=0,r=t._size.length;n<r;n++)qn(u[n],t._size[n]),qn(l[n],t._size[n]);var c=t._values,f=t._index,h=t._ptr,d=e.dimension(0),p=e.dimension(1),m=[],g=[];d.forEach((function(t,e){g[t]=e[0],m[t]=!0}));var y=c?[]:void 0,v=[],w=[];return p.forEach((function(t){for(w.push(v.length),o=h[t],a=h[t+1];o<a;o++)n=f[o],!0===m[n]&&(v.push(g[n]),y&&y.push(c[o]))})),w.push(v.length),new i({values:y,index:v,ptr:w,size:s,datatype:t._datatype})}(this,t);case 2:case 3:return function(t,e,n,r){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,o=e.size(),a=e.isScalar();if(Be(n)?(i=n.size(),n=n.toArray()):i=Ln(n),a){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),n,r)}else{if(1!==o.length&&2!==o.length)throw new Pn(o.length,t._size.length,"<");if(i.length<o.length){for(var s=0,u=0;1===o[s]&&1===i[s];)s++;for(;1===o[s];)u++,s++;n=Xn(n,o.length,u,i)}if(!pn(o,i))throw new Pn(o,i,">");if(1===o.length)e.dimension(0).forEach((function(e,i){qn(e),t.set([e,0],n[i[0]],r)}));else{var l=e.dimension(0),c=e.dimension(1);l.forEach((function(e,i){qn(e),c.forEach((function(o,a){qn(o),t.set([e,o],n[i[0]][a[0]],r)}))}))}}return t}(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(t){if(!Te(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Pn(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];qn(e,this._size[0]),qn(n,this._size[1]);var r=a(e,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===e?this._values[r]:0},i.prototype.set=function(t,r,i){if(!Te(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Pn(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=t[0],l=t[1],c=this._size[0],f=this._size[1],h=n,d=0;Ne(this._datatype)&&(h=e.find(n,[this._datatype,this._datatype])||n,d=e.convert(0,this._datatype)),(o>c-1||l>f-1)&&(u(this,Math.max(o+1,c),Math.max(l+1,f),i),c=this._size[0],f=this._size[1]),qn(o,c),qn(l,f);var p=a(o,this._ptr[l],this._ptr[l+1],this._index);return p<this._ptr[l+1]&&this._index[p]===o?h(r,d)?function(t,e,n,r,i){n.splice(t,1),r.splice(t,1);for(var o=e+1;o<i.length;o++)i[o]--}(p,l,this._values,this._index,this._ptr):this._values[p]=r:h(r,d)||s(p,o,l,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(t,e,n){if(!ze(t))throw new TypeError("Array or Matrix expected");var r=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(t){if(!Me(t)||!An(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+In(r)+")")})),u(n?this.clone():this,r[0],r[1],e)},i.prototype.reshape=function(t,e){if(!Te(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!Me(e)||!An(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+In(t)+")")}));var n=this._size[0]*this._size[1];if(n!==(t=Hn(t,n))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return r;for(var i=[],o=0;o<r._ptr.length;o++)for(var u=0;u<r._ptr[o+1]-r._ptr[o];u++)i.push(o);for(var l=r._values.slice(),c=r._index.slice(),f=0;f<r._index.length;f++){var h=c[f],d=i[f],p=h*r._size[1]+d;i[f]=p%t[1],c[f]=Math.floor(p/t[1])}r._values.length=0,r._index.length=0,r._ptr.length=t[1]+1,r._size=t.slice();for(var m=0;m<r._ptr.length;m++)r._ptr[m]=0;for(var g=0;g<l.length;g++){var y=c[g],v=i[g],w=l[g];s(a(y,r._ptr[v],r._ptr[v+1],r._index),y,v,w,r._values,r._index,r._ptr)}return r},i.prototype.clone=function(){return new i({values:this._values?dn(this._values):void 0,index:dn(this._index),ptr:dn(this._ptr),size:dn(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(t,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this,a=this._size[0],s=this._size[1],u=no(t);return function(t,r,o,a,s,u,l){var c=[],f=[],h=[],d=n,p=0;Ne(t._datatype)&&(d=e.find(n,[t._datatype,t._datatype])||n,p=e.convert(0,t._datatype));for(var m=function(t,e,n){t=u(t,e,n),d(t,p)||(c.push(t),f.push(e))},g=0;g<=s;g++){h.push(c.length);var y=t._ptr[g],v=t._ptr[g+1];if(l)for(var w=y;w<v;w++){var b=t._index[w];b>=0&&b<=o&&m(t._values[w],b-0,g-0)}else{for(var _={},x=y;x<v;x++)_[t._index[x]]=t._values[x];for(var D=0;D<=o;D++)m(D in _?_[D]:0,D-0,g-0)}}return h.push(c.length),new i({values:c,index:f,ptr:h,size:[o-0+1,s-0+1]})}(this,0,a-1,0,s-1,(function(e,n,r){return 1===u?t(e):2===u?t(e,[n,r]):t(e,[n,r],o)}),r)},i.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var o=this._ptr[i],a=this._ptr[i+1];if(e)for(var s=o;s<a;s++){var u=this._index[s];t(this._values[s],[u,i],this)}else{for(var l={},c=o;c<a;c++)l[this._index[c]]=this._values[c];for(var f=0;f<n;f++)t(f in l?l[f]:0,[f,i],this)}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var t=this._size[1],e=0;e<t;e++)for(var n=this._ptr[e],r=this._ptr[e+1],i=n;i<r;i++){var o=this._index[i];yield{value:this._values[i],index:[o,e]}}},i.prototype.toArray=function(){return l(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return l(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+In(e,t)+" x "+In(n,t)+"] density: "+In(r,t)+"\n",o=0;o<n;o++)for(var a=this._ptr[o],s=this._ptr[o+1],u=a;u<s;u++)i+="\n    ("+In(this._index[u],t)+", "+In(o,t)+") ==> "+(this._values?In(this._values[u],t):"X");return i},i.prototype.toString=function(){return In(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(t){if(t){if(Se(t)&&(t=t.toNumber()),!Me(t)||!An(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,n=t<0?-t:0,r=this._size[0],o=this._size[1],a=Math.min(r-n,o-e),s=[],u=[],l=[];l[0]=0;for(var c=e;c<o&&s.length<a;c++)for(var f=this._ptr[c],h=this._ptr[c+1],d=f;d<h;d++){var p=this._index[d];if(p===c-e+n){s.push(this._values[d]),u[s.length-1]=p-n;break}}return l.push(s.length),new i({values:s,index:u,ptr:l,size:[a,1]})},i.fromJSON=function(t){return new i(t)},i.diagonal=function(t,r,o,a,s){if(!Te(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(Se(t)&&(t=t.toNumber()),!Me(t)||!An(t)||t<1)throw new Error("Size values must be positive integers");return t})),o){if(Se(o)&&(o=o.toNumber()),!Me(o)||!An(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var u=n,l=0;Ne(s)&&(u=e.find(n,[s,s])||n,l=e.convert(0,s));var c,f=o>0?o:0,h=o<0?-o:0,d=t[0],p=t[1],m=Math.min(d-h,p-f);if(Te(r)){if(r.length!==m)throw new Error("Invalid value array length");c=function(t){return r[t]}}else if(Be(r)){var g=r.size();if(1!==g.length||g[0]!==m)throw new Error("Invalid matrix length");c=function(t){return r.get([t])}}else c=function(){return r};for(var y=[],v=[],w=[],b=0;b<p;b++){w.push(y.length);var _=b-f;if(_>=0&&_<m){var x=c(_);u(x,l)||(v.push(_+h),y.push(x))}}return w.push(y.length),new i({values:y,index:v,ptr:w,size:[d,p]})},i.prototype.swapRows=function(t,e){if(!(Me(t)&&An(t)&&Me(e)&&An(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return qn(t,this._size[0]),qn(e,this._size[0]),i._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(t,e,n,r,i){for(var o=r[t],a=r[t+1],s=o;s<a;s++)i(n[s],e[s])},i._swapRows=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var u=o[s],l=o[s+1],c=a(t,u,l,i),f=a(e,u,l,i);if(c<l&&f<l&&i[c]===t&&i[f]===e){if(r){var h=r[c];r[c]=r[f],r[f]=h}}else if(c<l&&i[c]===t&&(f>=l||i[f]!==e)){var d=r?r[c]:void 0;i.splice(f,0,e),r&&r.splice(f,0,d),i.splice(f<=c?c+1:c,1),r&&r.splice(f<=c?c+1:c,1)}else if(f<l&&i[f]===e&&(c>=l||i[c]!==t)){var p=r?r[f]:void 0;i.splice(c,0,t),r&&r.splice(c,0,p),i.splice(c<=f?f+1:f,1),r&&r.splice(c<=f?f+1:f,1)}}},i}),{isClass:!0}),Eo=Qn("number",["typed"],(t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e,n,r=(n=(e=t).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:e,radix:{"0b":2,"0o":8,"0x":16}[n[1]],integerPart:n[2],fractionalPart:n[3]}:null;if(r)return function(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++)n+=parseInt(t.fractionalPart[r],t.radix)/Math.pow(t.radix,r+1);var i=e+n;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is no valid number');return i}(r);var i=0,o=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(i=Number(o[2]),t=o[1]);var a=Number(t);if(isNaN(a))throw new SyntaxError('String "'+t+'" is no valid number');if(o){if(a>2**i-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));a>=2**(i-1)&&(a-=2**i)}return a},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:e.referToSelf((t=>e=>{var n=e.clone();return n.value=t(e.value),n})),null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))});return n.fromJSON=function(t){return parseFloat(t.value)},n})),Ao=Qn("bignumber",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(t){return new n(t+"")},string:function(t){var e=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(e){var r=e[2],i=n(e[1]),o=new n(2).pow(Number(r));if(i.gt(o.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var a=new n(2).pow(Number(r)-1);return i.gte(a)?i.sub(o):i}return new n(t)},BigNumber:function(t){return t},Unit:e.referToSelf((t=>e=>{var n=e.clone();return n.value=t(e.value),n})),Fraction:function(t){return new n(t.n).div(t.d).times(t.s)},null:function(t){return new n(0)},"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),Mo=Qn("fraction",["typed","Fraction"],(t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new n(t)},string:function(t){return new n(t)},"number, number":function(t,e){return new n(t,e)},null:function(t){return new n(0)},BigNumber:function(t){return new n(t.toString())},Fraction:function(t){return t},Unit:e.referToSelf((t=>e=>{var n=e.clone();return n.value=t(e.value),n})),Object:function(t){return new n(t)},"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),So="matrix",Co=Qn(So,["typed","Matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(So,{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(t,e,n){if("dense"===e||"default"===e||void 0===e)return new r(t,n);if("sparse"===e)return new i(t,n);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}})),ko="unaryMinus",Fo=Qn(ko,["typed"],(t=>{var{typed:e}=t;return e(ko,{number:mo,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf((t=>n=>{var r=n.clone();return r.value=e.find(t,r.valueType())(n.value),r})),"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),No=Qn("abs",["typed"],(t=>{var{typed:e}=t;return e("abs",{number:fo,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),To="addScalar",Bo=Qn(To,["typed"],(t=>{var{typed:e}=t;return e(To,{"number, number":ho,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":e.referToSelf((t=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(t,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})})),zo=Qn("matAlgo11xS0s",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i,o){var a=t._values,s=t._index,u=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,h=l[0],d=l[1],p=n,m=0,g=i;"string"==typeof c&&(f=c,p=e.find(n,[f,f]),m=e.convert(0,f),r=e.convert(r,f),g=e.find(i,[f,f]));for(var y=[],v=[],w=[],b=0;b<d;b++){w[b]=v.length;for(var _=u[b],x=u[b+1],D=_;D<x;D++){var E=s[D],A=o?g(r,a[D]):g(a[D],r);p(A,m)||(v.push(E),y.push(A))}}return w[d]=v.length,t.createSparseMatrix({values:y,index:v,ptr:w,size:[h,d],datatype:f})}})),Oo=Qn("matAlgo12xSfs",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,r,i,o){var a=t._values,s=t._index,u=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,h=l[0],d=l[1],p=i;"string"==typeof c&&(f=c,r=e.convert(r,f),p=e.find(i,[f,f]));for(var m=[],g=[],y=[],v=0;v<d;v++){for(var w=v+1,b=u[v],_=u[v+1],x=b;x<_;x++){var D=s[x];g[D]=a[x],y[D]=w}for(var E=0;E<h;E++)0===v&&(m[E]=[]),y[E]===w?m[E][v]=o?p(r,g[E]):p(g[E],r):m[E][v]=o?p(r,0):p(0,r)}return new n({data:m,size:[h,d],datatype:f})}})),Io=Qn("matAlgo14xDs",["typed"],(t=>{var{typed:e}=t;return function(t,r,i,o){var a,s=t._data,u=t._size,l=t._datatype,c=i;"string"==typeof l&&(a=l,r=e.convert(r,a),c=e.find(i,[a,a]));var f=u.length>0?n(c,0,u,u[0],s,r,o):[];return t.createDenseMatrix({data:f,size:dn(u),datatype:a})};function n(t,e,r,i,o,a,s){var u=[];if(e===r.length-1)for(var l=0;l<i;l++)u[l]=s?t(a,o[l]):t(o[l],a);else for(var c=0;c<i;c++)u[c]=n(t,e+1,r,r[e+1],o[c],a,s);return u}})),Ro=Qn("matAlgo01xDSid",["typed"],(t=>{var{typed:e}=t;return function(t,n,r,i){var o=t._data,a=t._size,s=t._datatype,u=n._values,l=n._index,c=n._ptr,f=n._size,h=n._datatype;if(a.length!==f.length)throw new Pn(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,p,m=a[0],g=a[1],y="string"==typeof s&&s===h?s:void 0,v=y?e.find(r,[y,y]):r,w=[];for(d=0;d<m;d++)w[d]=[];var b=[],_=[];for(p=0;p<g;p++){for(var x=p+1,D=c[p],E=c[p+1],A=D;A<E;A++)b[d=l[A]]=i?v(u[A],o[d][p]):v(o[d][p],u[A]),_[d]=x;for(d=0;d<m;d++)_[d]===x?w[d][p]=b[d]:w[d][p]=o[d][p]}return t.createDenseMatrix({data:w,size:[m,g],datatype:y})}})),Po=Qn("matAlgo04xSidSid",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i){var o=t._values,a=t._index,s=t._ptr,u=t._size,l=t._datatype,c=r._values,f=r._index,h=r._ptr,d=r._size,p=r._datatype;if(u.length!==d.length)throw new Pn(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,g=u[0],y=u[1],v=n,w=0,b=i;"string"==typeof l&&l===p&&(m=l,v=e.find(n,[m,m]),w=e.convert(0,m),b=e.find(i,[m,m]));var _,x,D,E,A,M=o&&c?[]:void 0,S=[],C=[],k=o&&c?[]:void 0,F=o&&c?[]:void 0,N=[],T=[];for(x=0;x<y;x++){C[x]=S.length;var B=x+1;for(E=s[x],A=s[x+1],D=E;D<A;D++)_=a[D],S.push(_),N[_]=B,k&&(k[_]=o[D]);for(E=h[x],A=h[x+1],D=E;D<A;D++)if(N[_=f[D]]===B){if(k){var z=b(k[_],c[D]);v(z,w)?N[_]=null:k[_]=z}}else S.push(_),T[_]=B,F&&(F[_]=c[D]);if(k&&F)for(D=C[x];D<S.length;)N[_=S[D]]===B?(M[D]=k[_],D++):T[_]===B?(M[D]=F[_],D++):S.splice(D,1)}return C[y]=S.length,t.createSparseMatrix({values:M,index:S,ptr:C,size:[g,y],datatype:m})}})),$o=Qn("matAlgo10xSids",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,r,i,o){var a=t._values,s=t._index,u=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,h=l[0],d=l[1],p=i;"string"==typeof c&&(f=c,r=e.convert(r,f),p=e.find(i,[f,f]));for(var m=[],g=[],y=[],v=0;v<d;v++){for(var w=v+1,b=u[v],_=u[v+1],x=b;x<_;x++){var D=s[x];g[D]=a[x],y[D]=w}for(var E=0;E<h;E++)0===v&&(m[E]=[]),y[E]===w?m[E][v]=o?p(r,g[E]):p(g[E],r):m[E][v]=r}return new n({data:m,size:[h,d],datatype:f})}})),Lo=Qn("matAlgo13xDD",["typed"],(t=>{var{typed:e}=t;return function(t,r,i){var o,a=t._data,s=t._size,u=t._datatype,l=r._data,c=r._size,f=r._datatype,h=[];if(s.length!==c.length)throw new Pn(s.length,c.length);for(var d=0;d<s.length;d++){if(s[d]!==c[d])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");h[d]=s[d]}var p=i;"string"==typeof u&&u===f&&(o=u,p=e.find(i,[o,o]));var m=h.length>0?n(p,0,h,h[0],a,l):[];return t.createDenseMatrix({data:m,size:h,datatype:o})};function n(t,e,r,i,o,a){var s=[];if(e===r.length-1)for(var u=0;u<i;u++)s[u]=t(o[u],a[u]);else for(var l=0;l<i;l++)s[l]=n(t,e+1,r,r[e+1],o[l],a[l]);return s}})),jo=Qn("broadcast",["concat"],(t=>{var{concat:e}=t;return function(t,e){var o=Math.max(t._size.length,e._size.length);if(t._size.length===e._size.length&&t._size.every(((t,n)=>t===e._size[n])))return[t,e];for(var a=n(t._size,o,0),s=n(e._size,o,0),u=[],l=0;l<o;l++)u[l]=Math.max(a[l],s[l]);for(var c=0;c<o;c++)i(a,u,c),i(s,u,c);var f=t.clone(),h=e.clone();f._size.length<o?f.reshape(n(f._size,o,1)):h._size.length<o&&h.reshape(n(h._size,o,1));for(var d=0;d<o;d++)f._size[d]<u[d]&&(f=r(f,u[d],d)),h._size[d]<u[d]&&(h=r(h,u[d],d));return[f,h]};function n(t,e,n){return[...Array(e-t.length).fill(n),...t]}function r(t,n,r){return e(...Array(n).fill(t),r)}function i(t,e,n){if(t[n]<e[n]&t[n]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[n]," to size ").concat(e[n]))}})),Uo=Qn("matrixAlgorithmSuite",["typed","matrix","concat"],(t=>{var{typed:e,matrix:n,concat:r}=t,i=Lo({typed:e}),o=Io({typed:e}),a=jo({concat:r});return function(t){var r,s=t.elop,u=t.SD||t.DS;s?(r={"DenseMatrix, DenseMatrix":(t,e)=>i(...a(t,e),s),"Array, Array":(t,e)=>i(...a(n(t),n(e)),s).valueOf(),"Array, DenseMatrix":(t,e)=>i(...a(n(t),e),s),"DenseMatrix, Array":(t,e)=>i(...a(t,n(e)),s)},t.SS&&(r["SparseMatrix, SparseMatrix"]=(e,n)=>t.SS(...a(e,n),s,!1)),t.DS&&(r["DenseMatrix, SparseMatrix"]=(e,n)=>t.DS(...a(e,n),s,!1),r["Array, SparseMatrix"]=(e,r)=>t.DS(...a(n(e),r),s,!1)),u&&(r["SparseMatrix, DenseMatrix"]=(t,e)=>u(...a(e,t),s,!0),r["SparseMatrix, Array"]=(t,e)=>u(...a(n(e),t),s,!0))):(r={"DenseMatrix, DenseMatrix":e.referToSelf((t=>(e,n)=>i(...a(e,n),t))),"Array, Array":e.referToSelf((t=>(e,r)=>i(...a(n(e),n(r)),t).valueOf())),"Array, DenseMatrix":e.referToSelf((t=>(e,r)=>i(...a(n(e),r),t))),"DenseMatrix, Array":e.referToSelf((t=>(e,r)=>i(...a(e,n(r)),t)))},t.SS&&(r["SparseMatrix, SparseMatrix"]=e.referToSelf((e=>(n,r)=>t.SS(...a(n,r),e,!1)))),t.DS&&(r["DenseMatrix, SparseMatrix"]=e.referToSelf((e=>(n,r)=>t.DS(...a(n,r),e,!1))),r["Array, SparseMatrix"]=e.referToSelf((e=>(r,i)=>t.DS(...a(n(r),i),e,!1)))),u&&(r["SparseMatrix, DenseMatrix"]=e.referToSelf((t=>(e,n)=>u(...a(n,e),t,!0))),r["SparseMatrix, Array"]=e.referToSelf((t=>(e,r)=>u(...a(n(r),e),t,!0)))));var l=t.scalar||"any";(t.Ds||t.Ss)&&(s?(r["DenseMatrix,"+l]=(t,e)=>o(t,e,s,!1),r[l+", DenseMatrix"]=(t,e)=>o(e,t,s,!0),r["Array,"+l]=(t,e)=>o(n(t),e,s,!1).valueOf(),r[l+", Array"]=(t,e)=>o(n(e),t,s,!0).valueOf()):(r["DenseMatrix,"+l]=e.referToSelf((t=>(e,n)=>o(e,n,t,!1))),r[l+", DenseMatrix"]=e.referToSelf((t=>(e,n)=>o(n,e,t,!0))),r["Array,"+l]=e.referToSelf((t=>(e,r)=>o(n(e),r,t,!1).valueOf())),r[l+", Array"]=e.referToSelf((t=>(e,r)=>o(n(r),e,t,!0).valueOf()))));var c=void 0!==t.sS?t.sS:t.Ss;return s?(t.Ss&&(r["SparseMatrix,"+l]=(e,n)=>t.Ss(e,n,s,!1)),c&&(r[l+", SparseMatrix"]=(t,e)=>c(e,t,s,!0))):(t.Ss&&(r["SparseMatrix,"+l]=e.referToSelf((e=>(n,r)=>t.Ss(n,r,e,!1)))),c&&(r[l+", SparseMatrix"]=e.referToSelf((t=>(e,n)=>c(n,e,t,!0))))),s&&s.signatures&&function(t,e){for(var n in e)mn(e,n)&&(t[n]=e[n])}(r,s.signatures),r}})),qo=Qn("matAlgo02xDS0",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i,o){var a=t._data,s=t._size,u=t._datatype,l=r._values,c=r._index,f=r._ptr,h=r._size,d=r._datatype;if(s.length!==h.length)throw new Pn(s.length,h.length);if(s[0]!==h[0]||s[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+h+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,m=s[0],g=s[1],y=n,v=0,w=i;"string"==typeof u&&u===d&&(p=u,y=e.find(n,[p,p]),v=e.convert(0,p),w=e.find(i,[p,p]));for(var b=[],_=[],x=[],D=0;D<g;D++){x[D]=_.length;for(var E=f[D],A=f[D+1],M=E;M<A;M++){var S=c[M],C=o?w(l[M],a[S][D]):w(a[S][D],l[M]);y(C,v)||(_.push(S),b.push(C))}}return x[g]=_.length,r.createSparseMatrix({values:b,index:_,ptr:x,size:[m,g],datatype:p})}})),Vo=Qn("matAlgo03xDSf",["typed"],(t=>{var{typed:e}=t;return function(t,n,r,i){var o=t._data,a=t._size,s=t._datatype,u=n._values,l=n._index,c=n._ptr,f=n._size,h=n._datatype;if(a.length!==f.length)throw new Pn(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,p=a[0],m=a[1],g=0,y=r;"string"==typeof s&&s===h&&(d=s,g=e.convert(0,d),y=e.find(r,[d,d]));for(var v=[],w=0;w<p;w++)v[w]=[];for(var b=[],_=[],x=0;x<m;x++){for(var D=x+1,E=c[x],A=c[x+1],M=E;M<A;M++){var S=l[M];b[S]=i?y(u[M],o[S][x]):y(o[S][x],u[M]),_[S]=D}for(var C=0;C<p;C++)_[C]===D?v[C][x]=b[C]:v[C][x]=i?y(g,o[C][x]):y(o[C][x],g)}return t.createDenseMatrix({data:v,size:[p,m],datatype:d})}})),Wo=Qn("matAlgo05xSfSf",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i){var o=t._values,a=t._index,s=t._ptr,u=t._size,l=t._datatype,c=r._values,f=r._index,h=r._ptr,d=r._size,p=r._datatype;if(u.length!==d.length)throw new Pn(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,g=u[0],y=u[1],v=n,w=0,b=i;"string"==typeof l&&l===p&&(m=l,v=e.find(n,[m,m]),w=e.convert(0,m),b=e.find(i,[m,m]));var _,x,D,E,A=o&&c?[]:void 0,M=[],S=[],C=A?[]:void 0,k=A?[]:void 0,F=[],N=[];for(x=0;x<y;x++){S[x]=M.length;var T=x+1;for(D=s[x],E=s[x+1];D<E;D++)_=a[D],M.push(_),F[_]=T,C&&(C[_]=o[D]);for(D=h[x],E=h[x+1];D<E;D++)F[_=f[D]]!==T&&M.push(_),N[_]=T,k&&(k[_]=c[D]);if(A)for(D=S[x];D<M.length;){var B=F[_=M[D]],z=N[_];if(B===T||z===T){var O=b(B===T?C[_]:w,z===T?k[_]:w);v(O,w)?M.splice(D,1):(A.push(O),D++)}}}return S[y]=M.length,t.createSparseMatrix({values:A,index:M,ptr:S,size:[g,y],datatype:m})}})),Zo=Qn("multiplyScalar",["typed"],(t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":po,"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":(t,e)=>e.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,e)=>t.multiply(e)})})),Ho="multiply",Yo=Qn(Ho,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:o,dot:a}=t,s=zo({typed:e,equalScalar:o}),u=Io({typed:e});function l(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}function c(t,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(t,n){var o,a=t._data,s=t._size,u=t._datatype,l=n._data,c=n._size,f=n._datatype,h=s[0],d=c[1],p=r,m=i;u&&f&&u===f&&"string"==typeof u&&(o=u,p=e.find(r,[o,o]),m=e.find(i,[o,o]));for(var g=[],y=0;y<d;y++){for(var v=m(a[0],l[0][y]),w=1;w<h;w++)v=p(v,m(a[w],l[w][y]));g[y]=v}return t.createDenseMatrix({data:g,size:[d],datatype:o})}(t,n)}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":function(t,n){var o,a=t._data,s=t._size,u=t._datatype,l=n._data,c=n._datatype,f=s[0],h=s[1],d=r,p=i;u&&c&&u===c&&"string"==typeof u&&(o=u,d=e.find(r,[o,o]),p=e.find(i,[o,o]));for(var m=[],g=0;g<f;g++){for(var y=a[g],v=p(y[0],l[0]),w=1;w<h;w++)v=d(v,p(y[w],l[w]));m[g]=v}return t.createDenseMatrix({data:m,size:[f],datatype:o})},"SparseMatrix, any":function(t,n){var a=t._values,s=t._index,u=t._ptr,l=t._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,f=n._data,h=n._datatype,d=t._size[0],p=n._size[0],m=[],g=[],y=[],v=r,w=i,b=o,_=0;l&&h&&l===h&&"string"==typeof l&&(c=l,v=e.find(r,[c,c]),w=e.find(i,[c,c]),b=e.find(o,[c,c]),_=e.convert(0,c));var x=[],D=[];y[0]=0;for(var E=0;E<p;E++){var A=f[E];if(!b(A,_))for(var M=u[E],S=u[E+1],C=M;C<S;C++){var k=s[C];D[k]?x[k]=v(x[k],w(A,a[C])):(D[k]=!0,g.push(k),x[k]=w(A,a[C]))}}for(var F=g.length,N=0;N<F;N++){var T=g[N];m[N]=x[T]}return y[1]=g.length,t.createSparseMatrix({values:m,index:g,ptr:y,size:[d,1],datatype:c})}}),h=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,n){var o,a=t._data,s=t._size,u=t._datatype,l=n._data,c=n._size,f=n._datatype,h=s[0],d=s[1],p=c[1],m=r,g=i;u&&f&&u===f&&"string"==typeof u&&(o=u,m=e.find(r,[o,o]),g=e.find(i,[o,o]));for(var y=[],v=0;v<h;v++){var w=a[v];y[v]=[];for(var b=0;b<p;b++){for(var _=g(w[0],l[0][b]),x=1;x<d;x++)_=m(_,g(w[x],l[x][b]));y[v][b]=_}}return t.createDenseMatrix({data:y,size:[h,p],datatype:o})},"DenseMatrix, SparseMatrix":function(t,n){var a=t._data,s=t._size,u=t._datatype,l=n._values,c=n._index,f=n._ptr,h=n._size,d=n._datatype;if(!l)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,m=s[0],g=h[1],y=r,v=i,w=o,b=0;u&&d&&u===d&&"string"==typeof u&&(p=u,y=e.find(r,[p,p]),v=e.find(i,[p,p]),w=e.find(o,[p,p]),b=e.convert(0,p));for(var _=[],x=[],D=[],E=n.createSparseMatrix({values:_,index:x,ptr:D,size:[m,g],datatype:p}),A=0;A<g;A++){D[A]=x.length;var M=f[A],S=f[A+1];if(S>M)for(var C=0,k=0;k<m;k++){for(var F=k+1,N=void 0,T=M;T<S;T++){var B=c[T];C!==F?(N=v(a[k][B],l[T]),C=F):N=y(N,v(a[k][B],l[T]))}C!==F||w(N,b)||(x.push(k),_.push(N))}}return D[g]=x.length,E},"SparseMatrix, DenseMatrix":function(t,n){var a=t._values,s=t._index,u=t._ptr,l=t._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,f=n._data,h=n._datatype,d=t._size[0],p=n._size[0],m=n._size[1],g=r,y=i,v=o,w=0;l&&h&&l===h&&"string"==typeof l&&(c=l,g=e.find(r,[c,c]),y=e.find(i,[c,c]),v=e.find(o,[c,c]),w=e.convert(0,c));for(var b=[],_=[],x=[],D=t.createSparseMatrix({values:b,index:_,ptr:x,size:[d,m],datatype:c}),E=[],A=[],M=0;M<m;M++){x[M]=_.length;for(var S=M+1,C=0;C<p;C++){var k=f[C][M];if(!v(k,w))for(var F=u[C],N=u[C+1],T=F;T<N;T++){var B=s[T];A[B]!==S?(A[B]=S,_.push(B),E[B]=y(k,a[T])):E[B]=g(E[B],y(k,a[T]))}}for(var z=x[M],O=_.length,I=z;I<O;I++){var R=_[I];b[I]=E[R]}}return x[m]=_.length,D},"SparseMatrix, SparseMatrix":function(t,n){var o,a=t._values,s=t._index,u=t._ptr,l=t._datatype,c=n._values,f=n._index,h=n._ptr,d=n._datatype,p=t._size[0],m=n._size[1],g=a&&c,y=r,v=i;l&&d&&l===d&&"string"==typeof l&&(o=l,y=e.find(r,[o,o]),v=e.find(i,[o,o]));for(var w,b,_,x,D,E,A,M,S=g?[]:void 0,C=[],k=[],F=t.createSparseMatrix({values:S,index:C,ptr:k,size:[p,m],datatype:o}),N=g?[]:void 0,T=[],B=0;B<m;B++){k[B]=C.length;var z=B+1;for(D=h[B],E=h[B+1],x=D;x<E;x++)if(M=f[x],g)for(b=u[M],_=u[M+1],w=b;w<_;w++)T[A=s[w]]!==z?(T[A]=z,C.push(A),N[A]=v(c[x],a[w])):N[A]=y(N[A],v(c[x],a[w]));else for(b=u[M],_=u[M+1],w=b;w<_;w++)T[A=s[w]]!==z&&(T[A]=z,C.push(A));if(g)for(var O=k[B],I=C.length,R=O;R<I;R++){var P=C[R];S[R]=N[P]}}return k[m]=C.length,F}});return e(Ho,i,{"Array, Array":e.referTo("Matrix, Matrix",(t=>(e,r)=>{l(Ln(e),Ln(r));var i=t(n(e),n(r));return Be(i)?i.valueOf():i})),"Matrix, Matrix":function(t,e){var n=t.size(),r=e.size();return l(n,r),1===n.length?1===r.length?function(t,e,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return a(t,e)}(t,e,n[0]):c(t,e):1===r.length?f(t,e):h(t,e)},"Matrix, Array":e.referTo("Matrix,Matrix",(t=>(e,r)=>t(e,n(r)))),"Array, Matrix":e.referToSelf((t=>(e,r)=>t(n(e,r.storage()),r))),"SparseMatrix, any":function(t,e){return s(t,e,i,!1)},"DenseMatrix, any":function(t,e){return u(t,e,i,!1)},"any, SparseMatrix":function(t,e){return s(e,t,i,!0)},"any, DenseMatrix":function(t,e){return u(e,t,i,!0)},"Array, any":function(t,e){return u(n(t),e,i,!1).valueOf()},"any, Array":function(t,e){return u(n(e),t,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf((t=>(e,n,r)=>{for(var i=t(e,n),o=0;o<r.length;o++)i=t(i,r[o]);return i}))})})),Xo=Qn("sqrt",["config","typed","Complex"],(t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():i(t.toNumber())},Unit:function(t){return t.pow(.5)}});function i(t){return isNaN(t)?NaN:t>=0||e.predictable?Math.sqrt(t):new r(t,0).sqrt()}})),Ko="subtract",Jo=Qn(Ko,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],(t=>{var{typed:e,matrix:n,equalScalar:r,addScalar:i,unaryMinus:o,DenseMatrix:a,concat:s}=t,u=Ro({typed:e}),l=Vo({typed:e}),c=Wo({typed:e,equalScalar:r}),f=$o({typed:e,DenseMatrix:a}),h=Oo({typed:e,DenseMatrix:a}),d=Uo({typed:e,matrix:n,concat:s});return e(Ko,{"number, number":(t,e)=>t-e,"Complex, Complex":(t,e)=>t.sub(e),"BigNumber, BigNumber":(t,e)=>t.minus(e),"Fraction, Fraction":(t,e)=>t.sub(e),"Unit, Unit":e.referToSelf((t=>(n,r)=>{if(null===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(t,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))},d({SS:c,DS:u,SD:l,Ss:h,sS:f}))})),Go=Qn("matAlgo09xS0Sf",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i){var o=t._values,a=t._index,s=t._ptr,u=t._size,l=t._datatype,c=r._values,f=r._index,h=r._ptr,d=r._size,p=r._datatype;if(u.length!==d.length)throw new Pn(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,g=u[0],y=u[1],v=n,w=0,b=i;"string"==typeof l&&l===p&&(m=l,v=e.find(n,[m,m]),w=e.convert(0,m),b=e.find(i,[m,m]));var _,x,D,E,A,M=o&&c?[]:void 0,S=[],C=[],k=M?[]:void 0,F=[];for(x=0;x<y;x++){C[x]=S.length;var N=x+1;if(k)for(E=h[x],A=h[x+1],D=E;D<A;D++)F[_=f[D]]=N,k[_]=c[D];for(E=s[x],A=s[x+1],D=E;D<A;D++)if(_=a[D],k){var T=F[_]===N?k[_]:w,B=b(o[D],T);v(B,w)||(S.push(_),M.push(B))}else S.push(_)}return C[y]=S.length,t.createSparseMatrix({values:M,index:S,ptr:C,size:[g,y],datatype:m})}})),Qo="dotMultiply",ta=Qn(Qo,["typed","matrix","equalScalar","multiplyScalar","concat"],(t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:i,concat:o}=t,a=qo({typed:e,equalScalar:r}),s=Go({typed:e,equalScalar:r}),u=zo({typed:e,equalScalar:r}),l=Uo({typed:e,matrix:n,concat:o});return e(Qo,l({elop:i,SS:s,DS:a,Ss:u}))})),ea=Qn("matAlgo07xSSf",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,i,o){var a=t._size,s=t._datatype,u=i._size,l=i._datatype;if(a.length!==u.length)throw new Pn(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");var c,f,h,d=a[0],p=a[1],m=0,g=o;"string"==typeof s&&s===l&&(c=s,m=e.convert(0,c),g=e.find(o,[c,c]));var y=[];for(f=0;f<d;f++)y[f]=[];var v=[],w=[],b=[],_=[];for(h=0;h<p;h++){var x=h+1;for(r(t,h,b,v,x),r(i,h,_,w,x),f=0;f<d;f++){var D=b[f]===x?v[f]:m,E=_[f]===x?w[f]:m;y[f][h]=g(D,E)}}return new n({data:y,size:[d,p],datatype:c})};function r(t,e,n,r,i){for(var o=t._values,a=t._index,s=t._ptr,u=s[e],l=s[e+1];u<l;u++){var c=a[u];n[c]=i,r[c]=o[u]}}})),na="conj",ra=Qn(na,["typed"],(t=>{var{typed:e}=t;return e(na,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf((t=>e=>oo(e,t)))})})),ia="concat",oa=Qn(ia,["typed","matrix","isInteger"],(t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(ia,{"...Array | Matrix | number | BigNumber":function(t){var e,i,o=t.length,a=-1,s=!1,u=[];for(e=0;e<o;e++){var l=t[e];if(Be(l)&&(s=!0),Me(l)||Se(l)){if(e!==o-1)throw new Error("Dimension must be specified as last argument");if(i=a,a=l.valueOf(),!r(a))throw new TypeError("Integer number expected for dimension");if(a<0||e>0&&a>i)throw new $n(a,i+1)}else{var c=dn(l).valueOf(),f=Ln(c);if(u[e]=c,i=a,a=f.length-1,e>0&&a!==i)throw new Pn(i+1,a+1)}}if(0===u.length)throw new SyntaxError("At least one matrix expected");for(var h=u.shift();u.length;)h=aa(h,u.shift(),a,0);return s?n(h):h},"...string":function(t){return t.join("")}})}));function aa(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Pn(t.length,e.length);for(var i=[],o=0;o<t.length;o++)i[o]=aa(t[o],e[o],n,r+1);return i}return t.concat(e)}var sa="diag",ua=Qn(sa,["typed","matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(sa,{Array:function(t){return o(t,0,Ln(t),null)},"Array, number":function(t,e){return o(t,e,Ln(t),null)},"Array, BigNumber":function(t,e){return o(t,e.toNumber(),Ln(t),null)},"Array, string":function(t,e){return o(t,0,Ln(t),e)},"Array, number, string":function(t,e,n){return o(t,e,Ln(t),n)},"Array, BigNumber, string":function(t,e,n){return o(t,e.toNumber(),Ln(t),n)},Matrix:function(t){return o(t,0,t.size(),t.storage())},"Matrix, number":function(t,e){return o(t,e,t.size(),t.storage())},"Matrix, BigNumber":function(t,e){return o(t,e.toNumber(),t.size(),t.storage())},"Matrix, string":function(t,e){return o(t,0,t.size(),e)},"Matrix, number, string":function(t,e,n){return o(t,e,t.size(),n)},"Matrix, BigNumber, string":function(t,e,n){return o(t,e.toNumber(),t.size(),n)}});function o(t,e,o,a){if(!An(e))throw new TypeError("Second parameter in function diag must be an integer");var s=e>0?e:0,u=e<0?-e:0;switch(o.length){case 1:return function(t,e,n,o,a,s){var u=[o+a,o+s];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var l="sparse"===n?i.diagonal(u,t,e):r.diagonal(u,t,e);return null!==n?l:l.valueOf()}(t,e,a,o[0],u,s);case 2:return function(t,e,r,i,o,a){if(Be(t)){var s=t.diagonal(e);return null!==r?r!==s.storage()?n(s,r):s:s.valueOf()}for(var u=Math.min(i[0]-o,i[1]-a),l=[],c=0;c<u;c++)l[c]=t[c+o][c+a];return null!==r?n(l):l}(t,e,a,o,u,s)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),la="flatten",ca=Qn(la,["typed","matrix"],(t=>{var{typed:e,matrix:n}=t;return e(la,{Array:function(t){return Jn(t)},Matrix:function(t){var e=Jn(t.toArray());return n(e)}})})),fa="identity",ha=Qn(fa,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:o,SparseMatrix:a}=t;return e(fa,{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(t){return r(t)},"number | BigNumber":function(t){return u(t,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(t,e){return u(t,t,e)},"number | BigNumber, number | BigNumber":function(t,e){return u(t,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,n){return u(t,e,n)},Array:function(t){return s(t)},"Array, string":function(t,e){return s(t,e)},Matrix:function(t){return s(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return s(t.valueOf(),e)}});function s(t,e){switch(t.length){case 0:return e?r(e):[];case 1:return u(t[0],t[0],e);case 2:return u(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function u(t,e,n){var r=Se(t)||Se(e)?i:null;if(Se(t)&&(t=t.toNumber()),Se(e)&&(e=e.toNumber()),!An(t)||t<1)throw new Error("Parameters in function identity must be positive integers");if(!An(e)||e<1)throw new Error("Parameters in function identity must be positive integers");var s=r?new i(1):1,u=r?new r(0):0,l=[t,e];if(n){if("sparse"===n)return a.diagonal(l,s,0,u);if("dense"===n)return o.diagonal(l,s,0,u);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var c=Vn([],l,u),f=t<e?t:e,h=0;h<f;h++)c[h][h]=s;return c}})),da=Qn("ones",["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e("ones",{"":function(){return"Array"===n.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return o(t,e)}return"Array"===n.matrix?o(t):o(t,"default")},Array:o,Matrix:function(t){var e=t.storage();return o(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return o(t.valueOf(),e)}});function o(t,e){var n=function(t){var e=!1;return t.forEach((function(t,n,r){Se(t)&&(e=!0,r[n]=t.toNumber())})),e}(t),o=n?new i(1):1;if(function(t){t.forEach((function(t){if("number"!=typeof t||!An(t)||t<0)throw new Error("Parameters in function ones must be positive integers")}))}(t),e){var a=r(e);return t.length>0?a.resize(t,o):a}var s=[];return t.length>0?Vn(s,t,o):s}}));function pa(){throw new Error('No "bignumber" implementation available')}function ma(){throw new Error('No "fraction" implementation available')}var ga="reshape",ya=Qn(ga,["typed","isInteger","matrix"],(t=>{var{typed:e,isInteger:n}=t;return e(ga,{"Matrix, Array":function(t,e){return t.reshape(e,!0)},"Array, Array":function(t,e){return e.forEach((function(t){if(!n(t))throw new TypeError("Invalid size for dimension: "+t)})),Zn(t,e)}})})),va="size",wa=Qn(va,["typed","config","?matrix"],(t=>{var{typed:e,config:n,matrix:r}=t;return e(va,{Matrix:function(t){return t.create(t.size())},Array:Ln,string:function(t){return"Array"===n.matrix?[t.length]:r([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===n.matrix?[]:r?r([]):function(){throw new Error('No "matrix" implementation available')}()}})})),ba="transpose",_a=Qn(ba,["typed","matrix"],(t=>{var{typed:e,matrix:n}=t;return e(ba,{Array:t=>r(n(t)).valueOf(),Matrix:r,any:dn});function r(t){var e,n=t.size();switch(n.length){case 1:e=t.clone();break;case 2:var r=n[0],i=n[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+In(n)+")");switch(t.storage()){case"dense":e=function(t,e,n){for(var r,i=t._data,o=[],a=0;a<n;a++){r=o[a]=[];for(var s=0;s<e;s++)r[s]=dn(i[s][a])}return t.createDenseMatrix({data:o,size:[n,e],datatype:t._datatype})}(t,r,i);break;case"sparse":e=function(t,e,n){for(var r,i,o,a=t._values,s=t._index,u=t._ptr,l=a?[]:void 0,c=[],f=[],h=[],d=0;d<e;d++)h[d]=0;for(r=0,i=s.length;r<i;r++)h[s[r]]++;for(var p=0,m=0;m<e;m++)f.push(p),p+=h[m],h[m]=f[m];for(f.push(p),o=0;o<n;o++)for(var g=u[o],y=u[o+1],v=g;v<y;v++){var w=h[s[v]]++;c[w]=o,a&&(l[w]=dn(a[v]))}return t.createSparseMatrix({values:l,index:c,ptr:f,size:[n,e],datatype:t._datatype})}(t,r,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+In(n)+")")}return e}}));function xa(t,e,n){var r;return-1!==String(t).indexOf("Unexpected type")?(r=arguments.length>2?" (type: "+hn(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):-1!==String(t).indexOf("complex numbers")?(r=arguments.length>2?" (type: "+hn(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var Da=Qn("numeric",["number","?bignumber","?fraction"],(t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:t=>e(t),BigNumber:n?t=>n(t):pa,Fraction:r?t=>r(t):ma};return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var n=hn(t);if(!(n in i))throw new TypeError("Cannot convert "+t+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(e in o))throw new TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(o).join(", "));return e===n?t:o[e](t)}})),Ea="divideScalar",Aa=Qn(Ea,["typed","numeric"],(t=>{var{typed:e,numeric:n}=t;return e(Ea,{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Complex | Fraction | BigNumber | Unit":(t,e)=>t.divide(e),"number | Fraction | Complex | BigNumber, Unit":(t,e)=>e.divideInto(t)})})),Ma=Qn("pow",["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],(t=>{var{typed:e,config:n,identity:r,multiply:i,matrix:o,inv:a,number:s,fraction:u,Complex:l}=t;return e("pow",{"number, number":c,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(t,e){return e.isInteger()||t>=0||n.predictable?t.pow(e):new l(t.toNumber(),0).pow(e.toNumber(),0)},"Fraction, Fraction":function(t,e){var r=t.pow(e);if(null!=r)return r;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(t.valueOf(),e.valueOf())},"Array, number":f,"Array, BigNumber":function(t,e){return f(t,e.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(t,e){return h(t,e.toNumber())},"Unit, number | BigNumber":function(t,e){return t.pow(e)}});function c(t,e){if(n.predictable&&!An(e)&&t<0)try{var r=u(e),i=s(r);if((e===i||Math.abs((e-i)/e)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-t,e)}catch(t){}return n.predictable&&(t<-1&&e===1/0||t>-1&&t<0&&e===-1/0)?NaN:An(e)||t>=0||n.predictable?go(t,e):t*t<1&&e===1/0||t*t>1&&e===-1/0?0:new l(t,0).pow(e,0)}function f(t,e){if(!An(e))throw new TypeError("For A^b, b must be an integer (value is "+e+")");var n=Ln(t);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");if(e<0)try{return f(a(t),-e)}catch(t){if("Cannot calculate inverse, determinant is zero"===t.message)throw new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+e+")");throw t}for(var o=r(n[0]).valueOf(),s=t;e>=1;)1==(1&e)&&(o=i(s,o)),e>>=1,s=i(s,s);return o}function h(t,e){return o(f(t.valueOf(),e))}})),Sa="dotPow",Ca=Qn(Sa,["typed","equalScalar","matrix","pow","DenseMatrix","concat"],(t=>{var{typed:e,equalScalar:n,matrix:r,pow:i,DenseMatrix:o,concat:a}=t,s=Vo({typed:e}),u=ea({typed:e,DenseMatrix:o}),l=zo({typed:e,equalScalar:n}),c=Oo({typed:e,DenseMatrix:o}),f=Uo({typed:e,matrix:r,concat:a}),h={};for(var d in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,d)&&(d.includes("Matrix")||d.includes("Array")||(h[d]=i.signatures[d]));var p=e(h);return e(Sa,f({elop:p,SS:u,DS:s,Ss:l,sS:c}))})),ka="dotDivide",Fa=Qn(ka,["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],(t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:o,concat:a}=t,s=qo({typed:e,equalScalar:r}),u=Vo({typed:e}),l=ea({typed:e,DenseMatrix:o}),c=zo({typed:e,equalScalar:r}),f=Oo({typed:e,DenseMatrix:o}),h=Uo({typed:e,matrix:n,concat:a});return e(ka,h({elop:i,SS:l,DS:u,SD:s,Ss:c,sS:f}))})),Na="equal",Ta=Qn(Na,["typed","matrix","equalScalar","DenseMatrix","concat"],(t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:o}=t,a=Vo({typed:e}),s=ea({typed:e,DenseMatrix:i}),u=Oo({typed:e,DenseMatrix:i}),l=Uo({typed:e,matrix:n,concat:o});return e(Na,Ba({typed:e,equalScalar:r}),l({elop:r,SS:s,DS:a,Ss:u}))})),Ba=Qn(Na,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return e(Na,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:n(t,e)}})})),za="deepEqual",Oa=Qn(za,["typed","equal"],(t=>{var{typed:e,equal:n}=t;return e(za,{"any, any":function(t,e){return r(t.valueOf(),e.valueOf())}});function r(t,e){if(Array.isArray(t)){if(Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(var o=0;o<i;o++)if(!r(t[o],e[o]))return!1;return!0}return!1}return!Array.isArray(e)&&n(t,e)}})),Ia=Qn("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],(t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:o,SparseMatrix:a,concat:s}=t,u=Ro({typed:e}),l=Po({typed:e,equalScalar:i}),c=$o({typed:e,DenseMatrix:o}),f=Uo({typed:e,matrix:n,concat:s});return e("add",{"any, any":r,"any, any, ...any":e.referToSelf((t=>(e,n,r)=>{for(var i=t(e,n),o=0;o<r.length;o++)i=t(i,r[o]);return i}))},f({elop:r,DS:u,SS:l,Ss:c}))})),Ra=Qn("dot",["typed","addScalar","multiplyScalar","conj","size"],(t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:o}=t;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(t,o){var u=a(t,o),l=Be(t)?t._data:t,c=Be(t)?t._datatype:void 0,f=Be(o)?o._data:o,h=Be(o)?o._datatype:void 0,d=2===s(t).length,p=2===s(o).length,m=n,g=r;if(c&&h&&c===h&&"string"==typeof c){var y=c;m=e.find(n,[y,y]),g=e.find(r,[y,y])}if(!d&&!p){for(var v=g(i(l[0]),f[0]),w=1;w<u;w++)v=m(v,g(i(l[w]),f[w]));return v}if(!d&&p){for(var b=g(i(l[0]),f[0][0]),_=1;_<u;_++)b=m(b,g(i(l[_]),f[_][0]));return b}if(d&&!p){for(var x=g(i(l[0][0]),f[0]),D=1;D<u;D++)x=m(x,g(i(l[D][0]),f[D]));return x}if(d&&p){for(var E=g(i(l[0][0]),f[0][0]),A=1;A<u;A++)E=m(E,g(i(l[A][0]),f[A][0]));return E}},"SparseMatrix, SparseMatrix":function(t,e){a(t,e);for(var i=t._index,o=t._values,s=e._index,u=e._values,l=0,c=n,f=r,h=0,d=0;h<i.length&&d<s.length;){var p=i[h],m=s[d];p<m?h++:p>m?d++:p===m&&(l=c(l,f(o[h],u[d])),h++,d++)}return l}});function a(t,e){var n,r,i=s(t),o=s(e);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===o.length)r=o[0];else{if(2!==o.length||1!==o[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");r=o[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function s(t){return Be(t)?t.size():o(t)}})),Pa=Qn("det",["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],(t=>{var{typed:e,matrix:n,subtract:r,multiply:i,divideScalar:o,isZero:a,unaryMinus:s}=t;return e("det",{any:function(t){return dn(t)},"Array | Matrix":function(t){var e;switch((e=Be(t)?t.size():Array.isArray(t)?(t=n(t)).size():[]).length){case 0:return dn(t);case 1:if(1===e[0])return dn(t.valueOf()[0]);if(0===e[0])return 1;throw new RangeError("Matrix must be square (size: "+In(e)+")");case 2:var u=e[0],l=e[1];if(u===l)return function(t,e,n){if(1===e)return dn(t[0][0]);if(2===e)return r(i(t[0][0],t[1][1]),i(t[1][0],t[0][1]));for(var u=!1,l=new Array(e).fill(0).map(((t,e)=>e)),c=0;c<e;c++){var f=l[c];if(a(t[f][c])){var h=void 0;for(h=c+1;h<e;h++)if(!a(t[l[h]][c])){f=l[h],l[h]=l[c],l[c]=f,u=!u;break}if(h===e)return t[f][c]}for(var d=t[f][c],p=0===c?1:t[l[c-1]][c-1],m=c+1;m<e;m++)for(var g=l[m],y=c+1;y<e;y++)t[g][y]=o(r(i(t[g][y],d),i(t[g][c],t[f][y])),p)}var v=t[l[e-1]][e-1];return u?s(v):v}(t.clone().valueOf(),u);if(0===l)return 1;throw new RangeError("Matrix must be square (size: "+In(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+In(e)+")")}}})})),$a=Qn("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:o,unaryMinus:a,det:s,identity:u,abs:l}=t;return e("inv",{"Array | Matrix":function(t){var e=Be(t)?t.size():Ln(t);switch(e.length){case 1:if(1===e[0])return Be(t)?n([r(1,t.valueOf()[0])]):[r(1,t[0])];throw new RangeError("Matrix must be square (size: "+In(e)+")");case 2:var i=e[0],o=e[1];if(i===o)return Be(t)?n(c(t.valueOf(),i,o),t.storage()):c(t,i,o);throw new RangeError("Matrix must be square (size: "+In(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+In(e)+")")}},any:function(t){return r(1,t)}});function c(t,e,n){var c,f,h,d,p;if(1===e){if(0===(d=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,d)]]}if(2===e){var m=s(t);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(t[1][1],m),r(a(t[0][1]),m)],[r(a(t[1][0]),m),r(t[0][0],m)]]}var g=t.concat();for(c=0;c<e;c++)g[c]=g[c].concat();for(var y=u(e).valueOf(),v=0;v<n;v++){var w=l(g[v][v]),b=v;for(c=v+1;c<e;)l(g[c][v])>w&&(w=l(g[c][v]),b=c),c++;if(0===w)throw Error("Cannot calculate inverse, determinant is zero");(c=b)!==v&&(p=g[v],g[v]=g[c],g[c]=p,p=y[v],y[v]=y[c],y[c]=p);var _=g[v],x=y[v];for(c=0;c<e;c++){var D=g[c],E=y[c];if(c!==v){if(0!==D[v]){for(h=r(a(D[v]),_[v]),f=v;f<n;f++)D[f]=i(D[f],o(h,_[f]));for(f=0;f<n;f++)E[f]=i(E[f],o(h,x[f]))}}else{for(h=_[v],f=v;f<n;f++)D[f]=r(D[f],h);for(f=0;f<n;f++)E[f]=r(E[f],h)}}}return y}})),La="distance",ja=Qn(La,["typed","addScalar","subtract","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],(t=>{var{typed:e,addScalar:n,subtract:r,multiplyScalar:i,divideScalar:o,deepEqual:a,sqrt:s,abs:u}=t;return e(La,{"Array, Array, Array":function(t,e,n){if(2===t.length&&2===e.length&&2===n.length){if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(e,n))throw new TypeError("LinePoint1 should not be same with LinePoint2");var o=r(n[1],e[1]),s=r(e[0],n[0]),u=r(i(n[0],e[1]),i(e[0],n[1]));return m(t[0],t[1],o,s,u)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(t,e,n){if(2===Object.keys(t).length&&2===Object.keys(e).length&&2===Object.keys(n).length){if(!c(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(e))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(p(e),p(n)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in t&&"pointY"in t&&"lineOnePtX"in e&&"lineOnePtY"in e&&"lineTwoPtX"in n&&"lineTwoPtY"in n){var o=r(n.lineTwoPtY,e.lineOnePtY),s=r(e.lineOnePtX,n.lineTwoPtX),u=r(i(n.lineTwoPtX,e.lineOnePtY),i(e.lineOnePtX,n.lineTwoPtY));return m(t.pointX,t.pointY,o,s,u)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(t,e){if(2===t.length&&3===e.length){if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(t[0],t[1],e[0],e[1],e[2])}if(3===t.length&&6===e.length){if(!f(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!d(e))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(t[0],t[1],t[2],e[0],e[1],e[2],e[3],e[4],e[5])}if(t.length===e.length&&t.length>0){if(!h(t))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!h(e))throw new TypeError("All values of an array should be numbers or BigNumbers");return y(t,e)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(t,e){if(2===Object.keys(t).length&&3===Object.keys(e).length){if(!c(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(e))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"xCoeffLine"in e&&"yCoeffLine"in e&&"constant"in e)return m(t.pointX,t.pointY,e.xCoeffLine,e.yCoeffLine,e.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(t).length&&6===Object.keys(e).length){if(!f(t))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!d(e))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"x0"in e&&"y0"in e&&"z0"in e&&"a"in e&&"b"in e&&"c"in e)return g(t.pointX,t.pointY,t.pointZ,e.x0,e.y0,e.z0,e.a,e.b,e.c);throw new TypeError("Key names do not match")}if(2===Object.keys(t).length&&2===Object.keys(e).length){if(!c(t))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(e))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in t&&"pointOneY"in t&&"pointTwoX"in e&&"pointTwoY"in e)return y([t.pointOneX,t.pointOneY],[e.pointTwoX,e.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(t).length&&3===Object.keys(e).length){if(!f(t))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(e))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in t&&"pointOneY"in t&&"pointOneZ"in t&&"pointTwoX"in e&&"pointTwoY"in e&&"pointTwoZ"in e)return y([t.pointOneX,t.pointOneY,t.pointOneZ],[e.pointTwoX,e.pointTwoY,e.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(t){if(!function(t){if(2===t[0].length&&l(t[0][0])&&l(t[0][1])){if(t.some((t=>2!==t.length||!l(t[0])||!l(t[1]))))return!1}else{if(!(3===t[0].length&&l(t[0][0])&&l(t[0][1])&&l(t[0][2])))return!1;if(t.some((t=>3!==t.length||!l(t[0])||!l(t[1])||!l(t[2]))))return!1}return!0}(t))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(t){for(var e=[],n=[],r=[],i=0;i<t.length-1;i++)for(var o=i+1;o<t.length;o++)2===t[0].length?(n=[t[i][0],t[i][1]],r=[t[o][0],t[o][1]]):3===t[0].length&&(n=[t[i][0],t[i][1],t[i][2]],r=[t[o][0],t[o][1],t[o][2]]),e.push(y(n,r));return e}(t)}});function l(t){return"number"==typeof t||Se(t)}function c(t){return t.constructor!==Array&&(t=p(t)),l(t[0])&&l(t[1])}function f(t){return t.constructor!==Array&&(t=p(t)),l(t[0])&&l(t[1])&&l(t[2])}function h(t){return Array.isArray(t)||(t=p(t)),t.every(l)}function d(t){return t.constructor!==Array&&(t=p(t)),l(t[0])&&l(t[1])&&l(t[2])&&l(t[3])&&l(t[4])&&l(t[5])}function p(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n}function m(t,e,r,a,l){var c=u(n(n(i(r,t),i(a,e)),l)),f=s(n(i(r,r),i(a,a)));return o(c,f)}function g(t,e,a,u,l,c,f,h,d){var p=[r(i(r(l,e),d),i(r(c,a),h)),r(i(r(c,a),f),i(r(u,t),d)),r(i(r(u,t),h),i(r(l,e),f))];p=s(n(n(i(p[0],p[0]),i(p[1],p[1])),i(p[2],p[2])));var m=s(n(n(i(f,f),i(h,h)),i(d,d)));return o(p,m)}function y(t,e){for(var o=t.length,a=0,u=0,l=0;l<o;l++)u=r(t[l],e[l]),a=n(i(u,u),a);return s(a)}})),Ua=Qn("sum",["typed","config","add","numeric"],(t=>{var{typed:e,config:n,add:r,numeric:i}=t;return e("sum",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(t,e){try{var n=function(t,e,n){var r=Array.isArray(t)?Ln(t):t.size();if(e<0||e>=r.length)throw new $n(e,r.length);return Be(t)?t.create(ao(t.valueOf(),e,n)):ao(t,e,n)}(t,e,r);return n}catch(t){throw xa(t,"sum")}},"...":function(t){if(function(t){for(var e=0;e<t.length;e++)if(ze(t[e]))return!0;return!1}(t))throw new TypeError("Scalar values expected in function sum");return o(t)}});function o(t){var e;return io(t,(function(t){try{e=void 0===e?t:r(e,t)}catch(e){throw xa(e,"sum",t)}})),void 0===e&&(e=i(0,n.number)),"string"==typeof e&&(e=i(e,n.number)),e}})),qa={exports:{}};!function(t,e,n){function r(t){var e=this,n=function(){var t=4022871197;return function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new r(t),o=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:this.alea=o}(0,qa);var Va=qa.exports,Wa={exports:{}};!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new r(t),o=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:this.xor128=o}(0,Wa);var Za=Wa.exports,Ha={exports:{}};!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:this.xorwow=o}(0,Ha);var Ya=Ha.exports,Xa={exports:{}};!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,o&&(o.x&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:this.xorshift7=o}(0,Xa);var Ka=Xa.exports,Ja={exports:{}};!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=a,t.X=s,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,o&&(o.X&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:this.xor4096=o}(0,Ja);var Ga=Ja.exports,Qa={exports:{}};!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:this.tychei=o}(0,Qa);var ts=Qa.exports,es={exports:{}};!function(t){!function(e,n,r){var i,o=256,a="random",s=r.pow(o,6),u=r.pow(2,52),l=2*u,c=o-1;function f(t,c,f){var y=[],v=m(p((c=1==c?{entropy:!0}:c||{}).entropy?[t,g(n)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(t)),g(t)}catch(t){var r=e.navigator,a=r&&r.plugins;return[+new Date,e,a,e.screen,g(n)]}}():t,3),y),w=new h(y),b=function(){for(var t=w.g(6),e=s,n=0;t<u;)t=(t+n)*o,e*=o,n=w.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|w.g(4)},b.quick=function(){return w.g(4)/4294967296},b.double=b,m(g(w.S),n),(c.pass||f||function(t,e,n,i){return i&&(i.S&&d(i,w),t.state=function(){return d(w,{})}),n?(r[a]=t,e):t})(b,v,"global"in c?c.global:this==r,c.state)}function h(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=c&a+t[i%n]+(e=s[i])],s[a]=e;(r.g=function(t){for(var e,n=0,i=r.i,a=r.j,s=r.S;t--;)e=s[i=c&i+1],n=n*o+s[c&(s[i]=s[a=c&a+e])+(s[a]=e)];return r.i=i,r.j=a,n})(o)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function p(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(p(t[n],e-1))}catch(t){}return r.length?r:"string"==i?t:t+"\0"}function m(t,e){for(var n,r=t+"",i=0;i<r.length;)e[c&i]=c&(n^=19*e[c&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(m(r.random(),n),t.exports){t.exports=f;try{i=require("crypto")}catch(t){}}else r["seed"+a]=f}("undefined"!=typeof self?self:J,[],Math)}(es);var ns=Va,rs=Za,is=Ya,os=Ka,as=Ga,ss=ts,us=es.exports;us.alea=ns,us.xor128=rs,us.xorwow=is,us.xorshift7=os,us.xor4096=as,us.tychei=ss;var ls=G(us),cs=ls(Date.now());function fs(t){var e,n;return e=null===(n=t)?cs:ls(String(n)),function(){return e()}}function hs(t,e){var n=[];if((t=t.slice(0)).length>1)for(var r=0,i=t.shift();r<i;r++)n.push(hs(t,e));else for(var o=0,a=t.shift();o<a;o++)n.push(e());return n}var ds="random",ps=Qn(ds,["typed","config","?on"],(t=>{var{typed:e,config:n,on:r}=t,i=fs(n.randomSeed);return r&&r("config",(function(t,e){t.randomSeed!==e.randomSeed&&(i=fs(t.randomSeed))})),e(ds,{"":()=>a(0,1),number:t=>a(0,t),"number, number":(t,e)=>a(t,e),"Array | Matrix":t=>o(t,0,1),"Array | Matrix, number":(t,e)=>o(t,0,e),"Array | Matrix, number, number":(t,e,n)=>o(t,e,n)});function o(t,e,n){var r=hs(t.valueOf(),(()=>a(e,n)));return Be(t)?t.create(r):r}function a(t,e){return t+i()*(e-t)}})),ms=Yi({config:gn}),gs=Ji({}),ys=to({}),vs=eo({}),ws=ro({Matrix:vs}),bs=ur({BigNumber:ms,Complex:gs,DenseMatrix:ws,Fraction:ys}),_s=No({typed:bs}),xs=Bo({typed:bs}),Ds=Ao({BigNumber:ms,typed:bs}),Es=ra({typed:bs}),As=xo({config:gn,typed:bs}),Ms=uo({typed:bs}),Ss=wo({typed:bs}),Cs=Zo({typed:bs}),ks=Eo({typed:bs}),Fs=ps({config:gn,typed:bs}),Ns=Do({Matrix:vs,equalScalar:As,typed:bs}),Ts=Xo({Complex:gs,config:gn,typed:bs}),Bs=Fo({typed:bs}),zs=Mo({Fraction:ys,typed:bs}),Os=Co({DenseMatrix:ws,Matrix:vs,SparseMatrix:Ns,typed:bs}),Is=Da({bignumber:Ds,fraction:zs,number:ks}),Rs=ya({isInteger:Ms,matrix:Os,typed:bs}),Ps=wa({matrix:Os,config:gn,typed:bs}),$s=_a({matrix:Os,typed:bs}),Ls=oa({isInteger:Ms,matrix:Os,typed:bs}),js=ua({DenseMatrix:ws,SparseMatrix:Ns,matrix:Os,typed:bs}),Us=Aa({numeric:Is,typed:bs}),qs=Fa({DenseMatrix:ws,concat:Ls,divideScalar:Us,equalScalar:As,matrix:Os,typed:bs}),Vs=Ta({DenseMatrix:ws,concat:Ls,equalScalar:As,matrix:Os,typed:bs}),Ws=ca({matrix:Os,typed:bs}),Zs=ha({BigNumber:ms,DenseMatrix:ws,SparseMatrix:Ns,config:gn,matrix:Os,typed:bs}),Hs=da({BigNumber:ms,config:gn,matrix:Os,typed:bs}),Ys=Ia({DenseMatrix:ws,SparseMatrix:Ns,addScalar:xs,concat:Ls,equalScalar:As,matrix:Os,typed:bs}),Xs=Oa({equal:Vs,typed:bs}),Ks=Yo({addScalar:xs,dot:Ra({addScalar:xs,conj:Es,multiplyScalar:Cs,size:Ps,typed:bs}),equalScalar:As,matrix:Os,multiplyScalar:Cs,typed:bs}),Js=Jo({DenseMatrix:ws,addScalar:xs,concat:Ls,equalScalar:As,matrix:Os,typed:bs,unaryMinus:Bs}),Gs=Pa({divideScalar:Us,isZero:Ss,matrix:Os,multiply:Ks,subtract:Js,typed:bs,unaryMinus:Bs}),Qs=ja({abs:_s,addScalar:xs,deepEqual:Xs,divideScalar:Us,multiplyScalar:Cs,sqrt:Ts,subtract:Js,typed:bs}),tu=ta({concat:Ls,equalScalar:As,matrix:Os,multiplyScalar:Cs,typed:bs});const eu={add:Ys,subtract:Js,sum:Ua({add:Ys,config:gn,numeric:Is,typed:bs}),multiply:Ks,reshape:Rs,transpose:$s,flatten:Ws,abs:_s,distance:Qs,dotMultiply:tu,dotDivide:qs,dotPow:Ca({DenseMatrix:ws,concat:Ls,equalScalar:As,matrix:Os,pow:Ma({Complex:gs,config:gn,fraction:zs,identity:Zs,inv:$a({abs:_s,addScalar:xs,det:Gs,divideScalar:Us,identity:Zs,matrix:Os,multiply:Ks,typed:bs,unaryMinus:Bs}),matrix:Os,multiply:Ks,number:ks,typed:bs}),typed:bs}),diag:js,ones:Hs,matrix:Os,random:Fs};function nu(t){return eu.diag(eu.ones(t))}function ru(t,e){const n=t.map((t=>[]));for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r][i]=eu.distance(t[r],e[i]);return n}function iu(t,e){const n=nt.getEigenVectors(t,e),r=nt.computeAdjustedData(t,...n.slice(0,e)).adjustedData,i=[];for(let n=0;n<t.length;n++)i.push(Array.from({length:e},((t,e)=>r[e][n])));return i}function ou(t,e){const n=new De({nNeighbors:Math.min(t.length-1,15)});return n.fit(t),n.getEmbedding()}function au(t,e){return function(t,e,n={}){const r=t=>eu.flatten(eu.transpose(t));n=Object.assign({maxIter:500,maxHalves:20,tolFun:1e-9,init:null},n);const{maxIter:i,maxHalves:o,tolFun:a,init:s}=n;let u=ru(t,t);const l=t.length,c=.5/eu.sum(u);u=eu.add(u,nu(l));const f=eu.dotDivide(1,u);let h=[];s?h=s:t[0].length>t.length?(console.warn("More columns than rows, so initializing using random vectors rather than PCA"),t.forEach((()=>h.push(eu.random([e]))))):h=function(t,e){const n=nt.getEigenVectors(t,e),r=nt.computeAdjustedData(t,...n.slice(0,e)).adjustedData,i=[];for(let n=0;n<t.length;n++)i.push(Array.from({length:e},((t,e)=>r[e][n])));return i}(t,e);const d=eu.ones([t.length,e]);let p=eu.add(ru(h,h),nu(t.length)),m=eu.dotDivide(1,p),g=eu.subtract(u,p),y=eu.sum(eu.dotMultiply(eu.dotPow(g,2),f)),v=null,w=0;for(w=0;w<i;w++){g=eu.subtract(m,f);const n=eu.multiply(g,d),i=eu.subtract(eu.multiply(g,h),eu.dotMultiply(h,n)),s=eu.dotPow(m,3),l=eu.dotPow(h,2),c=eu.multiply(s,l),w=eu.multiply(2,h),b=eu.multiply(s,h),_=eu.dotMultiply(l,eu.multiply(s,d)),x=eu.dotMultiply(w,b),D=eu.add(eu.subtract(eu.subtract(c,n),x),_);let E=eu.subtract(0,eu.dotDivide(r(i.toArray()),eu.abs(r(D.toArray()))));v=h;let A=0,M=null;for(A=0;A<o;A++){const n=eu.transpose(eu.reshape(E,[e,t.length]));if(h=eu.add(v,n),p=eu.add(ru(h,h),nu(t.length)),m=eu.dotDivide(1,p),g=eu.subtract(u,p),M=eu.sum(eu.dotMultiply(eu.dotPow(g,2),f)),M<y)break;E=eu.multiply(E,.5)}if(A==o-1&&console.warn("Warning: maxHalves exceeded. Sammon mapping may not converge..."),Math.abs((y-M)/y)<a)break;y=M}return w==i-1&&console.warn("Warning: maxiter exceeded. Sammon mapping may not have converged..."),y*=c,{vectors:h,E:y}}(t,e).vectors}async function su(t,e,n){const r=function(t,e,n){const r=function(t){return{...X,...t}}(n);!function(t,e){if(e<=0||e>t.length||!Number.isInteger(e))throw new Error("K should be a positive integer smaller than the number of points")}(t,e);let i=function(t,e,n){let r;if(Array.isArray(n.initialization)){if(n.initialization.length!==e)throw new Error("The initial centers should have the same length as K");r=n.initialization}else switch(n.initialization){case"kmeans++":r=function(t,e,n={}){const r=new I(t),i=r.rows,o=new W(n.seed),a=[],s=n.localTrials||2+Math.floor(Math.log(e)),u=o.randInt(i);a.push(r.getRow(u));let l=new I(1,r.rows);for(let t=0;t<r.rows;t++)l.set(0,t,d(r.getRow(t),a[0]));let c=[Y(l.getRow(0))];const f=1/c[0][i-1];let h=I.mul(l,f);for(let t=1;t<e;t++){const e=o.choice(i,{replace:!0,size:s,probabilities:h.getRow(0)}),n=Z(r.selection(e,H(r.columns)),r);let u=1/0,f=1/0,d=l;for(let t=0;t<s;t++){const r=I.min(l,[n.getRow(t)]),i=r.sum();i<f&&(u=e[t],f=i,d=r)}a[t]=r.getRow(u),l=d,c=[Y(l.getRow(0))],h=I.mul(l,1/c[0][i-1])}return a}(t,e,n);break;case"random":r=function(t,e,n){return new W(n).choice(t,{size:e})}(t,e,n.seed);break;case"mostDistant":r=function(t,e,n,r){const i=new W(r);let o=new Array(e);if(o[0]=Math.floor(i.random()*t.length),e>1){let r={dist:-1,index:-1};for(let e=0;e<t.length;++e)n[o[0]][e]>r.dist&&(r.dist=n[o[0]][e],r.index=e);if(o[1]=r.index,e>2)for(let r=2;r<e;++r){let e={dist:-1,index:-1};for(let i=0;i<t.length;++i){let t={dist:Number.MAX_VALUE,index:-1};for(let e=0;e<r;++e)n[e][i]<t.dist&&!o.includes(i)&&(t={dist:n[e][i],index:i});t.dist!==Number.MAX_VALUE&&t.dist>e.dist&&(e={...t})}o[r]=e.index}}return o.map((e=>t[e]))}(t,e,function(t,e){let n=new Array(t.length);for(let r=0;r<t.length;++r)for(let i=r;i<t.length;++i){n[r]||(n[r]=new Array(t.length)),n[i]||(n[i]=new Array(t.length));const o=e(t[r],t[i]);n[r][i]=o,n[i][r]=o}return n}(t,n.distanceFunction),n.seed);break;default:!function(t,e){throw new Error(`Unknown initialization method: "${String(t)}"`)}(n.initialization)}return r}(t,e,r);0===r.maxIterations&&(r.maxIterations=Number.MAX_VALUE);let o,a=new Array(t.length),s=!1,u=0;for(;!s&&u<r.maxIterations;)o=K(i,t,a,e,r,++u),s=o.converged,i=o.centroids;if(!o)throw new Error("unreachable: no kmeans step executed");return o}(t,e,{}),i=n(r.centroids,2);return{centroids:r.centroids,embeddedCentroids:i,labels:r.clusters}}async function uu(t,e,n,r=!0){let i=null;if("som"==n){const n=function(t){let e=1,n=t;for(let r=2;r<=Math.sqrt(t);r++)t%r==0&&Math.abs(r-t/r)<Math.abs(e-n)&&(e=r,n=t/r);return[e,n]}(e);i=await async function(t,e,n){const r=new h([e,n]);r.fit(t);const i=r.predict(t);return{centroids:r.weights,embeddedCentroids:r.locations,labels:i}}(t,n[0],n[1])}else if("kmc+pca"==n)i=await su(t,e,iu);else if("kmc+umap"==n)i=await su(t,e,ou);else{if("kmc+tsne"==n)throw new Error("t-SNE temporarily removed due to security vulnerability in npm package");if("kmc+sammon"!=n)throw new Error("Invalid method "+n);i=await su(t,e,au)}if(r){const t=o(i.embeddedCentroids,(t=>t[0])),e=o(i.embeddedCentroids,(t=>t[1]));if(null!=t[0]){const e=(t[0]+t[1])/2;for(const n of i.embeddedCentroids)n[0]=(n[0]-e)/(t[1]-t[0])}if(null!=e[0]){const t=(e[0]+e[1])/2;for(const n of i.embeddedCentroids)n[1]=(n[1]-t)/(e[1]-e[0])}}return i}Map;function lu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function cu(t){return null!==t&&"object"==typeof t?t.valueOf():t}const fu=function(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},hu=function(t,e){const n=function(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(t,e);return n?Math.sqrt(n):n},du=function(t){return Array.from(function*(t){for(const e of t)yield*e}(t))};function pu(t,e=1,n="fill_null"){const r=[],i="cut_window"==n?0:e,o="cut_window"==n?t.length:t.length-e;for(let n=i;n<o;n++){const i=Math.max(0,n-e),o=Math.min(n+e,t.length-1);let a=0;for(let e=i;e<=o;e++)a+=t[e];r[n]=a/(o-i+1)}if("fill_null"==n)for(let t=0;t<e;t++)r[t]=null,r.push(null);else if("shorten"==n)return Object.values(r);return r}function mu(t,e="row"){let n=t.map((t=>[...t]));if("global"==e){const e=fu(du(t)),r=hu(du(t));if(null!=e&&null!=r)for(let t=0;t<n.length;t++)for(let i=0;i<n[t].length;i++)n[t][i]=(n[t][i]-e)/r}if("column"==e||"both"==e)for(let e=0;e<t[0].length;e++){let r=fu(t,(t=>t[e])),i=hu(t,(t=>t[e]));if(null!=r&&null!=i){0==i&&(i=1);for(let o=0;o<t.length;o++)n[o][e]=(n[o][e]-r)/i}else for(let r=0;r<t.length;r++)n[r][e]=NaN}if("row"==e||"both"==e)for(let t=0;t<n.length;t++){let e=fu(n[t]),r=hu(n[t]);if(null!=e&&null!=r){0==r&&(r=1);for(let i=0;i<n[t].length;i++)n[t][i]=(n[t][i]-e)/r}else for(let e=0;e<n[t].length;e++)n[t][e]=NaN}return n}function gu(t,e,n,r,i=(t=>t)){const o=document.querySelector(t);if(null==o)throw new Error(`No element found for ${t}`);function a(t){if(o.innerHTML="",t)for(let n of t){"string"==typeof n&&(n={value:n,label:i(n)});const t=document.createElement("option");t.value=n.value,t.innerText=n.label,n.value==e[r]&&(t.selected=!0,o.value=n.value),o.appendChild(t)}}e.addListener((()=>{a(e[n]),e[r]=o.value}),n),e.addListener((()=>{for(const t of o.options)t.value==e[r]?t.selected=!0:t.selected=!1}),r),o.addEventListener("change",(()=>{e[r]=o.value})),a(e[n]),""!=o.value&&(e[r]=o.value)}class yu{constructor(){this.properties={},this.listeners=new Map([["global",[]]]),this.onceListeners=new Map}defineProperty(t,e){this.hasOwnProperty(t)||(Object.defineProperty(this,t,{set:function(e){this._setProperty(t,e)},get:function(){return this.properties[t]}}),this.properties[t]=e)}addListener(t,...e){0==e.length&&e.push("global");for(const n of e)this.listeners.has(n)||this.listeners.set(n,[]),this.listeners.get(n).push(t)}addOnceListener(t,...e){0==e.length&&e.push("global");for(const n of e)this.onceListeners.has(n)||this.onceListeners.set(n,[]),this.onceListeners.get(n).push(t)}fireListeners(t){const e=this.properties[t],n=this.listeners.get(t);if(n)for(const r of n)r(t,e);const r=this.onceListeners.get(t);if(r){for(const n of r)n(t,e);this.onceListeners.set(t,[])}for(const n of this.listeners.get("global"))n(t,e)}_setProperty(t,e){e!=this.properties[t]&&(this.properties[t]=e,this.fireListeners(t))}}function vu(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wu(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bu(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=vu,n=(e,n)=>vu(t(e),n),r=(e,n)=>t(e)-n):(e=t===vu||t===wu?t:_u,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function _u(){return 0}function xu(t){return null===t?NaN:+t}const Du=bu(vu).right;bu(xu).center;var Eu=Du;function Au(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function Mu(t){return 0|t.length}function Su(t){return!(t>0)}function Cu(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function ku(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function Fu(t,e){const n=ku(t,e);return n?Math.sqrt(n):n}function Nu(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Tu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class Bu extends Map{constructor(t,e=Pu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Ou(this,t))}has(t){return super.has(Ou(this,t))}set(t,e){return super.set(Iu(this,t),e)}delete(t){return super.delete(Ru(this,t))}}class zu extends Set{constructor(t,e=Pu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Ou(this,t))}add(t){return super.add(Iu(this,t))}delete(t){return super.delete(Ru(this,t))}}function Ou({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Iu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ru({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Pu(t){return null!==t&&"object"==typeof t?t.valueOf():t}function $u(t){return t}function Lu(t,...e){return qu(t,$u,$u,e)}function ju(t,e,...n){return qu(t,$u,e,n)}function Uu(t,e,...n){return qu(t,Array.from,e,n)}function qu(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new Bu,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function Vu(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const o=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),o.sort(((t,n)=>{for(const r of e){const e=Zu(r[t],r[n]);if(e)return e}}))):(n=t.map(n),o.sort(((t,e)=>Zu(n[t],n[e])))),r=t,i=o,Array.from(i,(t=>r[t]))}var r,i;return t.sort(Wu(n))}function Wu(t=vu){if(t===vu)return Zu;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function Zu(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}const Hu=Math.sqrt(50),Yu=Math.sqrt(10),Xu=Math.sqrt(2);function Ku(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Hu?10:o>=Yu?5:o>=Xu?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?Ku(t,e,2*n):[s,u,l]}function Ju(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?Ku(e,t,n):Ku(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)u[t]=(o-t)/-a;else for(let t=0;t<s;++t)u[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)u[t]=(i+t)/-a;else for(let t=0;t<s;++t)u[t]=(i+t)*a;return u}function Gu(t,e,n){return Ku(t=+t,e=+e,n=+n)[2]}function Qu(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Gu(e,t,n):Gu(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function tl(t){return Math.max(1,Math.ceil(Math.log(Au(t))/Math.LN2)+1)}function el(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function nl(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function rl(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function il(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function ol(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?Zu:Wu(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);ol(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}const o=t[e];let a=n,s=r;for(al(t,n,e),i(t[r],o)>0&&al(t,n,r);a<s;){for(al(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?al(t,n,s):(++s,al(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function al(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function sl(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return rl(t);if(e>=1)return el(t);var r,i=(r-1)*e,o=Math.floor(i),a=el(ol(t,o).subarray(0,o+1));return a+(rl(t.subarray(o+1))-a)*(i-o)}}function ul(t,e,n=xu){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function ll(t,e,n){const r=Au(t),i=sl(t,.75)-sl(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function cl(t,e,n){const r=Au(t),i=Fu(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function fl(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function hl(t,e){return sl(t,.5,e)}function dl(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function pl(t,e){const n=new Bu;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function ml(t,e){return[t,e]}function gl(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function yl(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function vl(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function wl(t,...e){t=new zu(t),e=e.map(bl);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function bl(t){return t instanceof zu?t:new zu(t)}function _l(t){return t}var xl=1,Dl=2,El=3,Al=4,Ml=1e-6;function Sl(t){return"translate("+t+",0)"}function Cl(t){return"translate(0,"+t+")"}function kl(t){return e=>+t(e)}function Fl(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Nl(){return!this.__axis}function Tl(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=t===xl||t===Al?-1:1,c=t===Al||t===Dl?"x":"y",f=t===xl||t===El?Sl:Cl;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):_l:i,m=Math.max(o,0)+s,g=e.range(),y=+g[0]+u,v=+g[g.length-1]+u,w=(e.bandwidth?Fl:kl)(e.copy(),u),b=h.selection?h.selection():h,_=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(d,e).order(),D=x.exit(),E=x.enter().append("g").attr("class","tick"),A=x.select("line"),M=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),A=A.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),M=M.merge(E.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===xl?"0em":t===El?"0.71em":"0.32em")),h!==b&&(_=_.transition(h),x=x.transition(h),A=A.transition(h),M=M.transition(h),D=D.transition(h).attr("opacity",Ml).attr("transform",(function(t){return isFinite(t=w(t))?f(t+u):this.getAttribute("transform")})),E.attr("opacity",Ml).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:w(t))+u)}))),D.remove(),_.attr("d",t===Al||t===Dl?a?"M"+l*a+","+y+"H"+u+"V"+v+"H"+l*a:"M"+u+","+y+"V"+v:a?"M"+y+","+l*a+"V"+u+"H"+v+"V"+l*a:"M"+y+","+u+"H"+v),x.attr("opacity",1).attr("transform",(function(t){return f(w(t)+u)})),A.attr(c+"2",l*o),M.attr(c,l*m).text(p),b.filter(Nl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Dl?"start":t===Al?"end":"middle"),b.each((function(){this.__axis=w}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(u=+t,h):u},h}var Bl={value:()=>{}};function zl(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ol(r)}function Ol(t){this._=t}function Il(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Rl(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ol.prototype=zl.prototype={constructor:Ol,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=Rl(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Rl(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Il(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ol(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Pl="http://www.w3.org/1999/xhtml",$l={svg:"http://www.w3.org/2000/svg",xhtml:Pl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ll(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),$l.hasOwnProperty(e)?{space:$l[e],local:t}:t}function jl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Pl&&e.documentElement.namespaceURI===Pl?e.createElement(t):e.createElementNS(n,t)}}function Ul(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ql(t){var e=Ll(t);return(e.local?Ul:jl)(e)}function Vl(){}function Wl(t){return null==t?Vl:function(){return this.querySelector(t)}}function Zl(){return[]}function Hl(t){return null==t?Zl:function(){return this.querySelectorAll(t)}}function Yl(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Xl(t){return function(){return this.matches(t)}}function Kl(t){return function(e){return e.matches(t)}}var Jl=Array.prototype.find;function Gl(){return this.firstElementChild}var Ql=Array.prototype.filter;function tc(){return Array.from(this.children)}function ec(t){return new Array(t.length)}function nc(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function rc(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new nc(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function ic(t,e,n,r,i,o,a){var s,u,l,c=new Map,f=e.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<h;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new nc(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&c.get(d[s])===u&&(i[s]=u)}function oc(t){return t.__data__}function ac(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function sc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function uc(t){return function(){this.removeAttribute(t)}}function lc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cc(t,e){return function(){this.setAttribute(t,e)}}function fc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function hc(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function dc(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mc(t){return function(){this.style.removeProperty(t)}}function gc(t,e,n){return function(){this.style.setProperty(t,e,n)}}function yc(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vc(t,e){return t.style.getPropertyValue(e)||pc(t).getComputedStyle(t,null).getPropertyValue(e)}function wc(t){return function(){delete this[t]}}function bc(t,e){return function(){this[t]=e}}function _c(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function xc(t){return t.trim().split(/^|\s+/)}function Dc(t){return t.classList||new Ec(t)}function Ec(t){this._node=t,this._names=xc(t.getAttribute("class")||"")}function Ac(t,e){for(var n=Dc(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Mc(t,e){for(var n=Dc(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Sc(t){return function(){Ac(this,t)}}function Cc(t){return function(){Mc(this,t)}}function kc(t,e){return function(){(e.apply(this,arguments)?Ac:Mc)(this,t)}}function Fc(){this.textContent=""}function Nc(t){return function(){this.textContent=t}}function Tc(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Bc(){this.innerHTML=""}function zc(t){return function(){this.innerHTML=t}}function Oc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ic(){this.nextSibling&&this.parentNode.appendChild(this)}function Rc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pc(){return null}function $c(){var t=this.parentNode;t&&t.removeChild(this)}function Lc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Uc(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function qc(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Vc(t,e,n){var r=pc(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Wc(t,e){return function(){return Vc(this,t,e)}}function Zc(t,e){return function(){return Vc(this,t,e.apply(this,arguments))}}nc.prototype={constructor:nc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ec.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Hc=[null];function Yc(t,e){this._groups=t,this._parents=e}function Xc(){return new Yc([[document.documentElement]],Hc)}function Kc(t){return"string"==typeof t?new Yc([[document.querySelector(t)]],[document.documentElement]):new Yc([[t]],Hc)}function Jc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gc(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qc(){}Yc.prototype=Xc.prototype={constructor:Yc,select:function(t){"function"!=typeof t&&(t=Wl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Yc(r,this._parents)},selectAll:function(t){t="function"==typeof t?Yl(t):Hl(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Yc(r,i)},selectChild:function(t){return this.select(null==t?Gl:function(t){return function(){return Jl.call(this.children,t)}}("function"==typeof t?t:Kl(t)))},selectChildren:function(t){return this.selectAll(null==t?tc:function(t){return function(){return Ql.call(this.children,t)}}("function"==typeof t?t:Kl(t)))},filter:function(t){"function"!=typeof t&&(t=Xl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Yc(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,oc);var n=e?ic:rc,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],h=f.length,d=ac(t.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),g=a[l]=new Array(p);n(c,f,m,g,u[l]=new Array(h),d,e);for(var y,v,w=0,b=0;w<p;++w)if(y=m[w]){for(w>=b&&(b=w+1);!(v=g[b])&&++b<p;);y._next=v||null}}return(a=new Yc(a,r))._enter=s,a._exit=u,a},enter:function(){return new Yc(this._enter||this._groups.map(ec),this._parents)},exit:function(){return new Yc(this._exit||this._groups.map(ec),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],f=r[u],h=c.length,d=s[u]=new Array(h),p=0;p<h;++p)(l=c[p]||f[p])&&(d[p]=l);for(;u<i;++u)s[u]=n[u];return new Yc(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=sc);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new Yc(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Ll(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?lc:uc:"function"==typeof e?n.local?dc:hc:n.local?fc:cc)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?mc:"function"==typeof e?yc:gc)(t,e,null==n?"":n)):vc(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?wc:"function"==typeof e?_c:bc)(t,e)):this.node()[t]},classed:function(t,e){var n=xc(t+"");if(arguments.length<2){for(var r=Dc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?kc:e?Sc:Cc)(n,e))},text:function(t){return arguments.length?this.each(null==t?Fc:("function"==typeof t?Tc:Nc)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Bc:("function"==typeof t?Oc:zc)(t)):this.node().innerHTML},raise:function(){return this.each(Ic)},lower:function(){return this.each(Rc)},append:function(t){var e="function"==typeof t?t:ql(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ql(t),r=null==e?Pc:"function"==typeof e?e:Wl(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each($c)},clone:function(t){return this.select(t?jc:Lc)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?qc:Uc,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Zc:Wc)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var tf=.7,ef=1/tf,nf="\\s*([+-]?\\d+)\\s*",rf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",af=/^#([0-9a-f]{3,8})$/,sf=new RegExp(`^rgb\\(${nf},${nf},${nf}\\)$`),uf=new RegExp(`^rgb\\(${of},${of},${of}\\)$`),lf=new RegExp(`^rgba\\(${nf},${nf},${nf},${rf}\\)$`),cf=new RegExp(`^rgba\\(${of},${of},${of},${rf}\\)$`),ff=new RegExp(`^hsl\\(${rf},${of},${of}\\)$`),hf=new RegExp(`^hsla\\(${rf},${of},${of},${rf}\\)$`),df={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pf(){return this.rgb().formatHex()}function mf(){return this.rgb().formatRgb()}function gf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=af.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?yf(e):3===n?new _f(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?vf(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?vf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=sf.exec(t))?new _f(e[1],e[2],e[3],1):(e=uf.exec(t))?new _f(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=lf.exec(t))?vf(e[1],e[2],e[3],e[4]):(e=cf.exec(t))?vf(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ff.exec(t))?Sf(e[1],e[2]/100,e[3]/100,1):(e=hf.exec(t))?Sf(e[1],e[2]/100,e[3]/100,e[4]):df.hasOwnProperty(t)?yf(df[t]):"transparent"===t?new _f(NaN,NaN,NaN,0):null}function yf(t){return new _f(t>>16&255,t>>8&255,255&t,1)}function vf(t,e,n,r){return r<=0&&(t=e=n=NaN),new _f(t,e,n,r)}function wf(t){return t instanceof Qc||(t=gf(t)),t?new _f((t=t.rgb()).r,t.g,t.b,t.opacity):new _f}function bf(t,e,n,r){return 1===arguments.length?wf(t):new _f(t,e,n,null==r?1:r)}function _f(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function xf(){return`#${Mf(this.r)}${Mf(this.g)}${Mf(this.b)}`}function Df(){const t=Ef(this.opacity);return`${1===t?"rgb(":"rgba("}${Af(this.r)}, ${Af(this.g)}, ${Af(this.b)}${1===t?")":`, ${t})`}`}function Ef(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Af(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mf(t){return((t=Af(t))<16?"0":"")+t.toString(16)}function Sf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ff(t,e,n,r)}function Cf(t){if(t instanceof Ff)return new Ff(t.h,t.s,t.l,t.opacity);if(t instanceof Qc||(t=gf(t)),!t)return new Ff;if(t instanceof Ff)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ff(a,s,u,t.opacity)}function kf(t,e,n,r){return 1===arguments.length?Cf(t):new Ff(t,e,n,null==r?1:r)}function Ff(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Nf(t){return(t=(t||0)%360)<0?t+360:t}function Tf(t){return Math.max(0,Math.min(1,t||0))}function Bf(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Jc(Qc,gf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pf,formatHex:pf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Cf(this).formatHsl()},formatRgb:mf,toString:mf}),Jc(_f,bf,Gc(Qc,{brighter(t){return t=null==t?ef:Math.pow(ef,t),new _f(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?tf:Math.pow(tf,t),new _f(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _f(Af(this.r),Af(this.g),Af(this.b),Ef(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xf,formatHex:xf,formatHex8:function(){return`#${Mf(this.r)}${Mf(this.g)}${Mf(this.b)}${Mf(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Df,toString:Df})),Jc(Ff,kf,Gc(Qc,{brighter(t){return t=null==t?ef:Math.pow(ef,t),new Ff(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?tf:Math.pow(tf,t),new Ff(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _f(Bf(t>=240?t-240:t+120,i,r),Bf(t,i,r),Bf(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ff(Nf(this.h),Tf(this.s),Tf(this.l),Ef(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ef(this.opacity);return`${1===t?"hsl(":"hsla("}${Nf(this.h)}, ${100*Tf(this.s)}%, ${100*Tf(this.l)}%${1===t?")":`, ${t})`}`}}));const zf=Math.PI/180,Of=180/Math.PI,If=.96422,Rf=1,Pf=.82521,$f=4/29,Lf=6/29,jf=3*Lf*Lf,Uf=Lf*Lf*Lf;function qf(t){if(t instanceof Wf)return new Wf(t.l,t.a,t.b,t.opacity);if(t instanceof Jf)return Gf(t);t instanceof _f||(t=wf(t));var e,n,r=Xf(t.r),i=Xf(t.g),o=Xf(t.b),a=Zf((.2225045*r+.7168786*i+.0606169*o)/Rf);return r===i&&i===o?e=n=a:(e=Zf((.4360747*r+.3850649*i+.1430804*o)/If),n=Zf((.0139322*r+.0971045*i+.7141733*o)/Pf)),new Wf(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Vf(t,e,n,r){return 1===arguments.length?qf(t):new Wf(t,e,n,null==r?1:r)}function Wf(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Zf(t){return t>Uf?Math.pow(t,1/3):t/jf+$f}function Hf(t){return t>Lf?t*t*t:jf*(t-$f)}function Yf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Xf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Kf(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Jf)return new Jf(t.h,t.c,t.l,t.opacity);if(t instanceof Wf||(t=qf(t)),0===t.a&&0===t.b)return new Jf(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Of;return new Jf(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Jf(t,e,n,null==r?1:r)}function Jf(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Gf(t){if(isNaN(t.h))return new Wf(t.l,0,0,t.opacity);var e=t.h*zf;return new Wf(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Jc(Wf,Vf,Gc(Qc,{brighter(t){return new Wf(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Wf(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new _f(Yf(3.1338561*(e=If*Hf(e))-1.6168667*(t=Rf*Hf(t))-.4906146*(n=Pf*Hf(n))),Yf(-.9787684*e+1.9161415*t+.033454*n),Yf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Jc(Jf,Kf,Gc(Qc,{brighter(t){return new Jf(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Jf(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Gf(this).rgb()}}));var Qf=-.14861,th=1.78277,eh=-.29227,nh=-.90649,rh=1.97294,ih=rh*nh,oh=rh*th,ah=th*eh-nh*Qf;function sh(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof uh)return new uh(t.h,t.s,t.l,t.opacity);t instanceof _f||(t=wf(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ah*r+ih*e-oh*n)/(ah+ih-oh),o=r-i,a=(rh*(n-i)-eh*o)/nh,s=Math.sqrt(a*a+o*o)/(rh*i*(1-i)),u=s?Math.atan2(a,o)*Of-120:NaN;return new uh(u<0?u+360:u,s,i,t.opacity)}(t):new uh(t,e,n,null==r?1:r)}function uh(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Jc(uh,sh,Gc(Qc,{brighter(t){return t=null==t?ef:Math.pow(ef,t),new uh(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?tf:Math.pow(tf,t),new uh(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*zf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new _f(255*(e+n*(Qf*r+th*i)),255*(e+n*(eh*r+nh*i)),255*(e+n*(rh*r)),this.opacity)}}));var lh=t=>()=>t;function ch(t,e){return function(n){return t+n*e}}function fh(t,e){var n=e-t;return n?ch(t,n>180||n<-180?n-360*Math.round(n/360):n):lh(isNaN(t)?e:t)}function hh(t){return 1==(t=+t)?dh:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):lh(isNaN(e)?n:e)}}function dh(t,e){var n=e-t;return n?ch(t,n):lh(isNaN(t)?e:t)}var ph=function t(e){var n=hh(e);function r(t,e){var r=n((t=bf(t)).r,(e=bf(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=dh(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);var mh,gh=(mh=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return function(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}((n-r/e)*e,a,i,o,s)}},function(t){var e,n,r=t.length,i=new Array(r),o=new Array(r),a=new Array(r);for(e=0;e<r;++e)n=bf(t[e]),i[e]=n.r||0,o[e]=n.g||0,a[e]=n.b||0;return i=mh(i),o=mh(o),a=mh(a),n.opacity=1,function(t){return n.r=i(t),n.g=o(t),n.b=a(t),n+""}});function yh(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function vh(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Ah(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function wh(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bh(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _h(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ah(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var xh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dh=new RegExp(xh.source,"g");function Eh(t,e){var n,r,i,o=xh.lastIndex=Dh.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=xh.exec(t))&&(r=Dh.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:bh(n,r)})),o=Dh.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Ah(t,e){var n,r=typeof e;return null==e||"boolean"===r?lh(e):("number"===r?bh:"string"===r?(n=gf(e))?(e=n,ph):Eh:e instanceof gf?ph:e instanceof Date?wh:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?yh:Array.isArray(e)?vh:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?_h:bh)(t,e)}function Mh(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Sh,Ch=180/Math.PI,kh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fh(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ch,skewX:Math.atan(u)*Ch,scaleX:a,scaleY:s}}function Nh(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:bh(t,i)},{i:u-2,x:bh(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:bh(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:bh(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:bh(t,n)},{i:s-2,x:bh(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Th=Nh((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?kh:Fh(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Bh=Nh((function(t){return null==t?kh:(Sh||(Sh=document.createElementNS("http://www.w3.org/2000/svg","g")),Sh.setAttribute("transform",t),(t=Sh.transform.baseVal.consolidate())?Fh((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):kh)}),", ",")",")");var zh=function(t){return function(e,n){var r=t((e=kf(e)).h,(n=kf(n)).h),i=dh(e.s,n.s),o=dh(e.l,n.l),a=dh(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}(fh);var Oh=function(t){return function(e,n){var r=t((e=Kf(e)).h,(n=Kf(n)).h),i=dh(e.c,n.c),o=dh(e.l,n.l),a=dh(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}(fh);function Ih(t){return function e(n){function r(e,r){var i=t((e=sh(e)).h,(r=sh(r)).h),o=dh(e.s,r.s),a=dh(e.l,r.l),s=dh(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}Ih(fh);var Rh=Ih(dh);function Ph(t,e){void 0===e&&(e=t,t=Ah);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function $h(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Lh,jh,Uh=0,qh=0,Vh=0,Wh=1e3,Zh=0,Hh=0,Yh=0,Xh="object"==typeof performance&&performance.now?performance:Date,Kh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jh(){return Hh||(Kh(Gh),Hh=Xh.now()+Yh)}function Gh(){Hh=0}function Qh(){this._call=this._time=this._next=null}function td(t,e,n){var r=new Qh;return r.restart(t,e,n),r}function ed(){Hh=(Zh=Xh.now())+Yh,Uh=qh=0;try{!function(){Jh(),++Uh;for(var t,e=Lh;e;)(t=Hh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Uh}()}finally{Uh=0,function(){var t,e,n=Lh,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Lh=e);jh=t,rd(r)}(),Hh=0}}function nd(){var t=Xh.now(),e=t-Zh;e>Wh&&(Yh-=e,Zh=t)}function rd(t){Uh||(qh&&(qh=clearTimeout(qh)),t-Hh>24?(t<1/0&&(qh=setTimeout(ed,t-Xh.now()-Yh)),Vh&&(Vh=clearInterval(Vh))):(Vh||(Zh=Xh.now(),Vh=setInterval(nd,Wh)),Uh=1,Kh(ed)))}function id(t,e,n){var r=new Qh;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Qh.prototype=td.prototype={constructor:Qh,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Jh():+n)+(null==e?0:+e),this._next||jh===this||(jh?jh._next=this:Lh=this,jh=this),this._call=t,this._time=n,rd()},stop:function(){this._call&&(this._call=null,this._time=1/0,rd())}};var od=zl("start","end","cancel","interrupt"),ad=[],sd=0,ud=1,ld=2,cd=3,fd=4,hd=5,dd=6;function pd(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=ud,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var l,c,f,h;if(n.state!==ud)return u();for(l in i)if((h=i[l]).name===n.name){if(h.state===cd)return id(a);h.state===fd?(h.state=dd,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=dd,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(id((function(){n.state===cd&&(n.state=fd,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=ld,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ld){for(n.state=cd,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=hd,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===hd&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=dd,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=td(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:od,tween:ad,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:sd})}function md(t,e){var n=yd(t,e);if(n.state>sd)throw new Error("too late; already scheduled");return n}function gd(t,e){var n=yd(t,e);if(n.state>cd)throw new Error("too late; already running");return n}function yd(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vd(t,e){var n,r;return function(){var i=gd(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function wd(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=gd(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function bd(t,e,n){var r=t._id;return t.each((function(){var t=gd(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return yd(t,r).value[e]}}function _d(t,e){var n;return("number"==typeof e?bh:e instanceof gf?ph:(n=gf(e))?(e=n,ph):Eh)(t,e)}function xd(t){return function(){this.removeAttribute(t)}}function Dd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ed(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Ad(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Md(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function Sd(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Cd(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function kd(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Fd(t,e){return function(){md(this,t).delay=+e.apply(this,arguments)}}function Nd(t,e){return e=+e,function(){md(this,t).delay=e}}function Td(t,e){return function(){gd(this,t).duration=+e.apply(this,arguments)}}function Bd(t,e){return e=+e,function(){gd(this,t).duration=e}}var zd=Xc.prototype.constructor;function Od(t){return function(){this.style.removeProperty(t)}}var Id=0;function Rd(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Pd(){return++Id}var $d=Xc.prototype;Rd.prototype={constructor:Rd,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Wl(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,pd(f[h],e,n,h,f,yd(s,n)));return new Rd(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Hl(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=yd(u,n),m=0,g=d.length;m<g;++m)(h=d[m])&&pd(h,e,n,m,d,p);o.push(d),a.push(u)}return new Rd(o,a,e,n)},selectChild:$d.selectChild,selectChildren:$d.selectChildren,filter:function(t){"function"!=typeof t&&(t=Xl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Rd(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new Rd(a,this._parents,this._name,this._id)},selection:function(){return new zd(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Pd(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=yd(a,e);pd(a,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rd(r,this._parents,t,n)},call:$d.call,nodes:$d.nodes,node:$d.node,size:$d.size,empty:$d.empty,each:$d.each,on:function(t,e){var n=this._id;return arguments.length<2?yd(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?md:gd;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Ll(t),r="transform"===n?Bh:_d;return this.attrTween(t,"function"==typeof e?(n.local?Sd:Md)(n,r,bd(this,"attr."+t,e)):null==e?(n.local?Dd:xd)(n):(n.local?Ad:Ed)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Ll(t);return this.tween(n,(r.local?Cd:kd)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Th:_d;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=vc(this,t),a=(this.style.removeProperty(t),vc(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Od(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=vc(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=vc(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,bd(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=gd(this,t),l=u.on,c=null==u.value[a]?o||(o=Od(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=vc(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(bd(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=yd(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?vd:wd)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fd:Nd)(e,t)):yd(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Td:Bd)(e,t)):yd(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){gd(this,t).ease=e}}(e,t)):yd(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;gd(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=gd(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:$d[Symbol.iterator]};var Ld={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function jd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Xc.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ld&&n.state<hd,n.state=dd,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},Xc.prototype.transition=function(t){var e,n;t instanceof Rd?(e=t._id,t=t._name):(e=Pd(),(n=Ld).time=Jh(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&pd(a,t,e,l,s,n||jd(a,e));return new Rd(r,this._parents,t,e)};const Ud=Math.PI,qd=2*Ud,Vd=1e-6,Wd=qd-Vd;function Zd(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}let Hd=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Zd:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zd;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,f=l*l+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>Vd)if(Math.abs(c*s-u*l)>Vd&&i){let h=n-o,d=r-a,p=s*s+u*u,m=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((Ud-Math.acos((p+f-m)/(2*g*y)))/2),w=v/y,b=v/g;Math.abs(w-1)>Vd&&this._append`L${t+w*l},${e+w*c}`,this._append`A${i},${i},0,0,${+(c*h>l*d)},${this._x1=t+b*s},${this._y1=e+b*u}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,f=o?r-i:i-r;null===this._x1?this._append`M${u},${l}`:(Math.abs(this._x1-u)>Vd||Math.abs(this._y1-l)>Vd)&&this._append`L${u},${l}`,n&&(f<0&&(f=f%qd+qd),f>Wd?this._append`A${n},${n},0,1,${c},${t-a},${e-s}A${n},${n},0,1,${c},${this._x1=u},${this._y1=l}`:f>Vd&&this._append`A${n},${n},0,${+(f>=Ud)},${c},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function Yd(t=3){return new Hd(+t)}const Xd=134217729,Kd=33306690738754706e-32;function Jd(t,e,n,r,i){let o,a,s,u,l=e[0],c=r[0],f=0,h=0;c>l==c>-l?(o=l,l=e[++f]):(o=c,c=r[++h]);let d=0;if(f<t&&h<n)for(c>l==c>-l?(a=l+o,s=o-(a-l),l=e[++f]):(a=c+o,s=o-(a-c),c=r[++h]),o=a,0!==s&&(i[d++]=s);f<t&&h<n;)c>l==c>-l?(a=o+l,u=a-o,s=o-(a-u)+(l-u),l=e[++f]):(a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++h]),o=a,0!==s&&(i[d++]=s);for(;f<t;)a=o+l,u=a-o,s=o-(a-u)+(l-u),l=e[++f],o=a,0!==s&&(i[d++]=s);for(;h<n;)a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++h],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function Gd(t){return new Float64Array(t)}const Qd=22204460492503146e-32,tp=11093356479670487e-47,ep=Gd(4),np=Gd(8),rp=Gd(12),ip=Gd(16),op=Gd(4);function ap(t,e,n,r,i,o){const a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s,l=Math.abs(a+s);return Math.abs(u)>=33306690738754716e-32*l?u:-function(t,e,n,r,i,o,a){let s,u,l,c,f,h,d,p,m,g,y,v,w,b,_,x,D,E;const A=t-i,M=n-i,S=e-o,C=r-o;b=A*C,h=Xd*A,d=h-(h-A),p=A-d,h=Xd*C,m=h-(h-C),g=C-m,_=p*g-(b-d*m-p*m-d*g),x=S*M,h=Xd*S,d=h-(h-S),p=S-d,h=Xd*M,m=h-(h-M),g=M-m,D=p*g-(x-d*m-p*m-d*g),y=_-D,f=_-y,ep[0]=_-(y+f)+(f-D),v=b+y,f=v-b,w=b-(v-f)+(y-f),y=w-x,f=w-y,ep[1]=w-(y+f)+(f-x),E=v+y,f=E-v,ep[2]=v-(E-f)+(y-f),ep[3]=E;let k=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,ep),F=Qd*a;if(k>=F||-k>=F)return k;if(f=t-A,s=t-(A+f)+(f-i),f=n-M,l=n-(M+f)+(f-i),f=e-S,u=e-(S+f)+(f-o),f=r-C,c=r-(C+f)+(f-o),0===s&&0===u&&0===l&&0===c)return k;if(F=tp*a+Kd*Math.abs(k),k+=A*c+C*s-(S*l+M*u),k>=F||-k>=F)return k;b=s*C,h=Xd*s,d=h-(h-s),p=s-d,h=Xd*C,m=h-(h-C),g=C-m,_=p*g-(b-d*m-p*m-d*g),x=u*M,h=Xd*u,d=h-(h-u),p=u-d,h=Xd*M,m=h-(h-M),g=M-m,D=p*g-(x-d*m-p*m-d*g),y=_-D,f=_-y,op[0]=_-(y+f)+(f-D),v=b+y,f=v-b,w=b-(v-f)+(y-f),y=w-x,f=w-y,op[1]=w-(y+f)+(f-x),E=v+y,f=E-v,op[2]=v-(E-f)+(y-f),op[3]=E;const N=Jd(4,ep,4,op,np);b=A*c,h=Xd*A,d=h-(h-A),p=A-d,h=Xd*c,m=h-(h-c),g=c-m,_=p*g-(b-d*m-p*m-d*g),x=S*l,h=Xd*S,d=h-(h-S),p=S-d,h=Xd*l,m=h-(h-l),g=l-m,D=p*g-(x-d*m-p*m-d*g),y=_-D,f=_-y,op[0]=_-(y+f)+(f-D),v=b+y,f=v-b,w=b-(v-f)+(y-f),y=w-x,f=w-y,op[1]=w-(y+f)+(f-x),E=v+y,f=E-v,op[2]=v-(E-f)+(y-f),op[3]=E;const T=Jd(N,np,4,op,rp);b=s*c,h=Xd*s,d=h-(h-s),p=s-d,h=Xd*c,m=h-(h-c),g=c-m,_=p*g-(b-d*m-p*m-d*g),x=u*l,h=Xd*u,d=h-(h-u),p=u-d,h=Xd*l,m=h-(h-l),g=l-m,D=p*g-(x-d*m-p*m-d*g),y=_-D,f=_-y,op[0]=_-(y+f)+(f-D),v=b+y,f=v-b,w=b-(v-f)+(y-f),y=w-x,f=w-y,op[1]=w-(y+f)+(f-x),E=v+y,f=E-v,op[2]=v-(E-f)+(y-f),op[3]=E;const B=Jd(T,rp,4,op,ip);return ip[B-1]}(t,e,n,r,i,o,l)}const sp=Math.pow(2,-52),up=new Uint32Array(512);class lp{static from(t,e=mp,n=gp){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new lp(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[e]=e}const c=(a+u)/2,f=(s+l)/2;let h,d,p,m=1/0;for(let e=0;e<o;e++){const n=cp(c,f,t[2*e],t[2*e+1]);n<m&&(h=e,m=n)}const g=t[2*h],y=t[2*h+1];m=1/0;for(let e=0;e<o;e++){if(e===h)continue;const n=cp(g,y,t[2*e],t[2*e+1]);n<m&&n>0&&(d=e,m=n)}let v=t[2*d],w=t[2*d+1],b=1/0;for(let e=0;e<o;e++){if(e===h||e===d)continue;const n=hp(g,y,v,w,t[2*e],t[2*e+1]);n<b&&(p=e,b=n)}let _=t[2*p],x=t[2*p+1];if(b===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];dp(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ap(g,y,v,w,_,x)<0){const t=d,e=v,n=w;d=p,v=_,w=x,p=t,_=e,x=n}const D=function(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,f=u*u+l*l,h=.5/(a*l-s*u),d=t+(l*c-s*f)*h,p=e+(a*f-u*c)*h;return{x:d,y:p}}(g,y,v,w,_,x);this._cx=D.x,this._cy=D.y;for(let e=0;e<o;e++)this._dists[e]=cp(t[2*e],t[2*e+1],D.x,D.y);dp(this._ids,this._dists,0,o-1),this._hullStart=h;let E=3;n[h]=e[p]=d,n[d]=e[h]=p,n[p]=e[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,y)]=h,i[this._hashKey(v,w)]=d,i[this._hashKey(_,x)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=t[2*u],c=t[2*u+1];if(s>0&&Math.abs(l-o)<=sp&&Math.abs(c-a)<=sp)continue;if(o=l,a=c,u===h||u===d||u===p)continue;let f=0;for(let t=0,e=this._hashKey(l,c);t<this._hashSize&&(f=i[(e+t)%this._hashSize],-1===f||f===n[f]);t++);f=e[f];let m,g=f;for(;m=n[g],ap(l,c,t[2*g],t[2*g+1],t[2*m],t[2*m+1])>=0;)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,E++;let v=n[g];for(;m=n[v],ap(l,c,t[2*v],t[2*v+1],t[2*m],t[2*m+1])<0;)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,E--,v=m;if(g===f)for(;m=e[g],ap(l,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,E--,g=m;this._hullStart=e[u]=g,n[g]=e[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(t[2*g],t[2*g+1])]=g}this.hull=new Uint32Array(E);for(let t=0,e=this._hullStart;t<E;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=up[--i];continue}const u=a-a%3,l=s+(t+1)%3,c=u+(a+2)%3,f=e[o],h=e[t],d=e[l],p=e[c];if(fp(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[a]=f;const r=n[c];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<up.length&&(up[i++]=s)}else{if(0===i)break;t=up[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function cp(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function fp(t,e,n,r,i,o,a,s){const u=t-a,l=e-s,c=n-a,f=r-s,h=i-a,d=o-s,p=c*c+f*f,m=h*h+d*d;return u*(f*m-p*d)-l*(c*m-p*h)+(u*u+l*l)*(c*d-f*h)<0}function hp(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,f=u*u+l*l,h=.5/(a*l-s*u),d=(l*c-s*f)*h,p=(a*f-u*c)*h;return d*d+p*p}function dp(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=n+1,o=r;pp(t,n+r>>1,i),e[t[n]]>e[t[r]]&&pp(t,n,r),e[t[i]]>e[t[r]]&&pp(t,i,r),e[t[n]]>e[t[i]]&&pp(t,n,i);const a=t[i],s=e[a];for(;;){do{i++}while(e[t[i]]<s);do{o--}while(e[t[o]]>s);if(o<i)break;pp(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(dp(t,e,i,r),dp(t,e,n,o-1)):(dp(t,e,n,o-1),dp(t,e,i,r))}}function pp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function mp(t){return t[0]}function gp(t){return t[1]}const yp=1e-6;class vp{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>yp||Math.abs(this._y1-i)>yp)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class wp{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class bp{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this;let i,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,u=0,l=0,c=n.length;u<c;u+=3,l+=2){const c=2*n[u],f=2*n[u+1],h=2*n[u+2],d=t[c],p=t[c+1],m=t[f],g=t[f+1],y=t[h],v=t[h+1],w=m-d,b=g-p,_=y-d,x=v-p,D=2*(w*x-b*_);if(Math.abs(D)<1e-9){if(void 0===i){i=o=0;for(const n of e)i+=t[2*n],o+=t[2*n+1];i/=e.length,o/=e.length}const n=1e9*Math.sign((i-d)*x-(o-p)*_);r=(d+y)/2-n*x,s=(p+v)/2+n*_}else{const t=1/D,e=w*w+b*b,n=_*_+x*x;r=d+(x*e-b*n)*t,s=p+(w*n-_*e)*t}a[l]=r,a[l+1]=s}let s,u,l,c=e[e.length-1],f=4*c,h=t[2*c],d=t[2*c+1];r.fill(0);for(let n=0;n<e.length;++n)c=e[n],s=f,u=h,l=d,f=4*c,h=t[2*c],d=t[2*c+1],r[s+2]=r[f]=l-d,r[s+3]=r[f+1]=h-u}render(t){const e=null==t?t=new vp:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,t)}let s,u=i[i.length-1];for(let e=0;e<i.length;++e){s=u,u=i[e];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,h=this._project(l,c,a[f+2],a[f+3]);h&&this._renderSegment(l,c,h[0],h[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new vp:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new vp:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new wp;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]===t[o]&&e[r+1]===t[o+1]&&e[(r+2)%i]===t[(o+a-2)%a]&&e[(r+3)%i]===t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){const n=e.length;let r,i,o,a,s=null,u=e[n-2],l=e[n-1],c=this._regioncode(u,l),f=0;for(let h=0;h<n;h+=2)if(r=u,i=l,u=e[h],l=e[h+1],o=c,c=this._regioncode(u,l),0===o&&0===c)a=f,f=0,s?s.push(u,l):s=[u,l];else{let e,n,h,d,p;if(0===o){if(null===(e=this._clipSegment(r,i,u,l,o,c)))continue;[n,h,d,p]=e}else{if(null===(e=this._clipSegment(u,l,r,i,c,o)))continue;[d,p,n,h]=e,a=f,f=this._edgecode(n,h),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(n,h):s=[n,h]}a=f,f=this._edgecode(d,p),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(d,p):s=[d,p]}if(s)a=f,f=this._edgecode(s[0],s[1]),a&&f&&this._edge(t,a,f,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,r,i,o){const a=i<o;for(a&&([t,e,n,r,i,o]=[n,r,t,e,o,i]);;){if(0===i&&0===o)return a?[n,r,t,e]:[t,e,n,r];if(i&o)return null;let s,u,l=i||o;8&l?(s=t+(n-t)*(this.ymax-e)/(r-e),u=this.ymax):4&l?(s=t+(n-t)*(this.ymin-e)/(r-e),u=this.ymin):2&l?(u=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(u=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=u,i=this._regioncode(t,e)):(n=s,r=u,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}}const _p=2*Math.PI,xp=Math.pow;function Dp(t){return t[0]}function Ep(t){return t[1]}function Ap(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Mp{static from(t,e=Dp,n=Ep,r){return new Mp("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new lp(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=Ap(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new lp(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new bp(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==l&&(yield e))}}while(u!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let l=t,c=xp(e-u[2*t],2)+xp(n-u[2*t+1],2);const f=r[t];let h=f;do{let r=s[h];const f=xp(e-u[2*r],2)+xp(n-u[2*r+1],2);if(f<c&&(c=f,l=r),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&xp(e-u[2*h],2)+xp(n-u[2*h+1],2)<c)return h;break}}while(h!==f);return l}render(t){const e=null==t?t=new vp:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const a=2*i[e],s=2*i[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new vp:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,_p)}return n&&n.value()}renderHull(t){const e=null==t?t=new vp:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new wp;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new vp:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new wp;return this.renderTriangle(t,e),e.value()}}var Sp={},Cp={};function kp(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Fp(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Np(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Tp(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Np(-e,6):e>9999?"+"+Np(e,6):Np(e,4))+"-"+Np(t.getUTCMonth()+1,2)+"-"+Np(t.getUTCDate(),2)+(o?"T"+Np(n,2)+":"+Np(r,2)+":"+Np(i,2)+"."+Np(o,3)+"Z":i?"T"+Np(n,2)+":"+Np(r,2)+":"+Np(i,2)+"Z":r||n?"T"+Np(n,2)+":"+Np(r,2)+"Z":"")}var Bp=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return Cp;if(l)return l=!1,Sp;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=c())!==Cp;){for(var f=[];r!==Sp&&r!==Cp;)f.push(r),r=c();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Tp(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=kp(t);return function(r,i){return e(n(r),i,t)}}(t,e):kp(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Fp(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Fp(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),zp=Bp.parse,Op=Bp.format;function Ip(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Rp(t){return(t=Ip(Math.abs(t)))?t[1]:NaN}var Pp,$p=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lp(t){if(!(e=$p.exec(t)))throw new Error("invalid format: "+t);var e;return new jp({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function jp(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Up(t,e){var n=Ip(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Lp.prototype=jp.prototype,jp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var qp={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Up(100*t,e),r:Up,s:function(t,e){var n=Ip(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Pp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ip(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Vp(t){return t}var Wp,Zp,Hp,Yp=Array.prototype.map,Xp=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Kp(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Vp:(e=Yp.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Vp:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Yp.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Lp(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):qp[v]||(void 0===g&&(g=12),y=!0,v="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var w="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?o:/[%p]/.test(v)?u:"",_=qp[v],x=/[defgprs%]/.test(v);function D(t){var i,o,u,h=w,D=b;if("c"===v)D=_(t)+D,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:_(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==f&&(E=!1),h=(E?"("===f?f:l:"-"===f||"("===f?"":f)+h,D=("s"===v?Xp[8+Pp/3]:"")+D+(E&&"("===f?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){D=(46===u?a+t.slice(i+1):t.slice(i))+D,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var A=h.length+t.length+D.length,M=A<p?new Array(p-A+1).join(e):"";switch(m&&d&&(t=r(M+t,M.length?p-D.length:1/0),M=""),n){case"<":t=h+t+D+M;break;case"=":t=h+M+t+D;break;case"^":t=M.slice(0,A=M.length>>1)+h+t+D+M.slice(A);break;default:t=M+h+t+D}return s(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),D.toString=function(){return t+""},D}return{format:f,formatPrefix:function(t,e){var n=f(((t=Lp(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Rp(e)/3))),i=Math.pow(10,-r),o=Xp[8+r/3];return function(t){return n(i*t)+o}}}}Wp=Kp({thousands:",",grouping:[3],currency:["$",""]}),Zp=Wp.format,Hp=Wp.formatPrefix;var Jp=1e-6,Gp=1e-12,Qp=Math.PI,tm=Qp/2,em=Qp/4,nm=2*Qp,rm=180/Qp,im=Qp/180,om=Math.abs,am=Math.atan,sm=Math.atan2,um=Math.cos,lm=Math.exp,cm=Math.log,fm=Math.pow,hm=Math.sin,dm=Math.sign||function(t){return t>0?1:t<0?-1:0},pm=Math.sqrt,mm=Math.tan;function gm(t){return t>1?0:t<-1?Qp:Math.acos(t)}function ym(t){return t>1?tm:t<-1?-tm:Math.asin(t)}function vm(){}function wm(t,e){t&&_m.hasOwnProperty(t.type)&&_m[t.type](t,e)}var bm={Feature:function(t,e){wm(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)wm(n[r].geometry,e)}},_m={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){xm(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xm(n[r],e,0)},Polygon:function(t,e){Dm(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Dm(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)wm(n[r],e)}};function xm(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Dm(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)xm(t[n],e,1);e.polygonEnd()}function Em(t,e){t&&bm.hasOwnProperty(t.type)?bm[t.type](t,e):wm(t,e)}function Am(t){return[sm(t[1],t[0]),ym(t[2])]}function Mm(t){var e=t[0],n=t[1],r=um(n);return[r*um(e),r*hm(e),hm(n)]}function Sm(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Cm(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function km(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Fm(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nm(t){var e=pm(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Tm(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Bm(t,e){return om(t)>Qp&&(t-=Math.round(t/nm)*nm),[t,e]}function zm(t,e,n){return(t%=nm)?e||n?Tm(Im(t),Rm(e,n)):Im(t):e||n?Rm(e,n):Bm}function Om(t){return function(e,n){return om(e+=t)>Qp&&(e-=Math.round(e/nm)*nm),[e,n]}}function Im(t){var e=Om(t);return e.invert=Om(-t),e}function Rm(t,e){var n=um(t),r=hm(t),i=um(e),o=hm(e);function a(t,e){var a=um(e),s=um(t)*a,u=hm(t)*a,l=hm(e),c=l*n+s*r;return[sm(u*i-c*o,s*n-l*r),ym(c*i+u*o)]}return a.invert=function(t,e){var a=um(e),s=um(t)*a,u=hm(t)*a,l=hm(e),c=l*i-u*o;return[sm(u*i+l*o,s*n+c*r),ym(c*n-s*r)]},a}function Pm(t,e){(e=Mm(e))[0]-=t,Nm(e);var n=gm(-e[1]);return((-e[2]<0?-n:n)+nm-Jp)%nm}function $m(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:vm,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Lm(t,e){return om(t[0]-e[0])<Jp&&om(t[1]-e[1])<Jp}function jm(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Um(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Lm(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*Jp}s.push(n=new jm(r,t,null,!0)),u.push(n.o=new jm(r,null,n,!1)),s.push(n=new jm(a,t,null,!1)),u.push(n.o=new jm(a,null,n,!0))}})),s.length){for(u.sort(e),qm(s),qm(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function qm(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Vm(t){return om(t[0])<=Qp?t[0]:dm(t[0])*((om(t[0])+Qp)%nm-Qp)}function Wm(t,e,n,r){return function(i){var o,a,s,u=e(i),l=$m(),c=e(l),f=!1,h={point:d,lineStart:m,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=v,h.lineEnd=w,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=g,a=dl(a);var t=function(t,e){var n=Vm(e),r=e[1],i=hm(r),o=[hm(n),-um(n),0],a=0,s=0,u=new Tu;1===i?r=tm+Jp:-1===i&&(r=-tm-Jp);for(var l=0,c=t.length;l<c;++l)if(h=(f=t[l]).length)for(var f,h,d=f[h-1],p=Vm(d),m=d[1]/2+em,g=hm(m),y=um(m),v=0;v<h;++v,p=b,g=x,y=D,d=w){var w=f[v],b=Vm(w),_=w[1]/2+em,x=hm(_),D=um(_),E=b-p,A=E>=0?1:-1,M=A*E,S=M>Qp,C=g*x;if(u.add(sm(C*A*hm(M),y*D+C*um(M))),a+=S?E+A*nm:E,S^p>=n^b>=n){var k=Cm(Mm(d),Mm(w));Nm(k);var F=Cm(o,k);Nm(F);var N=(S^E>=0?-1:1)*ym(F[2]);(r>N||r===N&&(k[0]||k[1]))&&(s+=S^E>=0?1:-1)}}return(a<-Jp||a<Jp&&u<-Gp)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),Um(a,Hm,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){h.point=p,u.lineStart()}function g(){h.point=d,u.lineEnd()}function y(t,e){s.push([t,e]),c.point(t,e)}function v(){c.lineStart(),s=[]}function w(){y(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),h=l.result(),d=h.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Zm))}return h}}function Zm(t){return t.length>1}function Hm(t,e){return((t=t.x)[0]<0?t[1]-tm-Jp:tm-t[1])-((e=e.x)[0]<0?e[1]-tm-Jp:tm-e[1])}Bm.invert=Bm;var Ym=Wm((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Qp:-Qp,u=om(o-n);om(u-Qp)<Jp?(t.point(n,r=(r+a)/2>0?tm:-tm),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Qp&&(om(n-i)<Jp&&(n-=i*Jp),om(o-s)<Jp&&(o-=s*Jp),r=function(t,e,n,r){var i,o,a=hm(t-n);return om(a)>Jp?am((hm(e)*(o=um(r))*hm(n)-hm(r)*(i=um(e))*hm(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*tm,r.point(-Qp,i),r.point(0,i),r.point(Qp,i),r.point(Qp,0),r.point(Qp,-i),r.point(0,-i),r.point(-Qp,-i),r.point(-Qp,0),r.point(-Qp,i);else if(om(t[0]-e[0])>Jp){var o=t[0]<e[0]?Qp:-Qp;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Qp,-tm]);function Xm(t){var e=um(t),n=6*im,r=e>0,i=om(e)>Jp;function o(t,n){return um(t)*um(n)>e}function a(t,n,r){var i=[1,0,0],o=Cm(Mm(t),Mm(n)),a=Sm(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,f=Cm(i,o),h=Fm(i,l);km(h,Fm(o,c));var d=f,p=Sm(h,d),m=Sm(d,d),g=p*p-m*(Sm(h,h)-1);if(!(g<0)){var y=pm(g),v=Fm(d,(-p-y)/m);if(km(v,h),v=Am(v),!r)return v;var w,b=t[0],_=n[0],x=t[1],D=n[1];_<b&&(w=b,b=_,_=w);var E=_-b,A=om(E-Qp)<Jp;if(!A&&D<x&&(w=x,x=D,D=w),A||E<Jp?A?x+D>0^v[1]<(om(v[0]-b)<Jp?x:D):x<=v[1]&&v[1]<=D:E>Qp^(b<=v[0]&&v[0]<=_)){var M=Fm(d,(-p+y)/m);return km(M,h),[v,Am(M)]}}}function s(e,n){var i=r?t:Qp-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Wm(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var d,p=[f,h],m=o(f,h),g=r?m?0:s(f,h):m?s(f+(f<0?Qp:-Qp),h):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(!(d=a(e,p))||Lm(e,d)||Lm(p,d))&&(p[2]=1),m!==u)c=0,m?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^m){var y;g&n||!(y=a(p,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!m||e&&Lm(e,p)||t.point(p[0],p[1]),e=p,u=m,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=um(e),s=hm(e),u=r*n;null==i?(i=e+r*nm,o=e-u/2):(i=Pm(a,i),o=Pm(a,o),(r>0?i<o:i>o)&&(i+=r*nm));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Am([a,-s*um(c),-s*hm(c)]),t.point(l[0],l[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-Qp,t-Qp])}var Km=1e9,Jm=-Km;function Gm(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return om(r[0]-t)<Jp?i>0?0:3:om(r[0]-n)<Jp?i>0?2:1:om(r[1]-e)<Jp?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,f,h,d,p,m,g,y,v,w=a,b=$m(),_={point:x,lineStart:function(){_.point=D,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(D(f,h),d&&g&&b.rejoin(),u.push(b.result()));_.point=x,g&&w.lineEnd()},polygonStart:function(){w=b,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],h=f[0],d=f[1];u<c;++u)o=h,a=d,h=(f=s[u])[0],d=f[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=dl(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Um(u,s,e,o,a),a.polygonEnd());w=a,u=l=c=null}};function x(t,e){i(t,e)&&w.point(t,e)}function D(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,h=a,d=s,y=!1,s&&(w.lineStart(),w.point(o,a));else if(s&&g)w.point(o,a);else{var u=[p=Math.max(Jm,Math.min(Km,p)),m=Math.max(Jm,Math.min(Km,m))],b=[o=Math.max(Jm,Math.min(Km,o)),a=Math.max(Jm,Math.min(Km,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*f,t[1]=u+l*h),c<1&&(e[0]=s+c*f,e[1]=u+c*h),!0}}}}}(u,b,t,e,n,r)?s&&(w.lineStart(),w.point(o,a),v=!1):(g||(w.lineStart(),w.point(u[0],u[1])),w.point(b[0],b[1]),s||w.lineEnd(),v=!1)}p=o,m=a,g=s}return _}}var Qm,tg,eg,ng,rg=t=>t,ig=new Tu,og=new Tu,ag={point:vm,lineStart:vm,lineEnd:vm,polygonStart:function(){ag.lineStart=sg,ag.lineEnd=cg},polygonEnd:function(){ag.lineStart=ag.lineEnd=ag.point=vm,ig.add(om(og)),og=new Tu},result:function(){var t=ig/2;return ig=new Tu,t}};function sg(){ag.point=ug}function ug(t,e){ag.point=lg,Qm=eg=t,tg=ng=e}function lg(t,e){og.add(ng*t-eg*e),eg=t,ng=e}function cg(){lg(Qm,tg)}var fg=ag,hg=1/0,dg=hg,pg=-hg,mg=pg,gg={point:function(t,e){t<hg&&(hg=t);t>pg&&(pg=t);e<dg&&(dg=e);e>mg&&(mg=e)},lineStart:vm,lineEnd:vm,polygonStart:vm,polygonEnd:vm,result:function(){var t=[[hg,dg],[pg,mg]];return pg=mg=-(dg=hg=1/0),t}};var yg,vg,wg,bg,_g=gg,xg=0,Dg=0,Eg=0,Ag=0,Mg=0,Sg=0,Cg=0,kg=0,Fg=0,Ng={point:Tg,lineStart:Bg,lineEnd:Ig,polygonStart:function(){Ng.lineStart=Rg,Ng.lineEnd=Pg},polygonEnd:function(){Ng.point=Tg,Ng.lineStart=Bg,Ng.lineEnd=Ig},result:function(){var t=Fg?[Cg/Fg,kg/Fg]:Sg?[Ag/Sg,Mg/Sg]:Eg?[xg/Eg,Dg/Eg]:[NaN,NaN];return xg=Dg=Eg=Ag=Mg=Sg=Cg=kg=Fg=0,t}};function Tg(t,e){xg+=t,Dg+=e,++Eg}function Bg(){Ng.point=zg}function zg(t,e){Ng.point=Og,Tg(wg=t,bg=e)}function Og(t,e){var n=t-wg,r=e-bg,i=pm(n*n+r*r);Ag+=i*(wg+t)/2,Mg+=i*(bg+e)/2,Sg+=i,Tg(wg=t,bg=e)}function Ig(){Ng.point=Tg}function Rg(){Ng.point=$g}function Pg(){Lg(yg,vg)}function $g(t,e){Ng.point=Lg,Tg(yg=wg=t,vg=bg=e)}function Lg(t,e){var n=t-wg,r=e-bg,i=pm(n*n+r*r);Ag+=i*(wg+t)/2,Mg+=i*(bg+e)/2,Sg+=i,Cg+=(i=bg*t-wg*e)*(wg+t),kg+=i*(bg+e),Fg+=3*i,Tg(wg=t,bg=e)}var jg=Ng;function Ug(t){this._context=t}Ug.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,nm)}},result:vm};var qg,Vg,Wg,Zg,Hg,Yg=new Tu,Xg={point:vm,lineStart:function(){Xg.point=Kg},lineEnd:function(){qg&&Jg(Vg,Wg),Xg.point=vm},polygonStart:function(){qg=!0},polygonEnd:function(){qg=null},result:function(){var t=+Yg;return Yg=new Tu,t}};function Kg(t,e){Xg.point=Jg,Vg=Zg=t,Wg=Hg=e}function Jg(t,e){Zg-=t,Hg-=e,Yg.add(pm(Zg*Zg+Hg*Hg)),Zg=t,Hg=e}var Gg=Xg;let Qg,ty,ey,ny;class ry{constructor(t){this._append=null==t?iy:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return iy;if(e!==Qg){const t=10**e;Qg=e,ty=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return ty}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==ey||this._append!==ty){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,ey=t,ty=this._append,ny=this._,this._=e}this._+=ny}}result(){const t=this._;return this._="",t.length?t:null}}function iy(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function oy(t,e){let n,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Em(t,n(r))),r.result()}return a.area=function(t){return Em(t,n(fg)),fg.result()},a.measure=function(t){return Em(t,n(Gg)),Gg.result()},a.bounds=function(t){return Em(t,n(_g)),_g.result()},a.centroid=function(t){return Em(t,n(jg)),jg.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,rg):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new ry(i)):new Ug(e=t),"function"!=typeof o&&r.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new ry(i)),a},a.projection(t).digits(i).context(e)}function ay(t){return{stream:sy(t)}}function sy(t){return function(e){var n=new uy;for(var r in t)n[r]=t[r];return n.stream=e,n}}function uy(){}function ly(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Em(n,t.stream(_g)),e(_g.result()),null!=r&&t.clipExtent(r),t}function cy(t,e,n){return ly(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function fy(t,e,n){return cy(t,[[0,0],e],n)}function hy(t,e,n){return ly(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function dy(t,e,n){return ly(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}uy.prototype={constructor:uy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var py=16,my=um(30*im);function gy(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,f,h,d,p,m,g){var y=l-r,v=c-i,w=y*y+v*v;if(w>4*e&&m--){var b=a+h,_=s+d,x=u+p,D=pm(b*b+_*_+x*x),E=ym(x/=D),A=om(om(x)-1)<Jp||om(o-f)<Jp?(o+f)/2:sm(_,b),M=t(A,E),S=M[0],C=M[1],k=S-r,F=C-i,N=v*k-y*F;(N*N/w>e||om((y*k+v*F)/w-.5)>.3||a*h+s*d+u*p<my)&&(n(r,i,o,a,s,u,S,C,A,b/=D,_/=D,x,m,g),g.point(S,C),n(S,C,A,b,_,x,l,c,f,h,d,p,m,g))}}return function(e){var r,i,o,a,s,u,l,c,f,h,d,p,m={point:g,lineStart:y,lineEnd:w,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,m.point=v,e.lineStart()}function v(r,i){var o=Mm([r,i]),a=t(r,i);n(c,f,l,h,d,p,c=a[0],f=a[1],l=r,h=o[0],d=o[1],p=o[2],py,e),e.point(c,f)}function w(){m.point=g,e.lineEnd()}function b(){y(),m.point=_,m.lineEnd=x}function _(t,e){v(r=t,e),i=c,o=f,a=h,s=d,u=p,m.point=v}function x(){n(c,f,l,h,d,p,i,o,r,a,s,u,py,e),m.lineEnd=w,w()}return m}}(t,e):function(t){return sy({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var yy=sy({point:function(t,e){this.stream.point(t*im,e*im)}});function vy(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=um(o),s=hm(o),u=a*t,l=s*t,c=a/t,f=s/t,h=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return p.invert=function(t,e){return[r*(c*t-f*e+h),i*(d-f*t-c*e)]},p}function wy(t){return by((function(){return t}))()}function by(t){var e,n,r,i,o,a,s,u,l,c,f=150,h=480,d=250,p=0,m=0,g=0,y=0,v=0,w=0,b=1,_=1,x=null,D=Ym,E=null,A=rg,M=.5;function S(t){return u(t[0]*im,t[1]*im)}function C(t){return(t=u.invert(t[0],t[1]))&&[t[0]*rm,t[1]*rm]}function k(){var t=vy(f,0,0,b,_,w).apply(null,e(p,m)),r=vy(f,h-t[0],d-t[1],b,_,w);return n=zm(g,y,v),s=Tm(e,r),u=Tm(n,s),a=gy(s,M),F()}function F(){return l=c=null,S}return S.stream=function(t){return l&&c===t?l:l=yy(function(t){return sy({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(D(a(A(c=t)))))},S.preclip=function(t){return arguments.length?(D=t,x=void 0,F()):D},S.postclip=function(t){return arguments.length?(A=t,E=r=i=o=null,F()):A},S.clipAngle=function(t){return arguments.length?(D=+t?Xm(x=t*im):(x=null,Ym),F()):x*rm},S.clipExtent=function(t){return arguments.length?(A=null==t?(E=r=i=o=null,rg):Gm(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),F()):null==E?null:[[E,r],[i,o]]},S.scale=function(t){return arguments.length?(f=+t,k()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],k()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*im,m=t[1]%360*im,k()):[p*rm,m*rm]},S.rotate=function(t){return arguments.length?(g=t[0]%360*im,y=t[1]%360*im,v=t.length>2?t[2]%360*im:0,k()):[g*rm,y*rm,v*rm]},S.angle=function(t){return arguments.length?(w=t%360*im,k()):w*rm},S.reflectX=function(t){return arguments.length?(b=t?-1:1,k()):b<0},S.reflectY=function(t){return arguments.length?(_=t?-1:1,k()):_<0},S.precision=function(t){return arguments.length?(a=gy(s,M=t*t),F()):pm(M)},S.fitExtent=function(t,e){return cy(S,t,e)},S.fitSize=function(t,e){return fy(S,t,e)},S.fitWidth=function(t,e){return hy(S,t,e)},S.fitHeight=function(t,e){return dy(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&C,k()}}function _y(t){var e=0,n=Qp/3,r=by(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*im,n=t[1]*im):[e*rm,n*rm]},i}function xy(t,e){var n=hm(t),r=(n+hm(e))/2;if(om(r)<Jp)return function(t){var e=um(t);function n(t,n){return[t*e,hm(n)/e]}return n.invert=function(t,n){return[t/e,ym(n*e)]},n}(t);var i=1+n*(2*r-n),o=pm(i)/r;function a(t,e){var n=pm(i-2*r*hm(e))/r;return[n*hm(t*=r),o-n*um(t)]}return a.invert=function(t,e){var n=o-e,a=sm(t,om(n))*dm(n);return n*r<0&&(a-=Qp*dm(t)*dm(n)),[a/r,ym((i-(t*t+n*n)*r*r)/(2*r))]},a}function Dy(){return _y(xy).scale(155.424).center([0,33.6442])}function Ey(){return Dy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ay(){var t,e,n,r,i,o,a=Ey(),s=Dy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Dy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},c.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),s.stream(n),u.stream(n)])},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),f()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(l),r=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+Jp,c+.12*e+Jp],[o-.214*e-Jp,c+.234*e-Jp]]).stream(l),i=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+Jp,c+.166*e+Jp],[o-.115*e-Jp,c+.234*e-Jp]]).stream(l),f()},c.fitExtent=function(t,e){return cy(c,t,e)},c.fitSize=function(t,e){return fy(c,t,e)},c.fitWidth=function(t,e){return hy(c,t,e)},c.fitHeight=function(t,e){return dy(c,t,e)},c.scale(1070)}function My(t){return function(e,n){var r=um(e),i=um(n),o=t(r*i);return o===1/0?[2,0]:[o*i*hm(e),o*hm(n)]}}function Sy(t){return function(e,n){var r=pm(e*e+n*n),i=t(r),o=hm(i),a=um(i);return[sm(e*o,r*a),ym(r&&n*o/r)]}}var Cy=My((function(t){return pm(2/(1+t))}));function ky(){return wy(Cy).scale(124.75).clipAngle(179.999)}Cy.invert=Sy((function(t){return 2*ym(t/2)}));var Fy=My((function(t){return(t=gm(t))&&t/hm(t)}));function Ny(){return wy(Fy).scale(79.4188).clipAngle(179.999)}function Ty(t,e){return[t,cm(mm((tm+e)/2))]}function By(){return zy(Ty).scale(961/nm)}function zy(t){var e,n,r,i=wy(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Qp*a(),s=i(function(t){function e(e){return(e=t(e[0]*im,e[1]*im))[0]*=rm,e[1]*=rm,e}return t=zm(t[0]*im,t[1]*im,t.length>2?t[2]*im:0),e.invert=function(e){return(e=t.invert(e[0]*im,e[1]*im))[0]*=rm,e[1]*=rm,e},e}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Ty?[[Math.max(s[0]-o,l),e],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Oy(t){return mm((tm+t)/2)}function Iy(t,e){var n=um(t),r=t===e?hm(t):cm(n/um(e))/cm(Oy(e)/Oy(t)),i=n*fm(Oy(t),r)/r;if(!r)return Ty;function o(t,e){i>0?e<-tm+Jp&&(e=-tm+Jp):e>tm-Jp&&(e=tm-Jp);var n=i/fm(Oy(e),r);return[n*hm(r*t),i-n*um(r*t)]}return o.invert=function(t,e){var n=i-e,o=dm(r)*pm(t*t+n*n),a=sm(t,om(n))*dm(n);return n*r<0&&(a-=Qp*dm(t)*dm(n)),[a/r,2*am(fm(i/o,1/r))-tm]},o}function Ry(){return _y(Iy).scale(109.5).parallels([30,30])}function Py(t,e){return[t,e]}function $y(){return wy(Py).scale(152.63)}function Ly(t,e){var n=um(t),r=t===e?hm(t):(n-um(e))/(e-t),i=n/r+t;if(om(r)<Jp)return Py;function o(t,e){var n=i-e,o=r*t;return[n*hm(o),i-n*um(o)]}return o.invert=function(t,e){var n=i-e,o=sm(t,om(n))*dm(n);return n*r<0&&(o-=Qp*dm(t)*dm(n)),[o/r,i-dm(r)*pm(t*t+n*n)]},o}function jy(){return _y(Ly).scale(131.154).center([0,13.9389])}Fy.invert=Sy((function(t){return t})),Ty.invert=function(t,e){return[t,2*am(lm(e))-tm]},Py.invert=Py;var Uy=1.340264,qy=-.081106,Vy=893e-6,Wy=.003796,Zy=pm(3)/2;function Hy(t,e){var n=ym(Zy*hm(e)),r=n*n,i=r*r*r;return[t*um(n)/(Zy*(Uy+3*qy*r+i*(7*Vy+9*Wy*r))),n*(Uy+qy*r+i*(Vy+Wy*r))]}function Yy(){return wy(Hy).scale(177.158)}function Xy(t,e){var n=um(e),r=um(t)*n;return[n*hm(t)/r,hm(e)/r]}function Ky(){return wy(Xy).scale(144.049).clipAngle(60)}function Jy(t,e){return[um(e)*hm(t),hm(e)]}function Gy(){return wy(Jy).scale(249.5).clipAngle(90+Jp)}function Qy(t,e){var n=um(e),r=1+um(t)*n;return[n*hm(t)/r,hm(e)/r]}function tv(){return wy(Qy).scale(250).clipAngle(142)}function ev(t,e){return[cm(mm((tm+e)/2)),-t]}function nv(){var t=zy(ev),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function rv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function iv(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}Hy.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Uy+qy*i+o*(Vy+Wy*i))-e)/(Uy+3*qy*i+o*(7*Vy+9*Wy*i)))*r)*i*i,!(om(n)<Gp));++a);return[Zy*t*(Uy+3*qy*i+o*(7*Vy+9*Wy*i))/um(r),ym(hm(r)/Zy)]},Xy.invert=Sy(am),Jy.invert=Sy(ym),Qy.invert=Sy((function(t){return 2*am(t)})),ev.invert=function(t,e){return[-e,2*am(lm(t))-tm]};const ov=Symbol("implicit");function av(){var t=new Bu,e=[],n=[],r=ov;function i(i){let o=t.get(i);if(void 0===o){if(r!==ov)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Bu;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return av(e,n).unknown(r)},rv.apply(i,arguments),i}function sv(){var t,e,n=av().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,l=0,c=.5;function f(){var n=r().length,f=a<o,h=f?a:o,d=f?o:a;t=(d-h)/Math.max(1,n-u+2*l),s&&(t=Math.floor(t)),h+=(d-h-t*(n-u))*c,e=t*(1-u),s&&(h=Math.round(h),e=Math.round(e));var p=gl(n).map((function(e){return h+t*e}));return i(f?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,f()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,f()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,f()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return sv(r(),[o,a]).round(s).paddingInner(u).paddingOuter(l).align(c)},rv.apply(f(),arguments)}function uv(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return uv(e())},t}function lv(){return uv(sv.apply(null,arguments).paddingInner(1))}function cv(t){return+t}var fv=[0,1];function hv(t){return t}function dv(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function pv(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=dv(i,r),o=n(a,o)):(r=dv(r,i),o=n(o,a)),function(t){return o(r(t))}}function mv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=dv(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Eu(t,e,1,r)-1;return o[n](i[n](e))}}function gv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yv(){var t,e,n,r,i,o,a=fv,s=fv,u=Ah,l=hv;function c(){var t=Math.min(a.length,s.length);return l!==hv&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?mv:pv,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return f.invert=function(n){return l(e((o||(o=r(s,a.map(t),bh)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,cv),c()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=Mh,c()},f.clamp=function(t){return arguments.length?(l=!!t||hv,c()):l!==hv},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function vv(){return yv()(hv,hv)}function wv(t,e,n,r){var i,o=Qu(t,e,n);switch((r=Lp(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Rp(e)/3)))-Rp(Math.abs(t)))}(o,a))||(r.precision=i),Hp(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rp(e)-Rp(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Rp(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Zp(r)}function bv(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ju(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return wv(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=Gu(u,l,n))===r)return o[a]=u,o[s]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function _v(){var t=vv();return t.copy=function(){return gv(t,_v())},rv.apply(t,arguments),bv(t)}function xv(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,cv),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return xv(t).unknown(e)},t=arguments.length?Array.from(t,cv):[0,1],bv(n)}function Dv(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Ev(t){return Math.log(t)}function Av(t){return Math.exp(t)}function Mv(t){return-Math.log(-t)}function Sv(t){return-Math.exp(-t)}function Cv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function kv(t){return(e,n)=>-t(-e,n)}function Fv(t){const e=t(Ev,Av),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?Cv:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=kv(r),i=kv(i),t(Mv,Sv)):t(Ev,Av),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const u=s<a;u&&([a,s]=[s,a]);let l,c,f=r(a),h=r(s);const d=null==t?10:+t;let p=[];if(!(o%1)&&h-f<d){if(f=Math.floor(f),h=Math.ceil(h),a>0){for(;f<=h;++f)for(l=1;l<o;++l)if(c=f<0?l/i(-f):l*i(f),!(c<a)){if(c>s)break;p.push(c)}}else for(;f<=h;++f)for(l=o-1;l>=1;--l)if(c=f>0?l/i(-f):l*i(f),!(c<a)){if(c>s)break;p.push(c)}2*p.length<d&&(p=Ju(a,s,d))}else p=Ju(f,h,Math.min(h-f,d)).map(i);return u?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=Lp(n)).precision||(n.trim=!0),n=Zp(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(Dv(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function Nv(){const t=Fv(yv()).domain([1,10]);return t.copy=()=>gv(t,Nv()).base(t.base()),rv.apply(t,arguments),t}function Tv(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Bv(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function zv(t){var e=1,n=t(Tv(e),Bv(e));return n.constant=function(n){return arguments.length?t(Tv(e=+n),Bv(e)):e},bv(n)}function Ov(){var t=zv(yv());return t.copy=function(){return gv(t,Ov()).constant(t.constant())},rv.apply(t,arguments)}function Iv(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Rv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Pv(t){return t<0?-t*t:t*t}function $v(t){var e=t(hv,hv),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(hv,hv):.5===n?t(Rv,Pv):t(Iv(n),Iv(1/n)):n},bv(e)}function Lv(){var t=$v(yv());return t.copy=function(){return gv(t,Lv()).exponent(t.exponent())},rv.apply(t,arguments),t}function jv(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=ul(e,t/i);return o}function o(e){return null==e||isNaN(e=+e)?t:n[Eu(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(vu),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return jv().domain(e).range(n).unknown(t)},rv.apply(o,arguments)}function Uv(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[Eu(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Uv().domain(e).range(n).unknown(t)},rv.apply(i,arguments)}const qv=new Date,Vv=new Date;function Wv(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>Wv((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(qv.setTime(+e),Vv.setTime(+r),t(qv),t(Vv),Math.floor(n(qv,Vv))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const Zv=Wv((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Zv.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Wv((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Zv:null),Zv.range;const Hv=1e3,Yv=6e4,Xv=36e5,Kv=864e5,Jv=6048e5,Gv=2592e6,Qv=31536e6,tw=Wv((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*Hv)}),((t,e)=>(e-t)/Hv),(t=>t.getUTCSeconds()));tw.range;const ew=Wv((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hv)}),((t,e)=>{t.setTime(+t+e*Yv)}),((t,e)=>(e-t)/Yv),(t=>t.getMinutes()));ew.range;const nw=Wv((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*Yv)}),((t,e)=>(e-t)/Yv),(t=>t.getUTCMinutes()));nw.range;const rw=Wv((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hv-t.getMinutes()*Yv)}),((t,e)=>{t.setTime(+t+e*Xv)}),((t,e)=>(e-t)/Xv),(t=>t.getHours()));rw.range;const iw=Wv((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*Xv)}),((t,e)=>(e-t)/Xv),(t=>t.getUTCHours()));iw.range;const ow=Wv((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Yv)/Kv),(t=>t.getDate()-1));ow.range;const aw=Wv((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Kv),(t=>t.getUTCDate()-1));aw.range;const sw=Wv((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Kv),(t=>Math.floor(t/Kv)));function uw(t){return Wv((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Yv)/Jv))}sw.range;const lw=uw(0),cw=uw(1),fw=uw(2),hw=uw(3),dw=uw(4),pw=uw(5),mw=uw(6);function gw(t){return Wv((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/Jv))}lw.range,cw.range,fw.range,hw.range,dw.range,pw.range,mw.range;const yw=gw(0),vw=gw(1),ww=gw(2),bw=gw(3),_w=gw(4),xw=gw(5),Dw=gw(6);yw.range,vw.range,ww.range,bw.range,_w.range,xw.range,Dw.range;const Ew=Wv((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));Ew.range;const Aw=Wv((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));Aw.range;const Mw=Wv((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Mw.every=t=>isFinite(t=Math.floor(t))&&t>0?Wv((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Mw.range;const Sw=Wv((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function Cw(t,e,n,r,i,o){const a=[[tw,1,Hv],[tw,5,5e3],[tw,15,15e3],[tw,30,3e4],[o,1,Yv],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,Xv],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Kv],[r,2,1728e5],[n,1,Jv],[e,1,Gv],[e,3,7776e6],[t,1,Qv]];function s(e,n,r){const i=Math.abs(n-e)/r,o=bu((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(Qu(e/Qv,n/Qv,r));if(0===o)return Zv.every(Math.max(Qu(e,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}Sw.every=t=>isFinite(t=Math.floor(t))&&t>0?Wv((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,Sw.range;const[kw,Fw]=Cw(Sw,Aw,yw,sw,iw,nw),[Nw,Tw]=Cw(Mw,Ew,lw,ow,rw,ew);function Bw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ow(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Iw,Rw,Pw,$w={"-":"",_:" ",0:"0"},Lw=/^\s*\d+/,jw=/^%/,Uw=/[\\^$*+?|[\]().{}]/g;function qw(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Vw(t){return t.replace(Uw,"\\$&")}function Ww(t){return new RegExp("^(?:"+t.map(Vw).join("|")+")","i")}function Zw(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Hw(t,e,n){var r=Lw.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Yw(t,e,n){var r=Lw.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Xw(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Kw(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Jw(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Gw(t,e,n){var r=Lw.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Qw(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function tb(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function eb(t,e,n){var r=Lw.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function nb(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function rb(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ib(t,e,n){var r=Lw.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ob(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ab(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function sb(t,e,n){var r=Lw.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ub(t,e,n){var r=Lw.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function lb(t,e,n){var r=Lw.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cb(t,e,n){var r=jw.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fb(t,e,n){var r=Lw.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function hb(t,e,n){var r=Lw.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function db(t,e){return qw(t.getDate(),e,2)}function pb(t,e){return qw(t.getHours(),e,2)}function mb(t,e){return qw(t.getHours()%12||12,e,2)}function gb(t,e){return qw(1+ow.count(Mw(t),t),e,3)}function yb(t,e){return qw(t.getMilliseconds(),e,3)}function vb(t,e){return yb(t,e)+"000"}function wb(t,e){return qw(t.getMonth()+1,e,2)}function bb(t,e){return qw(t.getMinutes(),e,2)}function _b(t,e){return qw(t.getSeconds(),e,2)}function xb(t){var e=t.getDay();return 0===e?7:e}function Db(t,e){return qw(lw.count(Mw(t)-1,t),e,2)}function Eb(t){var e=t.getDay();return e>=4||0===e?dw(t):dw.ceil(t)}function Ab(t,e){return t=Eb(t),qw(dw.count(Mw(t),t)+(4===Mw(t).getDay()),e,2)}function Mb(t){return t.getDay()}function Sb(t,e){return qw(cw.count(Mw(t)-1,t),e,2)}function Cb(t,e){return qw(t.getFullYear()%100,e,2)}function kb(t,e){return qw((t=Eb(t)).getFullYear()%100,e,2)}function Fb(t,e){return qw(t.getFullYear()%1e4,e,4)}function Nb(t,e){var n=t.getDay();return qw((t=n>=4||0===n?dw(t):dw.ceil(t)).getFullYear()%1e4,e,4)}function Tb(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qw(e/60|0,"0",2)+qw(e%60,"0",2)}function Bb(t,e){return qw(t.getUTCDate(),e,2)}function zb(t,e){return qw(t.getUTCHours(),e,2)}function Ob(t,e){return qw(t.getUTCHours()%12||12,e,2)}function Ib(t,e){return qw(1+aw.count(Sw(t),t),e,3)}function Rb(t,e){return qw(t.getUTCMilliseconds(),e,3)}function Pb(t,e){return Rb(t,e)+"000"}function $b(t,e){return qw(t.getUTCMonth()+1,e,2)}function Lb(t,e){return qw(t.getUTCMinutes(),e,2)}function jb(t,e){return qw(t.getUTCSeconds(),e,2)}function Ub(t){var e=t.getUTCDay();return 0===e?7:e}function qb(t,e){return qw(yw.count(Sw(t)-1,t),e,2)}function Vb(t){var e=t.getUTCDay();return e>=4||0===e?_w(t):_w.ceil(t)}function Wb(t,e){return t=Vb(t),qw(_w.count(Sw(t),t)+(4===Sw(t).getUTCDay()),e,2)}function Zb(t){return t.getUTCDay()}function Hb(t,e){return qw(vw.count(Sw(t)-1,t),e,2)}function Yb(t,e){return qw(t.getUTCFullYear()%100,e,2)}function Xb(t,e){return qw((t=Vb(t)).getUTCFullYear()%100,e,2)}function Kb(t,e){return qw(t.getUTCFullYear()%1e4,e,4)}function Jb(t,e){var n=t.getUTCDay();return qw((t=n>=4||0===n?_w(t):_w.ceil(t)).getUTCFullYear()%1e4,e,4)}function Gb(){return"+0000"}function Qb(){return"%"}function t_(t){return+t}function e_(t){return Math.floor(+t/1e3)}function n_(t){return new Date(t)}function r_(t){return t instanceof Date?+t:+new Date(+t)}function i_(t,e,n,r,i,o,a,s,u,l){var c=vv(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),w=l("%B"),b=l("%Y");function _(t){return(u(t)<t?d:s(t)<t?p:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?w:b)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?h(Array.from(t,r_)):h().map(n_)},c.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?_:l(e)},c.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(Dv(n,t)):c},c.copy=function(){return gv(c,i_(t,e,n,r,i,o,a,s,u,l))},c}function o_(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function a_(){var t,e,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=hv,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=Ph(t,[n,r,i]),d):[f(0),f(.5),f(1)]}}return d.domain=function(a){return arguments.length?([s,u,l]=a,t=o(s=+s),e=o(u=+u),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d):[s,u,l]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(Ah),d.rangeRound=p(Mh),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(s),e=a(u),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d}}function s_(){var t=bv(a_()(hv));return t.copy=function(){return o_(t,s_())},iv.apply(t,arguments)}function u_(){var t=Fv(a_()).domain([.1,1,10]);return t.copy=function(){return o_(t,u_()).base(t.base())},iv.apply(t,arguments)}function l_(){var t=zv(a_());return t.copy=function(){return o_(t,l_()).constant(t.constant())},iv.apply(t,arguments)}function c_(){var t=$v(a_());return t.copy=function(){return o_(t,c_()).exponent(t.exponent())},iv.apply(t,arguments)}function f_(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}!function(t){Iw=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Ww(i),c=Zw(i),f=Ww(o),h=Zw(o),d=Ww(a),p=Zw(a),m=Ww(s),g=Zw(s),y=Ww(u),v=Zw(u),w={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:db,e:db,f:vb,g:kb,G:Nb,H:pb,I:mb,j:gb,L:yb,m:wb,M:bb,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:t_,s:e_,S:_b,u:xb,U:Db,V:Ab,w:Mb,W:Sb,x:null,X:null,y:Cb,Y:Fb,Z:Tb,"%":Qb},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Bb,e:Bb,f:Pb,g:Xb,G:Jb,H:zb,I:Ob,j:Ib,L:Rb,m:$b,M:Lb,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:t_,s:e_,S:jb,u:Ub,U:qb,V:Wb,w:Zb,W:Hb,x:null,X:null,y:Yb,Y:Kb,Z:Gb,"%":Qb},_={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:rb,e:rb,f:lb,g:Qw,G:Gw,H:ob,I:ob,j:ib,L:ub,m:nb,M:ab,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:eb,Q:fb,s:hb,S:sb,u:Yw,U:Xw,V:Kw,w:Hw,W:Jw,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:Qw,Y:Gw,Z:tb,"%":cb};function x(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=$w[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function D(t,e){return function(n){var r,i,o=Ow(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=zw(Ow(o.y,0,1))).getUTCDay(),r=i>4||0===i?vw.ceil(r):vw(r),r=aw.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Bw(Ow(o.y,0,1))).getDay(),r=i>4||0===i?cw.ceil(r):cw(r),r=ow.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?zw(Ow(o.y,0,1)).getUTCDay():Bw(Ow(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,zw(o)):Bw(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=_[i in $w?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return w.x=x(n,w),w.X=x(r,w),w.c=x(e,w),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),{format:function(t){var e=x(t+="",w);return e.toString=function(){return t},e},parse:function(t){var e=D(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=D(t+="",!0);return e.toString=function(){return t},e}}}(t),Rw=Iw.format,Iw.parse,Pw=Iw.utcFormat,Iw.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var h_=f_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),d_=f_("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),p_=f_("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),m_=f_("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),g_=f_("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),y_=f_("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),v_=f_("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),w_=f_("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),b_=f_("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),__=f_("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),x_=t=>gh(t[t.length-1]),D_=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(f_),E_=x_(D_),A_=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(f_),M_=x_(A_),S_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(f_),C_=x_(S_),k_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(f_),F_=x_(k_),N_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(f_),T_=x_(N_),B_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(f_),z_=x_(B_),O_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(f_),I_=x_(O_),R_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(f_),P_=x_(R_),$_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(f_),L_=x_($_),j_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(f_),U_=x_(j_),q_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(f_),V_=x_(q_),W_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(f_),Z_=x_(W_),H_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(f_),Y_=x_(H_),X_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(f_),K_=x_(X_),J_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(f_),G_=x_(J_),Q_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(f_),tx=x_(Q_),ex=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(f_),nx=x_(ex),rx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(f_),ix=x_(rx),ox=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(f_),ax=x_(ox),sx=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(f_),ux=x_(sx),lx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(f_),cx=x_(lx),fx=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(f_),hx=x_(fx),dx=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(f_),px=x_(dx),mx=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(f_),gx=x_(mx),yx=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(f_),vx=x_(yx),wx=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(f_),bx=x_(wx),_x=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(f_),xx=x_(_x);function Dx(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var Ex=Rh(sh(300,.5,0),sh(-240,.5,1)),Ax=Rh(sh(-100,.75,.35),sh(80,1.5,.8)),Mx=Rh(sh(260,.75,.35),sh(80,1.5,.8)),Sx=sh();function Cx(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Sx.h=360*t-100,Sx.s=1.5-1.5*e,Sx.l=.8-.9*e,Sx+""}var kx=bf(),Fx=Math.PI/3,Nx=2*Math.PI/3;function Tx(t){var e;return t=(.5-t)*Math.PI,kx.r=255*(e=Math.sin(t))*e,kx.g=255*(e=Math.sin(t+Fx))*e,kx.b=255*(e=Math.sin(t+Nx))*e,kx+""}function Bx(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function zx(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Ox=zx(f_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Ix=zx(f_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Rx=zx(f_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Px=zx(f_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function $x(t){return function(){return t}}const Lx=Math.cos,jx=Math.min,Ux=Math.sin,qx=Math.sqrt,Vx=Math.PI,Wx=2*Vx;function Zx(t){this._context=t}function Hx(t){return new Zx(t)}function Yx(t){return t[0]}function Xx(t){return t[1]}function Kx(t,e){var n=$x(!0),r=null,i=Hx,o=null,a=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Hd(e)}(s);function s(s){var u,l,c,f=(s=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(s)).length,h=!1;for(null==r&&(o=i(c=a())),u=0;u<=f;++u)!(u<f&&n(l=s[u],u,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,u,s),+e(l,u,s));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?Yx:$x(t),e="function"==typeof e?e:void 0===e?Xx:$x(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:$x(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:$x(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:$x(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}Zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};class Jx{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}const Gx=qx(3);var Qx={draw(t,e){const n=.59436*qx(e+jx(e/28,.75)),r=n/2,i=r*Gx;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},tD={draw(t,e){const n=qx(e/Vx);t.moveTo(n,0),t.arc(0,0,n,0,Wx)}},eD={draw(t,e){const n=qx(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const nD=qx(1/3),rD=2*nD;var iD={draw(t,e){const n=qx(e/rD),r=n*nD;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},oD={draw(t,e){const n=.62625*qx(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},aD={draw(t,e){const n=.87559*qx(e-jx(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},sD={draw(t,e){const n=qx(e),r=-n/2;t.rect(r,r,n,n)}},uD={draw(t,e){const n=.4431*qx(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const lD=Ux(Vx/10)/Ux(7*Vx/10),cD=Ux(Wx/10)*lD,fD=-Lx(Wx/10)*lD;var hD={draw(t,e){const n=qx(.8908130915292852*e),r=cD*n,i=fD*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=Wx*e/5,a=Lx(o),s=Ux(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}};const dD=qx(3);var pD={draw(t,e){const n=-qx(e/(3*dD));t.moveTo(0,2*n),t.lineTo(-dD*n,-n),t.lineTo(dD*n,-n),t.closePath()}};const mD=qx(3);var gD={draw(t,e){const n=.6824*qx(e),r=n/2,i=n*mD/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const yD=-.5,vD=qx(3)/2,wD=1/qx(12),bD=3*(wD/2+1);var _D={draw(t,e){const n=qx(e/bD),r=n/2,i=n*wD,o=r,a=n*wD+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(yD*r-vD*i,vD*r+yD*i),t.lineTo(yD*o-vD*a,vD*o+yD*a),t.lineTo(yD*s-vD*u,vD*s+yD*u),t.lineTo(yD*r+vD*i,yD*i-vD*r),t.lineTo(yD*o+vD*a,yD*a-vD*o),t.lineTo(yD*s+vD*u,yD*u-vD*s),t.closePath()}},xD={draw(t,e){const n=.6189*qx(e-jx(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const DD=[tD,eD,iD,sD,hD,pD,_D],ED=[tD,aD,xD,gD,Qx,uD,oD];function AD(){}function MD(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function SD(t){this._context=t}function CD(t){this._context=t}function kD(t){this._context=t}function FD(t,e){this._basis=new SD(t),this._beta=e}SD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:MD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:MD(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},CD.prototype={areaStart:AD,areaEnd:AD,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:MD(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},kD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:MD(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},FD.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ND=function t(e){function n(t){return 1===e?new SD(t):new FD(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function TD(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function BD(t,e){this._context=t,this._k=(1-e)/6}BD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:TD(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:TD(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zD=function t(e){function n(t){return new BD(t,e)}return n.tension=function(e){return t(+e)},n}(0);function OD(t,e){this._context=t,this._k=(1-e)/6}OD.prototype={areaStart:AD,areaEnd:AD,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:TD(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ID=function t(e){function n(t){return new OD(t,e)}return n.tension=function(e){return t(+e)},n}(0);function RD(t,e){this._context=t,this._k=(1-e)/6}RD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:TD(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var PD=function t(e){function n(t){return new RD(t,e)}return n.tension=function(e){return t(+e)},n}(0);function $D(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function LD(t,e){this._context=t,this._alpha=e}LD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:$D(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jD=function t(e){function n(t){return e?new LD(t,e):new BD(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function UD(t,e){this._context=t,this._alpha=e}UD.prototype={areaStart:AD,areaEnd:AD,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:$D(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qD=function t(e){function n(t){return e?new UD(t,e):new OD(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function VD(t,e){this._context=t,this._alpha=e}VD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$D(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var WD=function t(e){function n(t){return e?new VD(t,e):new RD(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ZD(t){this._context=t}function HD(t){return t<0?-1:1}function YD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(HD(o)+HD(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function XD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function KD(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function JD(t){this._context=t}function GD(t){this._context=new QD(t)}function QD(t){this._context=t}function tE(t){this._context=t}function eE(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function nE(t,e){this._context=t,this._t=e}function rE(t,e,n){this.k=t,this.x=e,this.y=n}function iE(t,e){t.addResponder({update(n){null!=t.focused||t.selected.size>0?e.style("cursor","pointer"):e.style("cursor","default")}}),e.on("click",(e=>{null!=t.focused?t.selected.has(t.focused)?t.removeSelected(t.focused):t.addSelected(t.focused):t.clearSelected()}))}function oE(t,e,n,r=null){const i=Mp.from(e,(t=>t.x),(t=>t.y)),o=r**2,a=n.node();n.on("mousemove",((n,s)=>{const u=new DOMPointReadOnly(n.clientX,n.clientY).matrixTransform(a.getScreenCTM().inverse()),l=[u.x,u.y],c=i.find(l[0],l[1]),f=e[c].id,h=e[c];let d=f;if(null!=r){(l[0]-h.x)**2+(l[1]-h.y)**2>o&&(d=null)}t.setFocused(d,e[c].element)})).on("mouseleave",((e,n)=>{t.setFocused(null,e.target)}))}function aE(t,e,n,r,i=null){i=null!=i?"."+i:"",n.on(`mouseover${i}`,((n,r)=>t.setFocused(e(r),n.target))),r&&r.on(`mouseleave${i}`,((e,n)=>t.setFocused(null,e.target)))}function sE(t,e,n,r,i,o){t.attr(r,(t=>{const r=n(t);return r==e.focused||null==e.focused&&0==e.selected.size||e.selected.has(r)?o(t):i}))}function uE(t,e,n,r,i,o,a="lightgrey",s=null,u="fill"){const l=i.selectAll("path").data(t);null==s&&(s=t=>{const e=[];for(const[n,r]of Object.entries(t.properties))e.push(`<b>${n}:</b> ${r}`);return e.join("<br>")});const c=lE(o);l.on("mouseover.tooltip",((t,e)=>{const n=t.target.getBBox(),r=[n.x+n.width/2,n.y+n.height/2];c.show(s(e),r[0],r[1])})),i.on("mouseleave.tooltip",(()=>c.hide())),r.addResponder({update(t){sE(l,r,e,u,a,n)}}),aE(r,e,l,i),iE(r,o)}function lE(t,e=null){const n=[10,10];t.append("style").text("\n    .svg-tooltip {\n      background-color: rgba(255, 255, 255, 0.7);\n      position: absolute;\n      transform: translate(178px, 410.19px);\n      border-style: solid;\n      border-color: black;\n      border-width: 1px;\n      border-radius: 2px;\n      font-family: sans-serif;\n      font-size: 12px;\n      padding: 8px;\n      visibility: hidden;\n      max-width: 150px;\n  }");const r=t.append("foreignObject").attr("width","100%").attr("height","100%").attr("pointer-events","none").append("xhtml:div").attr("class","svg-tooltip");function i(e,i,o){let a=i+n[0],s=o+n[1];r.html(e),r.style("visibility","visible");const u=t.node().getBBox(),l=r.node().getBoundingClientRect();a>u.width-l.width&&(a=i-l.width-n[0]),s>u.height-l.height&&(s=o-l.height-n[1]),r.style("transform",`translate(${a}px,${s}px)`)}function o(){r.style("visibility","hidden")}return null!=e&&e.on("mouseover",(t=>{const e=Kc(t.target).select("title").text(),n=t.target.getBBox(),r=[n.x+n.width/2,n.y+n.height/2];i(e,r[0],r[1])})).on("mouseleave",(()=>o())),{show:i,hide:o}}ZD.prototype={areaStart:AD,areaEnd:AD,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},JD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:KD(this,this._t0,XD(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,KD(this,XD(this,n=YD(this,t,e)),n);break;default:KD(this,this._t0,n=YD(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(GD.prototype=Object.create(JD.prototype)).point=function(t,e){JD.prototype.point.call(this,e,t)},QD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},tE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=eE(t),i=eE(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},nE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},rE.prototype={constructor:rE,scale:function(t){return 1===t?this:new rE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new rE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},rE.prototype;class cE{constructor(){this.focused=null,this.selected=new Set,this.focusedOld=null,this.selectedOld=new Set,this.responders=[]}addResponder(t){this.responders.push(t)}setFocused(t,e=null){if(t!=this.focused){this.focused=t;for(const t of this.responders)t.update(e)}}addSelected(t,e=null){if(!this.selected.has(t)){this.selected.add(t);for(const t of this.responders)t.update(e)}}removeSelected(t,e=null){if(this.selected.has(t)){this.selected.delete(t);for(const t of this.responders)t.update(e)}}clearSelected(t=null){this.selected.clear();for(const e of this.responders)e.update(t)}}function fE(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function hE(t,e,n){if(1==n)return[255,255,255];if(0==n)return[0,0,0];let r,i,o,a,s,u=Math.cos(2*Math.PI*t),l=Math.sin(2*Math.PI*t),c=function(t){return(t*t+.206*t)/(1.170873786407767*(t+.03))}(n),f=function(t,e,n){let r,i,o=pE(e,n),a=function(t,e,n,r,i,o=null){let a;if(o||(o=pE(t,e)),(n-i)*o[1]-(o[0]-i)*r<=0)a=o[1]*i/(r*o[0]+o[1]*(i-n));else{a=o[1]*(i-1)/(r*(o[0]-1)+o[1]*(i-n));{let o=n-i,s=.3963377774*t+.2158037573*e,u=-.1055613458*t-.0638541728*e,l=-.0894841775*t-1.291485548*e,c=o+r*s,f=o+r*u,h=o+r*l;{let t=i*(1-a)+a*n,e=a*r,o=t+e*s,d=t+e*u,p=t+e*l,m=o*o*o,g=d*d*d,y=p*p*p,v=3*c*o*o,w=3*f*d*d,b=3*h*p*p,_=6*c*c*o,x=6*f*f*d,D=6*h*h*p,E=4.0767416621*m-3.3077115913*g+.2309699292*y-1,A=4.0767416621*v-3.3077115913*w+.2309699292*b,M=A/(A*A-.5*E*(4.0767416621*_-3.3077115913*x+.2309699292*D)),S=-E*M,C=-1.2684380046*m+2.6097574011*g-.3413193965*y-1,k=-1.2684380046*v+2.6097574011*w-.3413193965*b,F=k/(k*k-.5*C*(-1.2684380046*_+2.6097574011*x-.3413193965*D)),N=-C*F,T=-.0041960863*m-.7034186147*g+1.707614701*y-1,B=-.0041960863*v-.7034186147*w+1.707614701*b,z=B/(B*B-.5*T*(-.0041960863*_-.7034186147*x+1.707614701*D)),O=-T*z;S=M>=0?S:1e6,N=F>=0?N:1e6,O=z>=0?O:1e6,a+=Math.min(S,Math.min(N,O))}}}return a}(e,n,t,1,t,o),s=function(t,e,n=null){n||(n=pE(t,e));let r=n[0],i=n[1];return[i/r,i/(1-r)]}(e,n,o),u=.11516993+1/(7.4477897+4.1590124*n+e*(1.75198401*n-2.19557347+e*(-2.13704948-10.02301043*n+e*(5.38770819*n-4.24894561+4.69891013*e)))),l=.11239642+1/(1.6132032-.68124379*n+e*(.40370612+.90148123*n+e*(.6122399*n-.27087943+e*(.00299215-.45399568*n-.14661872*e))));{let e=t*u,n=(1-t)*l;r=.9*(a/Math.min(t*s[0],(1-t)*s[1]))*Math.sqrt(Math.sqrt(1/(1/(e*e*e*e)+1/(n*n*n*n))))}{let e=.4*t,n=.8*(1-t);i=Math.sqrt(1/(1/(e*e)+1/(n*n)))}return[i,r,a]}(c,u,l),h=f[0],d=f[1],p=f[2];e<.8?(i=1.25*e,o=0,a=.8*h,s=1-a/d):(i=5*(e-.8),o=d,a=.2*d*d*1.25*1.25/h,s=1-a/(p-d)),r=o+i*a/(1-s*i);let m=dE(c,r*u,r*l);return[255*mE(m[0]),255*mE(m[1]),255*mE(m[2])]}function dE(t,e,n){let r=t+.3963377774*e+.2158037573*n,i=t-.1055613458*e-.0638541728*n,o=t-.0894841775*e-1.291485548*n,a=r*r*r,s=i*i*i,u=o*o*o;return[4.0767416621*a-3.3077115913*s+.2309699292*u,-1.2684380046*a+2.6097574011*s-.3413193965*u,-.0041960863*a-.7034186147*s+1.707614701*u]}function pE(t,e){let n=function(t,e){let n,r,i,o,a,s,u,l;-1.88170328*t-.80936493*e>1?(n=1.19086277,r=1.76576728,i=.59662641,o=.75515197,a=.56771245,s=4.0767416621,u=-3.3077115913,l=.2309699292):1.81444104*t-1.19445276*e>1?(n=.73956515,r=-.45954404,i=.08285427,o=.1254107,a=.14503204,s=-1.2684380046,u=2.6097574011,l=-.3413193965):(n=1.35733652,r=-.00915799,i=-1.1513021,o=-.50559606,a=.00692167,s=-.0041960863,u=-.7034186147,l=1.707614701);let c=n+r*t+i*e+o*t*t+a*t*e,f=.3963377774*t+.2158037573*e,h=-.1055613458*t-.0638541728*e,d=-.0894841775*t-1.291485548*e;{let t=1+c*f,e=1+c*h,n=1+c*d,r=s*(t*t*t)+u*(e*e*e)+l*(n*n*n),i=s*(3*f*t*t)+u*(3*h*e*e)+l*(3*d*n*n);c-=r*i/(i*i-.5*r*(s*(6*f*f*t)+u*(6*h*h*e)+l*(6*d*d*n)))}return c}(t,e),r=dE(1,n*t,n*e),i=Math.cbrt(1/Math.max(Math.max(r[0],r[1]),r[2]));return[i,i*n]}function mE(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,.4166666666666667)-.055}function gE(t,e=.5,n="okhsl"){const r=fE(t,(t=>t[0])),i=fE(t,(t=>t[1])),o=[(r[0]+r[1])/2,(i[0]+i[1])/2],a=function(t,e){let n;for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);return n}(t.map((t=>vE(t,o)))),s=yE([0,a]),u=yE([0,2*Math.PI]),l=yE([0,a],Array.isArray(e)?e:[e,e]);if("okhsl"==n){let t=hE;return function(e){const n=Math.atan2(e[0]-o[0],e[1]-o[1]),r=vE(e,o);return`rgb(${t(u(n),s(r),l(s(r))).map(Math.round).join(",")})`}}throw Error("Invalid color space ",n)}function yE(t,e=[0,1]){const n=t[1]-t[0],r=e[1]-e[0];return function(i){return r*((i-t[0])/n)+e[0]}}function vE(t,e){let n=0;for(let r=0;r<t.length;r++)n+=(t[r]-e[r])**2;return Math.sqrt(n)}function wE(t){return null!=t&&!Number.isNaN(t)}function bE(t,e){return+wE(e)-+wE(t)||vu(t,e)}function _E(t,e){return+wE(e)-+wE(t)||wu(t,e)}function xE(t){return null!=t&&""!=`${t}`}function DE(t){return isFinite(t)?t:NaN}function EE(t){return t>0&&isFinite(t)?t:NaN}function AE(t){return t<0&&isFinite(t)?t:NaN}function ME(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof e?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${SE(-a,6)}`:a>9999?`+${SE(a,6)}`:SE(a,4)}-${SE(t.getUTCMonth()+1,2)}-${SE(t.getUTCDate(),2)}${n||r||i||o?`T${SE(n,2)}:${SE(r,2)}${i||o?`:${SE(i,2)}${o?`.${SE(o,3)}`:""}`:""}Z`:""}`;var a}function SE(t,e){return`${t}`.padStart(e,"0")}const CE=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function kE(t,e){return CE.test(t+="")?new Date(t):"function"==typeof e?e(t):e}const FE=1e3,NE=6e4,TE=36e5,BE=864e5,zE=2592e6,OE=[["millisecond",500],["second",FE],["second",3e4],["minute",NE],["minute",18e5],["hour",TE],["hour",432e5],["day",BE],["day",1728e5],["week",6048e5],["month",zE],["month",7776e6],["year",31536e6]],IE=new Map([["second",tw],["minute",ew],["hour",rw],["day",ow],["week",lw],["month",Ew],["year",Mw],["monday",cw],["tuesday",fw],["wednesday",hw],["thursday",dw],["friday",pw],["saturday",mw],["sunday",lw]]),RE=new Map([["second",tw],["minute",nw],["hour",iw],["day",sw],["week",yw],["month",Aw],["year",Sw],["monday",vw],["tuesday",ww],["wednesday",bw],["thursday",_w],["friday",xw],["saturday",Dw],["sunday",yw]]);function PE(t,e){let n=`${t}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let r=1;const i=/^(?:(\d+)\s+)/.exec(n);switch(i&&(n=n.slice(i[0].length),r=+i[1]),n){case"quarter":n="month",r*=3;break;case"half":n="month",r*=6}let o=e.get(n);if(!o)throw new Error(`unknown interval: ${t}`);if(!(r>1))return o;if(!o.every)throw new Error(`non-periodic interval: ${n}`);return o.every(r)}function $E(t){return PE(t,IE)}function LE(t){return PE(t,RE)}function jE(t,e,n,r){const i="time"===t.type?Rw:Pw,o="left"===r||"right"===r?(t,e)=>`\n${t}\n${e}`:"top"===r?(t,e)=>`${e}\n${t}`:(t,e)=>`${t}\n${e}`;switch(function(t,e,n){const r=hl(function(t,e=ml){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}(e,((t,e)=>Math.abs(e-t)||NaN)));if(r>0)return OE[bu((([,t])=>t)).right(OE,r,1,OE.length)-1][0];const[i,o]=Nu(t.domain()),a="number"==typeof n?n:10,s=Math.abs(o-i)/a;return OE[bu((([,t])=>Math.log(t))).center(OE,Math.log(s))][0]}(t,e,n)){case"millisecond":return UE(i(".%L"),i(":%M:%S"),o);case"second":return UE(i(":%S"),i("%-I:%M"),o);case"minute":return UE(i("%-I:%M"),i("%p"),o);case"hour":return UE(i("%-I %p"),i("%b %-d"),o);case"day":case"week":return UE(i("%-d"),i("%b"),o);case"month":return UE(i("%b"),i("%Y"),o);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function UE(t,e,n){return(r,i,o)=>{const a=t(r,i),s=e(r,i),u=i-ZA(o);return i!==u&&void 0!==o[u]&&s===e(o[u],u)?a:n(a,s)}}const qE=Object.getPrototypeOf(Uint8Array),VE=Object.prototype.toString;function WE(t,e,n){const r=typeof e;return"string"===r?ZE(t,XE(e),n):"function"===r?ZE(t,e,n):"number"===r||e instanceof Date||"boolean"===r?dA(t,rA(e),n):HE("function"==typeof e?.transform?e.transform(t):e,n)}function ZE(t,e,n){return dA(t,n?.prototype instanceof qE?function(t){return(e,n)=>oA(t(e,n))}(e):e,n)}function HE(t,e){return void 0===e?hA(t):t instanceof e?t:e.prototype instanceof qE&&!(t instanceof qE)?e.from(t,oA):e.from(t)}const YE=[null],XE=t=>e=>e[t],KE={transform:_A},JE={transform:t=>t},GE=()=>!0,QE=t=>null==t?t:`${t}`,tA=t=>null==t?t:+t,eA=t=>t?t[0]:void 0,nA=t=>t?t[1]:void 0,rA=t=>()=>t;function iA(t){return t instanceof qE?t:dA(t,oA,Float64Array)}function oA(t){return null==t?NaN:Number(t)}function aA(t){return dA(t,sA)}function sA(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?kE(t):null==t||isNaN(t=+t)?void 0:new Date(t)}function uA(t,e){return void 0===t&&(t=e),null===t?[void 0,"none"]:LA(t)?[void 0,t]:[t,void 0]}function lA(t,e){return void 0===t&&(t=e),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function cA(t,e,n){if(null!=t)return fA(t,e,n)}function fA(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function hA(t){return null==t||t instanceof Array||t instanceof qE?t:Array.from(t)}function dA(t,e,n=Array){return null==t?t:t instanceof n?t.map(e):n.from(t,e)}function pA(t,e=Array){return t instanceof e?t.slice():e.from(t)}function mA(t){return t?.toString===VE}function gA(t){return mA(t)&&(void 0!==t.type||void 0!==t.domain)}function yA(t){return mA(t)&&"function"!=typeof t.transform}function vA(t){return yA(t)&&void 0===t.value&&void 0===t.channel}function wA(t,e){return void 0===t&&void 0===e?[eA,nA]:[t,e]}function bA({z:t,fill:e,stroke:n}={}){return void 0===t&&([t]=uA(e)),void 0===t&&([t]=uA(n)),t}function _A(t){const e=t.length,n=new Uint32Array(e);for(let t=0;t<e;++t)n[t]=t;return n}function xA(t,e){return dA(e,(e=>t[e]))}function DA(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function EA(t){return null!==t&&"object"==typeof t?t.valueOf():t}function AA(t){let e;return[{transform:()=>e,label:SA(t)},t=>e=t]}function MA(t){return null==t?[t]:AA(t)}function SA(t,e){return"string"==typeof t?t:t&&void 0!==t.label?t.label:e}function CA(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return IA(r)||IA(i)?dA(r,((t,e)=>new Date((+r[e]+ +i[e])/2))):dA(r,((t,e)=>(+r[e]+ +i[e])/2),Float64Array)},label:t.label}}function kA(t,e){const n=FA(t,e);return n&&(t=>wE(t)?n.floor(t):t)}function FA(t,e){if(null!=t){if("number"==typeof t){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:t=>Math.floor(t*e)/e,offset:t=>(t*e+1)/e,range:(t,n)=>gl(Math.ceil(t*e),n*e).map((t=>t/e))}:{floor:t=>Math.floor(t/e)*e,offset:t=>t+e,range:(t,n)=>gl(Math.ceil(t/e),n/e).map((t=>t*e))}}if("string"==typeof t)return("time"===e?$E:LE)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function NA(t,e){if((t=FA(t,e))&&"function"!=typeof t.range)throw new Error("invalid interval: missing range method");return t}function TA(t){return void 0===t||yA(t)?t:{value:t}}function BA(t){return t&&"function"==typeof t[Symbol.iterator]}function zA(t){for(const e of t)if(null!=e)return"object"!=typeof e||e instanceof Date}function OA(t){for(const e of t){if(null==e)continue;const t=typeof e;return"string"===t||"boolean"===t}}function IA(t){for(const e of t)if(null!=e)return e instanceof Date}function RA(t){for(const e of t)if(null!=e)return"string"==typeof e&&isNaN(e)&&kE(e)}function PA(t){for(const e of t)if(null!=e){if("string"!=typeof e)return!1;if(e.trim())return!isNaN(e)}}function $A(t,e){let n;for(const r of t)if(null!=r){if(!e(r))return!1;n=!0}return n}function LA(t){return"string"==typeof t&&("none"===(t=t.toLowerCase().trim())||"currentcolor"===t||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||null!==gf(t))}function jA(t){return"number"==typeof t&&(0<=t&&t<=1||isNaN(t))}function UA(t){return null==t||qA(t)}function qA(t){return/^\s*none\s*$/i.test(t)}function VA(t,e){return cA(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function WA(t="middle"){return VA(t,"frameAnchor")}function ZA(t){if(null==t)return;return wu(t[0],t[t.length-1])}function HA(t){return BA(t)?function(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,(t=>{const{name:n}=t;if(null==n)throw new Error("missing name");const r=`${n}`;if("__proto__"===r)throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[n,t]})))}(t):t}const YA=Symbol("position"),XA=Symbol("color"),KA=Symbol("radius"),JA=Symbol("length"),GA=Symbol("opacity"),QA=Symbol("symbol"),tM=Symbol("projection"),eM=new Map([["x",YA],["y",YA],["fx",YA],["fy",YA],["r",KA],["color",XA],["opacity",GA],["symbol",QA],["length",JA],["projection",tM]]);const nM=2/Math.sqrt(3),rM=new Map([["asterisk",Qx],["circle",tD],["cross",eD],["diamond",iD],["diamond2",oD],["hexagon",{draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*nM,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}}],["plus",aD],["square",sD],["square2",uD],["star",hD],["times",xD],["triangle",pD],["triangle2",gD],["wye",_D]]);function iM(t){return t&&"function"==typeof t.draw}function oM(t){return!!iM(t)||"string"==typeof t&&rM.has(t.toLowerCase())}function aM(t){if(null==t||iM(t))return t;const e=rM.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function sM({filter:t,sort:e,reverse:n,transform:r,initializer:i,...o}={},a){if(void 0===r&&(null!=t&&(r=hM(t)),null==e||vA(e)||(r=lM(r,pM(e))),n&&(r=lM(r,dM))),null!=a&&null!=i)throw new Error("transforms cannot be applied after initializers");return{...o,...(null===e||vA(e))&&{sort:e},transform:lM(r,a)}}function uM({filter:t,sort:e,reverse:n,initializer:r,...i}={},o){return void 0===r&&(null!=t&&(r=hM(t)),null==e||vA(e)||(r=cM(r,pM(e))),n&&(r=cM(r,dM))),{...i,...(null===e||vA(e))&&{sort:e},initializer:cM(r,o)}}function lM(t,e){return null==t?null===e?void 0:e:null==e?null===t?void 0:t:function(n,r,i){return({data:n,facets:r}=t.call(this,n,r,i)),e.call(this,hA(n),r,i)}}function cM(t,e){return null==t?null===e?void 0:e:null==e?null===t?void 0:t:function(n,r,i,...o){let a,s,u,l,c,f;return({data:s=n,facets:u=r,channels:a}=t.call(this,n,r,i,...o)),({data:c=s,facets:f=u,channels:l}=e.call(this,s,u,{...i,...a},...o)),{data:c,facets:f,channels:{...a,...l}}}}function fM(t,e){return(null!=t.initializer?uM:sM)(t,e)}function hM(t){return(e,n)=>{const r=WE(e,t);return{data:e,facets:n.map((t=>t.filter((t=>r[t]))))}}}function dM(t,e){return{data:t,facets:e.map((t=>t.slice().reverse()))}}function pM(t){return("function"==typeof t&&1!==t.length?mM:gM)(t)}function mM(t){return(e,n)=>{const r=(n,r)=>t(e[n],e[r]);return{data:e,facets:n.map((t=>t.slice().sort(r)))}}}function gM(t){let e,n;({channel:e,value:t,order:n}={...TA(t)});const r=e?.startsWith("-");if(r&&(e=e.slice(1)),void 0===n&&(n=r?_E:bE),"function"!=typeof n)switch(`${n}`.toLowerCase()){case"ascending":n=bE;break;case"descending":n=_E;break;default:throw new Error(`invalid order: ${n}`)}return(r,i,o)=>{let a;if(void 0===e)a=WE(r,t);else{if(void 0===o)throw new Error("channel sort requires an initializer");if(a=o[e],!a)return{};a=a.value}const s=(t,e)=>n(a[t],a[e]);return{data:r,facets:i.map((t=>t.slice().sort(s)))}}}function yM(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function vM(t,e,n,r=wM){let i;mA(e)&&"reduce"in e&&(i=e.scale,e=e.reduce);const o=r(t,e,n),[a,s]=AA(o.label);let u;return{name:t,output:void 0===i?a:{value:a,scale:i},initialize(t){o.initialize(t),u=s([])},scope(t,e){o.scope(t,e)},reduce(t,e){u.push(o.reduce(t,e))}}}function wM(t,e,n,r=_M){const i=function(t,e){if(void 0!==e[t])return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y"}return e[t]}(t,n),o=r(e,i);let a,s;return{label:SA(o===kM?null:i,o.label),initialize(t){a=void 0===i?t:WE(t,i),"data"===o.scope&&(s=o.reduceIndex(_A(t),a))},scope(t,e){o.scope===t&&(s=o.reduceIndex(e,a))},reduce:(t,e)=>null==o.scope?o.reduceIndex(t,a,e):o.reduceIndex(t,a,s,e)}}function bM(t,e){return e?Vu(Lu(t,(t=>e[t])),eA):[[,t]]}function _M(t,e,n=xM){if(null==t)return n(t);if("function"==typeof t.reduceIndex)return t;if("function"==typeof t.reduce&&mA(t))return function(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}(t);if("function"==typeof t)return function(t){return{reduceIndex:(e,n,r)=>t(xA(n,e),r)}}(t);if(/^p\d{2}$/i.test(t))return DM(function(t){const e=+`${t}`.slice(1)/100;return(t,n)=>sl(t,e,n)}(t));switch(`${t}`.toLowerCase()){case"first":return MM;case"last":return CM;case"identity":return AM;case"count":return kM;case"distinct":return FM;case"sum":return null==e?kM:NM;case"proportion":return TM(e,"data");case"proportion-facet":return TM(e,"facet");case"deviation":return DM(Fu);case"min":return DM(rl);case"min-index":return DM(il);case"max":return DM(el);case"max-index":return DM(nl);case"mean":return EM(fl);case"median":return EM(hl);case"variance":return DM(ku);case"mode":return DM(pl)}return n(t)}function xM(t){throw new Error(`invalid reduce: ${t}`)}function DM(t){return{reduceIndex:(e,n)=>t(e,(t=>n[t]))}}function EM(t){return{reduceIndex(e,n){const r=t(e,(t=>n[t]));return IA(n)?new Date(r):r}}}const AM={reduceIndex:(t,e)=>xA(e,t)},MM={reduceIndex:(t,e)=>e[t[0]]},SM={reduceIndex(t,e){const n=Vu(ju(t,(t=>t.length),(t=>e[t])),nA),r=n.slice(-5).reverse();if(r.length<n.length){const t=n.slice(0,-4);r[4]=[`… ${t.length.toLocaleString("en-US")} more`,yl(t,nA)]}return r.map((([t,e])=>`${t} (${e.toLocaleString("en-US")})`)).join("\n")}},CM={reduceIndex:(t,e)=>e[t[t.length-1]]},kM={label:"Frequency",reduceIndex:t=>t.length},FM={label:"Distinct",reduceIndex(t,e){const n=new zu;for(const r of t)n.add(e[r]);return n.size}},NM=DM(yl);function TM(t,e){return null==t?{scope:e,label:"Frequency",reduceIndex:(t,e,n=1)=>t.length/n}:{scope:e,reduceIndex:(t,e,n=1)=>yl(t,(t=>e[t]))/n}}function BM(t,{scale:e,type:n,value:r,filter:i,hint:o},a){return void 0===o&&"function"==typeof r?.transform&&(o=r.hint),zM(a,{scale:e,type:n,value:WE(t,r),label:SA(r),filter:i,hint:o})}function zM(t,e){const{scale:n,value:r}=e;if(!0===n||"auto"===n)switch(t){case"fill":case"stroke":case"color":e.scale=!0!==n&&$A(r,LA)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=!0!==n&&$A(r,jA)?null:"opacity";break;case"symbol":!0!==n&&$A(r,oM)?(e.scale=null,e.value=dA(r,aM)):e.scale="symbol";break;default:e.scale=eM.has(t)?t:null}else if(!1===n)e.scale=null;else if(null!=n&&!eM.has(n))throw new Error(`unknown scale: ${n}`);return e}function OM(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function IM(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let e=0;e<n.length;++e){const o=r[n[e][0]];for(const n of t[e])i[n]=o}return e}function RM(t,e,n){const r=PM(t,e);return dA(PM(t,n),((t,e)=>Math.abs(t-r[e])),Float64Array)}function PM(t,e,n){let r=t[e];if(r||void 0===n||(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function $M(t){if(null==t||"function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"ascending":return LM;case"descending":return jM}throw new Error(`invalid order: ${t}`)}function LM([t,e],[n,r]){return bE(e,r)||bE(t,n)}function jM([t,e],[n,r]){return _E(e,r)||bE(t,n)}function UM(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return null===n.source?null:n}}const qM=function(t){let e,n;return(...r)=>((n?.length!==r.length||n.some(((t,e)=>t!==r[e])))&&(n=r,e=t(...r)),e)}((t=>new Intl.NumberFormat(t)));function VM(t){return ME(t,"Invalid Date")}const WM=function(t="en-US"){const e=function(t="en-US"){const e=qM(t);return t=>null==t||isNaN(t)?void 0:e.format(t)}(t);return t=>(t instanceof Date?VM:"number"==typeof t?e:QE)(t)}();let ZM=0;function HM(t){console.warn(t),++ZM}const YM=("undefined"!=typeof window?window.devicePixelRatio>1:"undefined"==typeof it)?0:.5;let XM=0;function KM(){return"plot-clip-"+ ++XM}function JM(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:s,fillOpacity:u,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:y,mixBlendMode:v,imageFilter:w,paintOrder:b,pointerEvents:_,shapeRendering:x,channels:D},{ariaLabel:E,fill:A="currentColor",fillOpacity:M,stroke:S="none",strokeOpacity:C,strokeWidth:k,strokeLinecap:F,strokeLinejoin:N,strokeMiterlimit:T,paintOrder:B}){null===A&&(s=null,u=null),null===S&&(l=null,f=null),UA(A)?UA(S)||UA(s)&&!D?.fill||(S="none"):!UA(S)||UA(l)&&!D?.stroke||(A="none");const[z,O]=uA(s,A),[I,R]=lA(u,M),[P,$]=uA(l,S),[L,j]=lA(f,C),[U,q]=lA(y);qA($)||(void 0===c&&(c=k),void 0===d&&(d=F),void 0===h&&(h=N),void 0!==p||/^\s*round\s*$/i.test(h)||(p=T),qA(O)||void 0!==b||(b=B));const[V,W]=lA(c);return null!==A&&(t.fill=lS(O,"currentColor"),t.fillOpacity=cS(R,1)),null!==S&&(t.stroke=lS($,"none"),t.strokeWidth=cS(W,1),t.strokeOpacity=cS(j,1),t.strokeLinejoin=lS(h,"miter"),t.strokeLinecap=lS(d,"butt"),t.strokeMiterlimit=cS(p,4),t.strokeDasharray=lS(m,"none"),t.strokeDashoffset=lS(g,"0")),t.target=QE(a),t.ariaLabel=QE(E),t.ariaDescription=QE(i),t.ariaHidden=QE(o),t.opacity=cS(q,1),t.mixBlendMode=lS(v,"normal"),t.imageFilter=lS(w,"none"),t.paintOrder=lS(b,"normal"),t.pointerEvents=lS(_,"auto"),t.shapeRendering=lS(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:z,scale:"auto",optional:!0},fillOpacity:{value:I,scale:"auto",optional:!0},stroke:{value:P,scale:"auto",optional:!0},strokeOpacity:{value:L,scale:"auto",optional:!0},strokeWidth:{value:V,optional:!0},opacity:{value:U,scale:"auto",optional:!0}}}function GM(t,e){e&&t.text((t=>WM(e[t])))}function QM(t,e){e&&t.text((([t])=>WM(e[t])))}function tS(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:c,href:f}){r&&sS(t,"aria-label",(t=>r[t])),o&&sS(t,"fill",(t=>o[t])),a&&sS(t,"fill-opacity",(t=>a[t])),s&&sS(t,"stroke",(t=>s[t])),u&&sS(t,"stroke-opacity",(t=>u[t])),l&&sS(t,"stroke-width",(t=>l[t])),c&&sS(t,"opacity",(t=>c[t])),f&&aS(t,(t=>f[t]),e),n||function(t,e){e&&t.filter((t=>xE(e[t]))).append("title").call(GM,e)}(t,i)}function eS(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:c,href:f}){r&&sS(t,"aria-label",(([t])=>r[t])),o&&sS(t,"fill",(([t])=>o[t])),a&&sS(t,"fill-opacity",(([t])=>a[t])),s&&sS(t,"stroke",(([t])=>s[t])),u&&sS(t,"stroke-opacity",(([t])=>u[t])),l&&sS(t,"stroke-width",(([t])=>l[t])),c&&sS(t,"opacity",(([t])=>c[t])),f&&aS(t,(([t])=>f[t]),e),n||function(t,e){e&&t.filter((([t])=>xE(e[t]))).append("title").call(QM,e)}(t,i)}function*nS(t,e,n,r){const{z:i}=n,{z:o}=r,a=function({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:s,href:u},{tip:l}){return[t,l?void 0:e,n,r,i,o,a,s,u].filter((t=>void 0!==t))}(r,n),s=[...e,...a];for(const e of o?function(t,e,n){const r=Lu(t,(t=>e[t]));return void 0===n&&r.size>1+t.length>>1&&HM("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}(t,o,i):[t]){let t,n;t:for(const r of e){for(const t of s)if(!wE(t[r])){n&&n.push(-1);continue t}if(void 0!==t){n.push(r);for(let e=0;e<a.length;++e){if(EA(a[e][r])!==t[e]){yield n,t=a.map((t=>EA(t[r]))),n=[r];continue t}}}else n&&(yield n),t=a.map((t=>EA(t[r]))),n=[r]}n&&(yield n)}}function rS(t){return!0===t?t="frame":!1===t?t=null:null!=t&&(t=fA(t,"clip",["frame","sphere"])),t}function iS(t,e,n,r){!function(t,e,n,r){let i;const{clip:o=r.clip}=e;switch(o){case"frame":{const{width:e,height:o,marginLeft:a,marginRight:s,marginTop:u,marginBottom:l}=n,c=KM();i=`url(#${c})`,t=gS("svg:g",r).call((t=>t.append("svg:clipPath").attr("id",c).append("rect").attr("x",a).attr("y",u).attr("width",e-s-a).attr("height",o-u-l))).each((function(){this.appendChild(t.node()),t.node=()=>this}));break}case"sphere":{const{projection:e}=r;if(!e)throw new Error('the "sphere" clip option requires a projection');const n=KM();i=`url(#${n})`,t.append("clipPath").attr("id",n).append("path").attr("d",oy(e)({type:"Sphere"}));break}}sS(t,"aria-label",e.ariaLabel),sS(t,"aria-description",e.ariaDescription),sS(t,"aria-hidden",e.ariaHidden),sS(t,"clip-path",i)}(t,e,n,r),sS(t,"fill",e.fill),sS(t,"fill-opacity",e.fillOpacity),sS(t,"stroke",e.stroke),sS(t,"stroke-width",e.strokeWidth),sS(t,"stroke-opacity",e.strokeOpacity),sS(t,"stroke-linejoin",e.strokeLinejoin),sS(t,"stroke-linecap",e.strokeLinecap),sS(t,"stroke-miterlimit",e.strokeMiterlimit),sS(t,"stroke-dasharray",e.strokeDasharray),sS(t,"stroke-dashoffset",e.strokeDashoffset),sS(t,"shape-rendering",e.shapeRendering),sS(t,"filter",e.imageFilter),sS(t,"paint-order",e.paintOrder);const{pointerEvents:i=(!1===r.pointerSticky?"none":void 0)}=e;sS(t,"pointer-events",i)}function oS(t,e){!function(t,e,n){null!=n&&t.style(e,n)}(t,"mix-blend-mode",e.mixBlendMode),sS(t,"opacity",e.opacity)}function aS(t,e,n){t.each((function(t){const r=e(t);if(null!=r){const t=this.ownerDocument.createElementNS($l.svg,"a");t.setAttribute("fill","inherit"),t.setAttributeNS($l.xlink,"href",r),null!=n&&t.setAttribute("target",n),this.parentNode.insertBefore(t,this).appendChild(this)}}))}function sS(t,e,n){null!=n&&t.attr(e,n)}function uS(t,e,{x:n,y:r},i=YM,o=YM){i+=e.dx,o+=e.dy,n?.bandwidth&&(i+=n.bandwidth()/2),r?.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&t.attr("transform",`translate(${i},${o})`)}function lS(t,e){if((t=QE(t))!==e)return t}function cS(t,e){if((t=tA(t))!==e)return t}const fS=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function hS(t){if(void 0===t)return"plot-d6a7b5";if(t=`${t}`,!fS.test(t))throw new Error(`invalid class name: ${t}`);return t}function dS(t,e){if("string"==typeof e)t.property("style",e);else if(null!=e)for(const n of t)Object.assign(n.style,e)}function pS({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-i:(a+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-o:(r+n-o)/2]}function mS(t={}){const{document:e=("undefined"!=typeof window?window.document:void 0),clip:n}=t;return{document:e,clip:rS(n)}}function gS(t,{document:e}){return Kc(ql(t).call(e.documentElement))}const yS=Math.PI,vS=2*yS,wS=.618;function bS({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:o=e}={},a){if(null==t)return;if("function"==typeof t.stream)return t;let s,u,l="frame";if(mA(t)){let e;if(({type:t,domain:u,inset:e,insetTop:n=(void 0!==e?e:n),insetRight:r=(void 0!==e?e:r),insetBottom:i=(void 0!==e?e:i),insetLeft:o=(void 0!==e?e:o),clip:l=l,...s}=t),null==t)return}"function"!=typeof t&&({type:t}=_S(t));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:p,marginBottom:m}=a,g=c-h-d-o-r,y=f-p-m-n-i;if(t=t?.({width:g,height:y,clip:l,...s}),null==t)return;l=function(t,e,n,r,i){if(!1===t||null==t||"number"==typeof t)return t=>t;!0===t&&(t="frame");if("frame"===`${t}`.toLowerCase())return Gm(e,n,r,i);throw new Error(`unknown projection clip type: ${t}`)}(l,h,p,c-d,f-m);let v,w=h+o,b=p+n;if(null!=u){const[[e,n],[r,i]]=oy(t).bounds(u),o=Math.min(g/(r-e),y/(i-n));o>0?(w-=(o*(e+r)-g)/2,b-=(o*(n+i)-y)/2,v=ay({point(t,e){this.stream.point(t*o+w,e*o+b)}})):HM("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??=0===w&&0===b?ES():ay({point(t,e){this.stream.point(t+w,e+b)}}),{stream:e=>t.stream(v.stream(l(e)))}}function _S(t){switch(`${t}`.toLowerCase()){case"albers-usa":return xS(Ay,.7463,.4673);case"albers":return DS(Ey,.7463,.4673);case"azimuthal-equal-area":return xS(ky,4,4);case"azimuthal-equidistant":return xS(Ny,vS,vS);case"conic-conformal":return DS(Ry,vS,vS);case"conic-equal-area":return DS(Dy,6.1702,2.9781);case"conic-equidistant":return DS(jy,7.312,3.6282);case"equal-earth":return xS(Yy,5.4133,2.6347);case"equirectangular":return xS($y,vS,yS);case"gnomonic":return xS(Ky,3.4641,3.4641);case"identity":return{type:ES};case"reflect-y":return{type:AS};case"mercator":return xS(By,vS,vS);case"orthographic":return xS(Gy,2,2);case"stereographic":return xS(tv,2,2);case"transverse-mercator":return xS(nv,vS,vS);default:throw new Error(`unknown projection type: ${t}`)}}function xS(t,e,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:s})=>{const u=t();return null!=a&&u.precision?.(a),null!=o&&u.rotate?.(o),"number"==typeof s&&u.clipAngle?.(s),u.scale(Math.min(r/e,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/e}}function DS(t,e,n){const{type:r,aspectRatio:i}=xS(t,e,n);return{type:t=>{const{parallels:e,domain:n,width:i,height:o}=t,a=r(t);return null!=e&&(a.parallels(e),void 0===n&&a.fitSize([i,o],{type:"Sphere"})),a},aspectRatio:i}}const ES=rA({stream:t=>t}),AS=rA(ay({point(t,e){this.stream.point(t,-e)}}));function MS(t,e,n,r){const i=n[t],o=n[e],a=i.length,s=n[t]=new Float64Array(a).fill(NaN),u=n[e]=new Float64Array(a).fill(NaN);let l;const c=r.stream({point(t,e){s[l]=t,u[l]=e}});for(l=0;l<a;++l)c.point(i[l],o[l])}function SS({projection:t}={}){return null!=t&&("function"==typeof t.stream||(mA(t)&&(t=t.type),null!=t))}function CS(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},o={point(t,r){e.push(t),n.push(r)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const e of t.value)Em(e,o);return[r,i]}const kS=new Map([["accent",d_],["category10",h_],["dark2",p_],["paired",m_],["pastel1",g_],["pastel2",y_],["set1",v_],["set2",w_],["set3",b_],["tableau10",__]]);const FS=new Map([...kS,["brbg",TS(D_,E_)],["prgn",TS(A_,M_)],["piyg",TS(S_,C_)],["puor",TS(k_,F_)],["rdbu",TS(N_,T_)],["rdgy",TS(B_,z_)],["rdylbu",TS(O_,I_)],["rdylgn",TS(R_,P_)],["spectral",TS($_,L_)],["burd",BS(N_,T_)],["buylrd",BS(O_,I_)],["blues",NS(fx,hx)],["greens",NS(dx,px)],["greys",NS(mx,gx)],["oranges",NS(_x,xx)],["purples",NS(yx,vx)],["reds",NS(wx,bx)],["turbo",zS(Bx)],["viridis",zS(Ox)],["magma",zS(Ix)],["inferno",zS(Rx)],["plasma",zS(Px)],["cividis",zS(Dx)],["cubehelix",zS(Ex)],["warm",zS(Ax)],["cool",zS(Mx)],["bugn",NS(j_,U_)],["bupu",NS(q_,V_)],["gnbu",NS(W_,Z_)],["orrd",NS(H_,Y_)],["pubu",NS(J_,G_)],["pubugn",NS(X_,K_)],["purd",NS(Q_,tx)],["rdpu",NS(ex,nx)],["ylgn",NS(ox,ax)],["ylgnbu",NS(rx,ix)],["ylorbr",NS(sx,ux)],["ylorrd",NS(lx,cx)],["rainbow",OS(Cx)],["sinebow",OS(Tx)]]);function NS(t,e){return({length:n})=>1===n?[t[3][1]]:2===n?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)))>9?$h(e,n):t[n]}function TS(t,e){return({length:n})=>2===n?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)))>11?$h(e,n):t[n]}function BS(t,e){return({length:n})=>2===n?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)))>11?$h((t=>e(1-t)),n):t[n].slice().reverse()}function zS(t){return({length:e})=>$h(t,Math.max(2,Math.floor(e)))}function OS(t){return({length:e})=>$h(t,Math.floor(e)+1).slice(0,-1)}function IS(t){const e=`${t}`.toLowerCase();if(!FS.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return FS.get(e)}function RS(t,e){const n=IS(t),r="function"==typeof n?n({length:e}):n;return r.length!==e?r.slice(0,e):r}const PS=new Map([["brbg",E_],["prgn",M_],["piyg",C_],["puor",F_],["rdbu",T_],["rdgy",z_],["rdylbu",I_],["rdylgn",P_],["spectral",L_],["burd",t=>T_(1-t)],["buylrd",t=>I_(1-t)],["blues",hx],["greens",px],["greys",gx],["purples",vx],["reds",bx],["oranges",xx],["turbo",Bx],["viridis",Ox],["magma",Ix],["inferno",Rx],["plasma",Px],["cividis",Dx],["cubehelix",Ex],["warm",Ax],["cool",Mx],["bugn",U_],["bupu",V_],["gnbu",Z_],["orrd",Y_],["pubugn",K_],["pubu",G_],["purd",tx],["rdpu",nx],["ylgnbu",ix],["ylgn",ax],["ylorbr",ux],["ylorrd",cx],["rainbow",Cx],["sinebow",Tx]]);function $S(t){const e=`${t}`.toLowerCase();if(!PS.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return PS.get(e)}const LS=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);const jS=t=>e=>t(1-e),US=[0,1],qS=new Map([["number",bh],["rgb",ph],["hsl",zh],["hcl",Oh],["lab",function(t,e){var n=dh((t=Vf(t)).l,(e=Vf(e)).l),r=dh(t.a,e.a),i=dh(t.b,e.b),o=dh(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}]]);function VS(t){const e=`${t}`.toLowerCase();if(!qS.has(e))throw new Error(`unknown interpolator: ${e}`);return qS.get(e)}function WS(t,e,n,{type:r,nice:i,clamp:o,zero:a,domain:s=GS(t,n),unknown:u,round:l,scheme:c,interval:f,range:h=(eM.get(t)===KA?tC(n,s):eM.get(t)===JA?eC(n,s):eM.get(t)===GA?US:void 0),interpolate:d=(eM.get(t)===XA?null==c&&void 0!==h?ph:$S(void 0!==c?c:"cyclical"===r?"rainbow":"turbo"):l?Mh:bh),reverse:p}){if(f=NA(f,r),"cyclical"!==r&&"sequential"!==r||(r="linear"),"function"!=typeof d&&(d=VS(d)),p=!!p,void 0!==h){if((s=hA(s)).length!==(h=hA(h)).length){if(1===d.length)throw new Error("invalid piecewise interpolator");d=Ph(d,h),h=void 0}}if(1===d.length?(p&&(d=jS(d),p=!1),void 0===h&&(h=Float64Array.from(s,((t,e)=>e/(s.length-1))),2===h.length&&(h=US)),e.interpolate((h===US?rA:iC)(d))):e.interpolate(d),a){const[t,e]=Nu(s);(t>0||e<0)&&(ZA(s=pA(s))!==Math.sign(t)?s[s.length-1]=0:s[0]=0)}return p&&(s=vl(s)),e.domain(s).unknown(u),i&&(e.nice(function(t,e){return!0===t?void 0:"number"==typeof t?t:function(t,e){if((t=NA(t,e))&&"function"!=typeof t.ceil)throw new Error("invalid interval: missing ceil method");return t}(t,e)}(i,r)),s=e.domain()),void 0!==h&&e.range(h),o&&e.clamp(o),{type:r,domain:s,range:h,scale:e,interpolate:d,interval:f}}function ZS(t,e,{exponent:n=1,...r}){return WS(t,Lv().exponent(n),e,{...r,type:"pow"})}function HS(t,e,{base:n=10,domain:r=nC(e),...i}){return WS(t,Nv().base(n),e,{...i,domain:r})}function YS(t,e,{constant:n=1,...r}){return WS(t,Ov().constant(n),e,r)}function XS(t,e,{range:n,quantiles:r=(void 0===n?5:(n=[...n]).length),n:i=r,scheme:o="rdylbu",domain:a=rC(e),unknown:s,interpolate:u,reverse:l}){return void 0===n&&(n=void 0!==u?$h(u,i):eM.get(t)===XA?RS(o,i):void 0),a.length>0&&(a=jv(a,void 0===n?{length:i}:n).quantiles()),KS(t,e,{domain:a,range:n,reverse:l,unknown:s})}function KS(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=(void 0!==o?$h(o,n.length+1):eM.get(t)===XA?RS(i,n.length+1):void 0),reverse:s}){const u=ZA(n=hA(n));if(!isNaN(u)&&!function(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const r=wu(i,i=t[n]);if(0!==r&&r!==e)return!1}return!0}(n,u))throw new Error(`the ${t} scale has a non-monotonic domain`);return s&&(a=vl(a)),{type:"threshold",scale:Uv(u<0?vl(n):n,void 0===a?[]:a).unknown(r),domain:n,range:a}}function JS(t,e=DE){return t.length?[rl(t,(({value:t})=>void 0===t?t:rl(t,e))),el(t,(({value:t})=>void 0===t?t:el(t,e)))]:[0,1]}function GS(t,e){const n=eM.get(t);return(n===KA||n===GA||n===JA?QS:JS)(e)}function QS(t){return[0,t.length?el(t,(({value:t})=>void 0===t?t:el(t,DE))):1]}function tC(t,e){const n=t.find((({radius:t})=>void 0!==t));if(void 0!==n)return[0,n.radius];const r=sl(t,.5,(({value:t})=>void 0===t?NaN:sl(t,.25,EE))),i=e.map((t=>3*Math.sqrt(t/r))),o=30/el(i);return o<1?i.map((t=>t*o)):i}function eC(t,e){const n=hl(t,(({value:t})=>void 0===t?NaN:hl(t,Math.abs))),r=e.map((t=>12*t/n)),i=60/el(r);return i<1?r.map((t=>t*i)):r}function nC(t){for(const{value:e}of t)if(void 0!==e)for(let n of e){if(n>0)return JS(t,EE);if(n<0)return JS(t,AE)}return[1,10]}function rC(t){const e=[];for(const{value:n}of t)if(void 0!==n)for(const t of n)e.push(t);return e}function iC(t){return(e,n)=>r=>t(e+r*(n-e))}function oC(t,e,n,r,{type:i,nice:o,clamp:a,domain:s=JS(r),unknown:u,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=(eM.get(t)===XA?null==c&&void 0!==f?ph:$S(void 0!==c?c:"rdbu"):bh),reverse:p}){l=+l,s=hA(s);let[m,g]=s;if(s.length>2&&HM(`Warning: the diverging ${t} scale domain contains extra elements.`),wu(m,g)<0&&([m,g]=[g,m],p=!p),m=Math.min(m,l),g=Math.max(g,l),"function"!=typeof d&&(d=VS(d)),void 0!==f&&(d=1===d.length?iC(d)(...f):Ph(d,f)),p&&(d=jS(d)),h){const t=n.apply(l),e=t-n.apply(m),r=n.apply(g)-t;e<r?m=n.invert(t-r):e>r&&(g=n.invert(t+e))}return e.domain([m,l,g]).unknown(u).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:i,domain:[m,g],pivot:l,interpolate:d,scale:e}}function aC(t,e,n){return oC(t,s_(),cC,e,n)}function sC(t,e,{exponent:n=1,...r}){return oC(t,c_().exponent(n=+n),function(t){return.5===t?hC:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),t),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/t)}}(n),e,{...r,type:"diverging-pow"})}function uC(t,e,{base:n=10,pivot:r=1,domain:i=JS(e,r<0?AE:EE),...o}){return oC(t,u_().base(n=+n),fC,e,{domain:i,pivot:r,...o})}function lC(t,e,{constant:n=1,...r}){return oC(t,l_().constant(n=+n),function(t){return{apply:e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),invert:e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}}(n),e,r)}const cC={apply:t=>t,invert:t=>t},fC={apply:Math.log,invert:Math.exp},hC={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function dC(t,e,n,r){return WS(t,e,n,r)}function pC(t,e,n){return dC(t,function(){return rv.apply(i_(Nw,Tw,Mw,Ew,lw,ow,rw,ew,tw,Rw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),e,n)}function mC(t,e,n){return dC(t,function(){return rv.apply(i_(kw,Fw,Sw,Aw,yw,aw,iw,nw,tw,Pw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}(),e,n)}const gC=Symbol("ordinal");function yC(t,e,n,{type:r,interval:i,domain:o,range:a,reverse:s,hint:u}){return i=NA(i,r),void 0===o&&(o=bC(n,i,t)),"categorical"!==r&&r!==gC||(r="ordinal"),s&&(o=vl(o)),e.domain(o),void 0!==a&&("function"==typeof a&&(a=a(o)),e.range(a)),{type:r,domain:o,range:a,scale:e,hint:u,interval:i}}function vC(t,e,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:s,...u}){let l;if(r=NA(r,n),void 0===i&&(i=bC(e,r,t)),eM.get(t)===QA)l=function(t){return{fill:_C(t,"fill"),stroke:_C(t,"stroke")}}(e),o=void 0===o?function(t){return UA(t.fill)?ED:DD}(l):dA(o,aM);else if(eM.get(t)===XA&&(void 0!==o||"ordinal"!==n&&n!==gC||(o=function(t,e="greys"){const n=new Set,[r,i]=RS(e,2);for(const e of t)if(null!=e)if(!0===e)n.add(i);else{if(!1!==e)return;n.add(r)}return[...n]}(i,a),void 0!==o&&(a=void 0)),void 0===a&&void 0===o&&(a="ordinal"===n?"turbo":"tableau10"),void 0!==a))if(void 0!==o){const t=$S(a),e=o[0],n=o[1]-o[0];o=({length:r})=>$h((r=>t(e+n*r)),r)}else o=IS(a);if(s===ov)throw new Error(`implicit unknown on ${t} scale is not supported`);return yC(t,av().unknown(s),e,{...u,type:n,domain:i,range:o,hint:l})}function wC(t,e,n,r){let{round:i}=n;return void 0!==i&&t.round(i=!!i),(t=yC(r,t,e,n)).round=i,t}function bC(t,e,n){const r=new zu;for(const{value:e,domain:n}of t){if(void 0!==n)return n();if(void 0!==e)for(const t of e)r.add(t)}if(void 0!==e){const[t,n]=Nu(r).map(e.floor,e);return e.range(t,e.offset(n))}if(r.size>1e4&&eM.get(n)===YA)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Vu(r,bE)}function _C(t,e){let n;for(const{hint:r}of t){const t=r?.[e];if(void 0!==t)if(void 0===n)n=t;else if(n!==t)return}return n}function xC(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:s,nice:u,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:p=e}={},...m}={}){const g={};for(const[n,y]of t){const t=m[n],v=NC(n,y,{round:eM.get(n)===YA?s:void 0,nice:u,clamp:l,zero:c,align:f,padding:h,projection:d,...t});if(v){let{label:s=("fx"===n||"fy"===n?p:e),percent:u,transform:l,inset:c,insetTop:f=(void 0!==c?c:"y"===n?r:0),insetRight:h=(void 0!==c?c:"x"===n?i:0),insetBottom:d=(void 0!==c?c:"y"===n?o:0),insetLeft:m=(void 0!==c?c:"x"===n?a:0)}=t||{};if(null==l)l=void 0;else if("function"!=typeof l)throw new Error("invalid scale transform; not a function");v.percent=!!u,v.label=void 0===s?EC(y,v):s,v.transform=l,"x"===n||"fx"===n?(v.insetLeft=+m,v.insetRight=+h):"y"!==n&&"fy"!==n||(v.insetTop=+f,v.insetBottom=+d),g[n]=v}}return g}function DC(t){return Object.fromEntries(Object.entries(t).filter((([,{scale:t}])=>t)).map((([t,{scale:e,type:n,interval:r,label:i}])=>(e.type=n,null!=r&&(e.interval=r),null!=i&&(e.label=i),[t,e]))))}function EC(t=[],e){let n;for(const{label:e}of t)if(void 0!==e)if(void 0===n)n=e;else if(n!==e)return;if(void 0!==n)return!IC(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function AC(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:s,marginRight:u,marginBottom:l,marginLeft:c}}=t;return{marginTop:Math.max(e,s),marginRight:Math.max(n,u),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:o,height:a}}function MC({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:u}=AC(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+i:s,height:e?e.scale.bandwidth()+r+o:u,facet:{width:s,height:u}}}function SC(t,e){if(void 0===t.range){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:o=0,marginRight:a=0}=e,s=o+n,u=i-a-r;t.range=[s,Math.max(s,u)],IC(t)||(t.range=FC(t)),t.scale.range(t.range)}kC(t)}function CC(t,e){if(void 0===t.range){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:o=0,marginBottom:a=0}=e,s=o+n,u=i-a-r;t.range=[Math.max(s,u),s],IC(t)?t.range.reverse():t.range=FC(t),t.scale.range(t.range)}kC(t)}function kC(t){void 0===t.round&&function({type:t}){return"point"===t||"band"===t}(t)&&function({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-i,s=Math.abs(r-n)/Math.max(1,a+2*o);return(s-Math.floor(s))*a}(t)<=30&&t.scale.round(!0)}function FC(t){const e=t.scale.domain().length+RC(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},((t,i)=>n+i/(e-1)*(r-n)))}function NC(t,e=[],n={}){const r=function(t,e,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:s}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==s||(n=BC);for(const{type:t}of e)if(void 0!==t)if(void 0===n)n=t;else if(n!==t)throw new Error(`scale incompatible with channel: ${n} !== ${t}`);if(n===BC)return;if(void 0!==n)return n;if(void 0===r&&!e.some((({value:t})=>void 0!==t)))return;const u=eM.get(t);if(u===KA)return"sqrt";if(u===GA||u===JA)return"linear";if(u===QA)return"ordinal";if((r||i||[]).length>2)return zC(u);if(void 0!==r){if(OA(r))return zC(u);if(IA(r))return"utc"}else{const t=e.map((({value:t})=>t)).filter((t=>void 0!==t));if(t.some(OA))return zC(u);if(t.some(IA))return"utc"}if(u===XA){if(null!=a||function(t){return null!=t&&LS.has(`${t}`.toLowerCase())}(o))return"diverging";if(function(t){return null!=t&&kS.has(`${t}`.toLowerCase())}(o))return"categorical"}return"linear"}(t,e,n);if(void 0===n.type&&void 0===n.domain&&void 0===n.range&&null==n.interval&&"fx"!==t&&"fy"!==t&&IC({type:r})){const n=e.map((({value:t})=>t)).filter((t=>void 0!==t));n.some(IA)?HM(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${TC(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${TC(r)}".`):n.some(RA)?HM(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${TC(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${TC(r)}".`):n.some(PA)&&HM(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${TC(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${TC(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=$C(e,n,iA);break;case"identity":switch(eM.get(t)){case YA:n=$C(e,n,iA);break;case QA:n=$C(e,n,LC)}break;case"utc":case"time":n=$C(e,n,aA)}switch(r){case"diverging":return aC(t,e,n);case"diverging-sqrt":return function(t,e,n){return sC(t,e,{...n,exponent:.5})}(t,e,n);case"diverging-pow":return sC(t,e,n);case"diverging-log":return uC(t,e,n);case"diverging-symlog":return lC(t,e,n);case"categorical":case"ordinal":case gC:return vC(t,e,n);case"cyclical":case"sequential":case"linear":return function(t,e,n){return WS(t,_v(),e,n)}(t,e,n);case"sqrt":return function(t,e,n){return ZS(t,e,{...n,exponent:.5})}(t,e,n);case"threshold":return KS(t,0,n);case"quantile":return XS(t,e,n);case"quantize":return function(t,e,{range:n,n:r=(void 0===n?5:(n=[...n]).length),scheme:i="rdylbu",domain:o=GS(t,e),unknown:a,interpolate:s,reverse:u}){const[l,c]=Nu(o);let f;return void 0===n?(f=Ju(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=void 0!==s?$h(s,r):eM.get(t)===XA?RS(i,r):void 0):(f=$h(bh(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map((t=>new Date(t))))),ZA(hA(o))<0&&f.reverse(),KS(t,0,{domain:f,range:n,reverse:u,unknown:a})}(t,e,n);case"pow":return ZS(t,e,n);case"log":return HS(t,e,n);case"symlog":return YS(t,e,n);case"utc":return mC(t,e,n);case"time":return pC(t,e,n);case"point":return function(t,e,{align:n=.5,padding:r=.5,...i}){return wC(lv().align(n).padding(r),e,i,t)}(t,e,n);case"band":return function(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=("fx"===t||"fy"===t?0:r),...a}){return wC(sv().align(n).paddingInner(i).paddingOuter(o),e,a,t)}(t,e,n);case"identity":return eM.get(t)===YA?{type:"identity",scale:xv()}:{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function TC(t){return"symbol"==typeof t?t.description:t}const BC={toString:()=>"projection"};function zC(t){switch(t){case YA:return"point";case XA:return gC;default:return"ordinal"}}function OC({type:t}){return"time"===t||"utc"===t}function IC({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===gC}function RC({type:t}){return"threshold"===t}function PC(t){if(void 0===t)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function $C(t,{domain:e,...n},r){for(const e of t)void 0!==e.value&&(e.value=r(e.value));return{domain:void 0===e?e:r(e),...n}}function LC(t){return dA(t,aM)}function jC(t){return e=>{if(!eM.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return e in t?function({scale:t,type:e,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:s,pivot:u}){if("identity"===e)return{type:"identity",apply:t=>t,invert:t=>t};const l=t.unknown?t.unknown():void 0;return{type:e,domain:pA(n),...void 0!==r&&{range:pA(r)},...void 0!==a&&{transform:a},...s&&{percent:s},...void 0!==l&&{unknown:l},...void 0!==o&&{interval:o},...void 0!==i&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...void 0!==u&&{pivot:u,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:e=>t(e),...t.invert&&{invert:e=>t.invert(e)}}}(t[e]):void 0}}function UC({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:s,marginRightDefault:u,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=function(t){if("function"==typeof t?.stream)return wS;if(mA(t)&&(t=t.type),null!=t){if("function"!=typeof t){const{aspectRatio:e}=_S(t);if(e)return e}return wS}}(i);if(h){const t=(1.1*f-.1)/(1.1*(r?r.scale.domain().length:1)-.1)*h,e=Math.max(.1,Math.min(10,t));return Math.round((a-c-u)*e+s+l)}const d=e?IC(e)?e.scale.domain().length:Math.max(7,17/f):1;if(null!=o){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const i=qC("y",e)/(qC("x",t)*o),f=r?r.scale.bandwidth():1,h=n?n.scale.bandwidth():1;return(i*(f*(a-c-u)-t.insetLeft-t.insetRight)+e.insetTop+e.insetBottom)/h+s+l}return!(!e&&!n)*Math.max(1,Math.min(60,d*f))*20+30*!!r+60}function qC(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const t=e.scale.exponent();i=e=>Math.pow(e,t);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Nu(r);return Math.abs(i(a)-i(o))}function VC(t,e){const{fx:n,fy:r}=xC(t,e),i=n?.scale.domain(),o=r?.scale.domain();return i&&o?function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(Cu)).map(Mu),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(Su))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}}(i,o).map((([t,e],n)=>({x:t,y:e,i:n}))):i?i.map(((t,e)=>({x:t,i:e}))):o?o.map(((t,e)=>({y:t,i:e}))):void 0}function WC(t,{fx:e,fy:n}){const r=_A(t),i=e?.value,o=n?.value;return e&&n?ju(r,(t=>(t.fx=i[t[0]],t.fy=o[t[0]],t)),(t=>i[t]),(t=>o[t])):e?ju(r,(t=>(t.fx=i[t[0]],t)),(t=>i[t])):ju(r,(t=>(t.fy=o[t[0]],t)),(t=>o[t]))}function ZC(t){const e=[],n=new Uint32Array(yl(t,(t=>t.length)));for(const r of t){let i=0;for(const e of t)r!==e&&(n.set(e,i),i+=e.length);e.push(n.slice(0,i))}return e}const HC=new Map([["top",GC],["right",ek],["bottom",QC],["left",tk],["top-left",nk(GC,tk)],["top-right",nk(GC,ek)],["bottom-left",nk(QC,tk)],["bottom-right",nk(QC,ek)],["top-empty",function(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=KC(e,r);if(o>0)return JC(t,n,e[o-1])}],["right-empty",function(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=KC(e,n);if(o<e.length-1)return JC(t,e[o+1],r)}],["bottom-empty",function(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=KC(e,r);if(o<e.length-1)return JC(t,n,e[o+1])}],["left-empty",function(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=KC(e,n);if(o>0)return JC(t,e[o-1],r)}],["empty",function(t,e,{empty:n}){return n}]]);const YC=new WeakMap;function XC(t){let e=YC.get(t);return e||YC.set(t,e=new Bu(dA(t,((t,e)=>[t,e])))),e}function KC(t,e){return XC(t).get(e)}function JC(t,e,n){return function(t,e,n){return e=EA(e),n=EA(n),t.find((t=>Object.is(EA(t.x),e)&&Object.is(EA(t.y),n)))}(t,e,n)?.empty}function GC(t,{y:e},{y:n}){return!e||0===KC(e,n)}function QC(t,{y:e},{y:n}){return!e||KC(e,n)===e.length-1}function tk(t,{x:e},{x:n}){return!e||0===KC(e,n)}function ek(t,{x:e},{x:n}){return!e||KC(e,n)===e.length-1}function nk(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function rk(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map((({x:t,y:e})=>r.get(t)?.get(e)??[])):e?t.map((({x:t})=>r.get(t)??[])):t.map((({y:t})=>r.get(t)??[]))}class ik{constructor(t,e={},n={},r){const{facet:i="auto",facetAnchor:o,fx:a,fy:s,sort:u,dx:l=0,dy:c=0,margin:f=0,marginTop:h=f,marginRight:d=f,marginBottom:p=f,marginLeft:m=f,clip:g=r?.clip,channels:y,tip:v,render:w}=n;if(this.data=t,this.sort=vA(u)?u:null,this.initializer=uM(n).initializer,this.transform=this.initializer?n.transform:sM(n).transform,null===i||!1===i?this.facet=null:(this.facet=fA(!0===i?"include":i,"facet",["auto","include","exclude","super"]),this.fx=t===YE&&"string"==typeof a?[a]:a,this.fy=t===YE&&"string"==typeof s?[s]:s),this.facetAnchor=function(t){if(null==t)return null;const e=HC.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}(o),e=HA(e),void 0!==y&&(e={...sk(y),...e}),void 0!==r&&(e={...JM(this,n,r),...e}),this.channels=Object.fromEntries(Object.entries(e).map((([e,n])=>{if(yA(n.value)){const{value:t,scale:e=n.scale}=n.value;n={...n,scale:e,value:t}}if(t===YE&&"string"==typeof n.value){const{value:t}=n;n={...n,value:[t]}}return[e,n]})).filter((([t,{value:e,optional:n}])=>{if(null!=e)return!0;if(n)return!1;throw new Error(`missing channel value: ${t}`)}))),this.dx=+l,this.dy=+c,this.marginTop=+h,this.marginRight=+d,this.marginBottom=+p,this.marginLeft=+m,this.clip=rS(g),this.tip=function(t){return!0===t?"xy":!1===t?null:cA(t,"tip",["x","y","xy"])}(v),"super"===this.facet){if(a||s)throw new Error("super-faceting cannot use fx or fy");for(const t in this.channels){const{scale:n}=e[t];if("x"===n||"y"===n)throw new Error("super-faceting cannot use x or y")}}null!=w&&(this.render=ak(w,this.render))}initialize(t,e,n){let r=hA(this.data);void 0===t&&null!=r&&(t=[_A(r)]);const i=t;null!=this.transform&&(({facets:t,data:r}=this.transform(r,t,n)),r=hA(r)),void 0!==t&&(t.original=i);const o=function(t,e){return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,BM(e,n,t)])))}(this.channels,r);return null!=this.sort&&function(t,e,n,r,i){const{order:o,reverse:a,reduce:s=!0,limit:u}=i;for(const l in i){if(!eM.has(l))continue;let{value:c,order:f=o,reverse:h=a,reduce:d=s,limit:p=u}=TA(i[l]);const m=c?.startsWith("-");if(m&&(c=c.slice(1)),f=void 0===f?m!==("width"===c||"height"===c)?jM:LM:$M(f),null==d||!1===d)continue;const g="fx"===l||"fy"===l?IM(e,r[l]):OM(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const y=g.value,[v=0,w=1/0]=BA(p)?p:p<0?[p]:[0,p];if(null==c)g.domain=()=>{let t=Array.from(new zu(y));return h&&(t=t.reverse()),0===v&&w===1/0||(t=t.slice(v,w)),t};else{const e="data"===c?t:"height"===c?RM(n,"y1","y2"):"width"===c?RM(n,"x1","x2"):PM(n,c,"y"===c?"y2":"x"===c?"x2":void 0),r=_M(!0===d?"max":d,e);g.domain=()=>{let t=Uu(_A(y),(t=>r.reduceIndex(t,e)),(t=>y[t]));return f&&t.sort(f),h&&t.reverse(),0===v&&w===1/0||(t=t.slice(v,w)),t.map(eA)}}}}(r,t,o,e,this.sort),{data:r,facets:t,channels:o}}filter(t,e,n){for(const r in e){const{filter:i=wE}=e[r];if(null!==i){const e=n[r];t=t.filter((t=>i(e[t])))}}return t}project(t,e,n){for(const r in t)if("x"===t[r].scale&&/^x|x$/.test(r)){const i=r.replace(/^x|x$/,"y");i in t&&"y"===t[i].scale&&MS(r,i,e,n.projection)}}scale(t,e,n){const r=function(t,e){const n=Object.fromEntries(Object.entries(t).map((([t,{scale:n,value:r}])=>{const i=null==n?null:e[n];return[t,null==i?r:dA(r,i)]})));return n.channels=t,n}(t,e);return n.projection&&this.project(t,r,n),r}}function ok(...t){return t.plot=ik.prototype.plot,t}function ak(t,e){if(null==t)return null===e?void 0:e;if(null==e)return null===t?void 0:t;if("function"!=typeof t)throw new TypeError(`invalid render transform: ${t}`);if("function"!=typeof e)throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,o,a,s){return t.call(this,n,r,i,o,a,((t,n,r,i,o)=>e.call(this,t,n,r,i,o,s)))}}function sk(t){return Object.fromEntries(Object.entries(HA(t)).map((([t,e])=>(void 0===(e=TA(e)).filter&&null==e.scale&&(e={...e,filter:null}),[t,e]))))}function uk(t,e){return!0===t?.tip?{...t,tip:e}:t}const lk=new WeakMap;function ck(t,e,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:s,render:u,...l}={}){return a=+a,null!=i&&(n??=null,s={...s,px:{value:i,scale:"x"}}),null!=o&&(r??=null,s={...s,py:{value:o,scale:"y"}}),{x:n,y:r,channels:s,...l,render:ak((function(n,r,i,o,s,u){const l=(s={...s,pointerSticky:!1}).ownerSVGElement,{data:c}=s.getMarkState(this);let f=lk.get(l);f||lk.set(l,f={sticky:!1,roots:[],renders:[]});let h=f.renders.push(T)-1;const{x:d,y:p,fx:m,fy:g}=r;let y=m?m(n.fx)-o.marginLeft:0,v=g?g(n.fy)-o.marginTop:0;d?.bandwidth&&(y+=d.bandwidth()/2),p?.bandwidth&&(v+=p.bandwidth()/2);const w=null!=n.fi;let b;if(w){let t=f.facetStates;t||(f.facetStates=t=new Map),b=t.get(this),b||t.set(this,b=new Map)}const[_,x]=pS(this,o),{px:D,py:E}=i,A=D?t=>D[t]:pk(i,_),M=E?t=>E[t]:mk(i,x);let S,C,k,F;function N(t,e){if(w){if(F&&(F=cancelAnimationFrame(F)),null!=t)return b.set(n.fi,e),void(F=requestAnimationFrame((()=>{F=null;for(const[r,i]of b)if(i<e||i===e&&r<n.fi){t=null;break}T(t)})));b.delete(n.fi)}T(t)}function T(t){if(S===t&&k===f.sticky)return;S=t,k=s.pointerSticky=f.sticky;const e=null==S?[]:[S];w&&(e.fx=n.fx,e.fy=n.fy,e.fi=n.fi);const a=u(e,r,i,o,s);if(C){if(w){const t=C.parentNode,e=C.getAttribute("transform"),n=a.getAttribute("transform");e?a.setAttribute("transform",e):a.removeAttribute("transform"),n?t.setAttribute("transform",n):t.removeAttribute("transform"),a.removeAttribute("aria-label"),a.removeAttribute("aria-description"),a.removeAttribute("aria-hidden")}C.replaceWith(a)}return f.roots[h]=C=a,null==S&&b?.size>1||s.dispatchValue(null==S?null:c[S]),a}function B(r){if(f.sticky||"mouse"===r.pointerType&&1===r.buttons)return;let[i,s]=function(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}(r);i-=y,s-=v;const u=i<o.marginLeft||i>o.width-o.marginRight?1:t,l=s<o.marginTop||s>o.height-o.marginBottom?1:e;let c=null,h=a*a;for(const t of n){const e=u*(A(t)-i),n=l*(M(t)-s),r=e*e+n*n;r<=h&&(c=t,h=r)}if(null!=c&&(1!==t||1!==e)){const t=A(c)-i,e=M(c)-s;h=t*t+e*e}N(c,h)}return l.addEventListener("pointerenter",B),l.addEventListener("pointermove",B),l.addEventListener("pointerdown",(function(t){"mouse"===t.pointerType&&null!=S&&(f.sticky&&f.roots.some((e=>e?.contains(t.target)))||(f.sticky?(f.sticky=!1,f.renders.forEach((t=>t(null)))):(f.sticky=!0,T(S)),t.stopImmediatePropagation()))})),l.addEventListener("pointerleave",(function(t){"mouse"===t.pointerType&&(f.sticky||N(null))})),T(null)}),u)}}function fk(t){return ck(1,1,t)}function hk(t){return ck(1,.01,t)}function dk(t){return ck(.01,1,t)}function pk({x1:t,x2:e,x:n=t},r){return t&&e?n=>(t[n]+e[n])/2:n?t=>n[t]:()=>r}function mk({y1:t,y2:e,y:n=t},r){return t&&e?n=>(t[n]+e[n])/2:n?t=>n[t]:()=>r}function gk(t){return IC(t)&&void 0===t.interval?void 0:"tabular-nums"}function yk(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:s=0,marginBottom:u=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-s)/64,tickFormat:h,fontVariant:d=gk(t),round:p=!0,opacity:m,className:g}=e;const y=mS(e);g=hS(g),m=lA(m)[1],null===h&&(h=()=>null);const v=gS("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call((t=>t.append("style").text(`.${g}-ramp {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n  overflow: visible;\n}\n.${g}-ramp text {\n  white-space: pre;\n}`))).call(dS,c);let w,b=t=>t.selectAll(".tick line").attr("y1",a+u-o);const _=p?(t,e)=>t.rangeRound(e):(t,e)=>t.range(e),{type:x,domain:D,range:E,interpolate:A,scale:M,pivot:S}=t;if(A){const t=void 0===E?A:Ph(1===A.length?iC(A):A,E);w=_(M.copy(),$h(bh(l,i-s),Math.min(D.length+(void 0!==S),void 0===E?1/0:E.length)));const e=256,n=y.document.createElement("canvas");n.width=e,n.height=1;const r=n.getContext("2d");for(let n=0,i=e-1;n<e;++n)r.fillStyle=t(n/i),r.fillRect(n,0,1,1);v.append("image").attr("opacity",m).attr("x",l).attr("y",a).attr("width",i-l-s).attr("height",o-a-u).attr("preserveAspectRatio","none").attr("xlink:href",n.toDataURL())}else if("threshold"===x){const t=D,e=void 0===h?t=>t:"string"==typeof h?Zp(h):h;w=_(_v().domain([-1,E.length-1]),[l,i-s]),v.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",((t,e)=>w(e-1))).attr("y",a).attr("width",((t,e)=>w(e)-w(e-1))).attr("height",o-a-u).attr("fill",(t=>t)),f=dA(t,((t,e)=>e)),h=n=>e(t[n],n)}else w=_(sv().domain(D),[l,i-s]),v.append("g").attr("fill-opacity",m).selectAll().data(D).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-u).attr("fill",M),b=()=>{};return v.append("g").attr("transform",`translate(0,${o-u})`).call(function(t){return Tl(El,t)}(w).ticks(Array.isArray(f)?null:f,"string"==typeof h?h:void 0).tickFormat("function"==typeof h?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",lS(d,"normal")).call(b).call((t=>t.select(".domain").remove())),void 0!==n&&v.append("text").attr("x",l).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),v.node()}const vk=Math.PI/180;function wk(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=bk(n),t.markerMid=bk(r),t.markerEnd=bk(i)}function bk(t){if(null==t||!1===t)return null;if(!0===t)return Dk;if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return _k("auto");case"arrow-reverse":return _k("auto-start-reverse");case"dot":return xk;case"circle":case"circle-fill":return Dk;case"circle-stroke":return Ek}throw new Error(`invalid marker: ${t}`)}function _k(t){return(e,n)=>gS("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call((t=>t.append("path").attr("d","M-1.5,-3l3,3l-3,3"))).node()}function xk(t,e){return gS("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call((t=>t.append("circle").attr("r",2.5))).node()}function Dk(t,e){return gS("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call((t=>t.append("circle").attr("r",3))).node()}function Ek(t,e){return gS("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call((t=>t.append("circle").attr("r",3))).node()}let Ak=0;function Mk(t,e,{stroke:n},r){return Ck(t,e,n&&(t=>n[t]),r)}function Sk(t,e,{stroke:n},r){return Ck(t,e,n&&(([t])=>n[t]),r)}function Ck(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},o=(()=>i),a){const s=new Map;function u(t){return function(e){const n=o(e);let r=s.get(t);r||s.set(t,r=new Map);let i=r.get(n);if(!i){const e=this.parentNode.insertBefore(t(n,a),this),o="plot-marker-"+ ++Ak;e.setAttribute("id",o),r.set(n,i=`url(#${o})`)}return i}}e&&t.attr("marker-start",u(e)),n&&t.attr("marker-mid",u(n)),r&&t.attr("marker-end",u(r))}function kk({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Nk(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Fk({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Nk(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Nk(t,e,n){return void 0===t&&void 0===e&&void 0===n?YM?[1,0]:[.5,.5]:[e,n]}function Tk(t,{interval:e}){return(t={...TA(t)}).interval=FA(void 0===t.interval?e:t.interval),t}function Bk(t,e,n,r){const{[t]:i,[`${t}1`]:o,[`${t}2`]:a}=n,{value:s,interval:u}=Tk(i,n);if(null==s||null==u&&!r)return n;const l=SA(i);if(null==u){let e;const r={transform:t=>e||(e=WE(t,s)),label:l};return{...n,[t]:void 0,[`${t}1`]:void 0===o?r:o,[`${t}2`]:void 0===a?r:a}}let c,f;function h(t){return void 0!==f&&t===c?f:f=dA(WE(c=t,s),(t=>u.floor(t)))}return e({...n,[t]:void 0,[`${t}1`]:void 0===o?{transform:h,label:l}:o,[`${t}2`]:void 0===a?{transform:t=>h(t).map((t=>u.offset(t))),label:l}:a})}function zk(t,e,n){const{[t]:r}=n,{value:i,interval:o}=Tk(r,n);return null==i||null==o?n:e({...n,[t]:{label:SA(r),transform:t=>{const e=dA(WE(t,i),(t=>o.floor(t))),n=e.map((t=>o.offset(t)));return e.map(IA(e)?(t,e)=>null==t||isNaN(t=+t)||null==(e=n[e])||isNaN(e=+e)?void 0:new Date((t+e)/2):(t,e)=>null==t||null==(e=n[e])?NaN:(+t+ +e)/2)}}})}const Ok={ariaLabel:"rule",fill:null,stroke:"currentColor"};class Ik extends ik{constructor(t,e={}){const{x:n,y1:r,y2:i,inset:o=0,insetTop:a=o,insetBottom:s=o}=e;super(t,{x:{value:n,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},uk(e,"x"),Ok),this.insetTop=tA(a),this.insetBottom=tA(s),wk(this,e)}render(t,e,n,r,i){const{x:o,y:a}=e,{x:s,y1:u,y2:l}=n,{width:c,height:f,marginTop:h,marginRight:d,marginLeft:p,marginBottom:m}=r,{insetTop:g,insetBottom:y}=this;return gS("svg:g",i).call(iS,this,r,i).call(uS,this,{x:s&&o},YM,0).call((e=>e.selectAll().data(t).enter().append("line").call(oS,this).attr("x1",s?t=>s[t]:(p+c-d)/2).attr("x2",s?t=>s[t]:(p+c-d)/2).attr("y1",u&&!PC(a)?t=>u[t]+g:h+g).attr("y2",l&&!PC(a)?a.bandwidth?t=>l[t]+a.bandwidth()-y:t=>l[t]-y:f-m-y).call(tS,this,n).call(Mk,this,n,i))).node()}}class Rk extends ik{constructor(t,e={}){const{x1:n,x2:r,y:i,inset:o=0,insetRight:a=o,insetLeft:s=o}=e;super(t,{y:{value:i,scale:"y",optional:!0},x1:{value:n,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},uk(e,"y"),Ok),this.insetRight=tA(a),this.insetLeft=tA(s),wk(this,e)}render(t,e,n,r,i){const{x:o,y:a}=e,{y:s,x1:u,x2:l}=n,{width:c,height:f,marginTop:h,marginRight:d,marginLeft:p,marginBottom:m}=r,{insetLeft:g,insetRight:y}=this;return gS("svg:g",i).call(iS,this,r,i).call(uS,this,{y:s&&a},0,YM).call((e=>e.selectAll().data(t).enter().append("line").call(oS,this).attr("x1",u&&!PC(o)?t=>u[t]+g:p+g).attr("x2",l&&!PC(o)?o.bandwidth?t=>l[t]+o.bandwidth()-y:t=>l[t]-y:c-d-y).attr("y1",s?t=>s[t]:(h+f-m)/2).attr("y2",s?t=>s[t]:(h+f-m)/2).call(tS,this,n).call(Mk,this,n,i))).node()}}function Pk(t,e){let{x:n=JE,y:r,y1:i,y2:o,...a}=function(t={}){return Bk("y",Fk,t)}(e);return[i,o]=Lk(r,i,o),new Ik(t,{...a,x:n,y1:i,y2:o})}function $k(t,e){let{y:n=JE,x:r,x1:i,x2:o,...a}=function(t={}){return Bk("x",kk,t)}(e);return[i,o]=Lk(r,i,o),new Rk(t,{...a,y:n,x1:i,x2:o})}function Lk(t,e,n){if(null==t){if(void 0===e){if(void 0!==n)return[0,n]}else if(void 0===n)return[0,e]}else{if(void 0===e)return void 0===n?[0,t]:[t,n];if(void 0===n)return[t,e]}return[e,n]}function jk(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)"function"!=typeof e[r]&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let o=0;o<n;++o)i+=e[o](r)+t[o+1];return i}}const Uk={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},qk="­";class Vk extends ik{constructor(t,e={}){const{x:n,y:r,text:i=(BA(t)&&zA(t)?JE:KE),frameAnchor:o,textAnchor:a=(/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle"),lineAnchor:s=(/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle"),lineHeight:u=1,lineWidth:l=1/0,textOverflow:c,monospace:f,fontFamily:h=(f?"ui-monospace, monospace":void 0),fontSize:d,fontStyle:p,fontVariant:m,fontWeight:g,rotate:y}=e,[v,w]=lA(y,0),[b,_]=function(t){return null==t||"number"==typeof t?[void 0,t]:"string"!=typeof t?[t,void 0]:(t=t.trim().toLowerCase(),Jk.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}(d);var x;if(super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:b,optional:!0},rotate:{value:(x=v,null==x?null:{transform:t=>WE(t,x,Float64Array),label:SA(x)}),optional:!0},text:{value:i,filter:xE,optional:!0}},e,Uk),this.rotate=w,this.textAnchor=lS(a,"middle"),this.lineAnchor=fA(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+l,this.textOverflow=Wk(c),this.monospace=!!f,this.fontFamily=QE(h),this.fontSize=_,this.fontStyle=QE(p),this.fontVariant=QE(m),this.fontWeight=QE(g),this.frameAnchor=WA(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=nF(this),this.clipLine=rF(this)}render(t,e,n,r,i){const{x:o,y:a}=e,{x:s,y:u,rotate:l,text:c,title:f,fontSize:h}=n,{rotate:d}=this,[p,m]=pS(this,r);return gS("svg:g",i).call(iS,this,r,i).call(Kk,this,c,r).call(uS,this,{x:s&&o,y:u&&a}).call((e=>e.selectAll().data(t).enter().append("text").call(oS,this).call(Zk,this,c,f).attr("transform",jk`translate(${s?t=>s[t]:p},${u?t=>u[t]:m})${l?t=>` rotate(${l[t]})`:d?` rotate(${d})`:""}`).call(sS,"font-size",h&&(t=>h[t])).call(tS,this,n))).node()}}function Wk(t){return null==t?null:fA(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Zk(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:s,clipLine:u}=e;t.each((function(t){const e=s(WM(n[t])??"").map(u),l=e.length,c="top"===i?.71:"bottom"===i?1-l:(164-100*l)/200;if(l>1){let t=0;for(let n=0;n<l;++n){if(++t,!e[n])continue;const r=this.ownerDocument.createElementNS($l.svg,"tspan");r.setAttribute("x",0),n===t-1?r.setAttribute("y",(c+n)*o+"em"):r.setAttribute("dy",t*o+"em"),r.textContent=e[n],this.appendChild(r),t=0}}else c&&this.setAttribute("y",c*o+"em"),this.textContent=e[0];if(a&&!r&&e[0]!==n[t]){const e=this.ownerDocument.createElementNS($l.svg,"title");e.textContent=n[t],this.appendChild(e)}}))}function Hk(t,{x:e,y:n,...r}={}){return void 0===r.frameAnchor&&([e,n]=wA(e,n)),new Vk(t,{...r,x:e,y:n})}function Yk(t,{x:e=JE,...n}={}){return new Vk(t,function(t={}){return zk("y",Fk,t)}({...n,x:e}))}function Xk(t,{y:e=JE,...n}={}){return new Vk(t,function(t={}){return zk("x",kk,t)}({...n,y:e}))}function Kk(t,e,n){sS(t,"text-anchor",e.textAnchor),sS(t,"font-family",e.fontFamily),sS(t,"font-size",e.fontSize),sS(t,"font-style",e.fontStyle),sS(t,"font-variant",void 0===e.fontVariant?function(t){return t&&(function(t){for(const e of t)if(null!=e)return"number"==typeof e}(t)||IA(t))?"tabular-nums":void 0}(n):e.fontVariant),sS(t,"font-weight",e.fontWeight)}const Jk=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Gk(t,e,n){const r=[];let i,o=0;for(const[a,s,u]of function*(t){let e=0,n=0;const r=t.length;for(;n<r;){let r=1;switch(t[n]){case qk:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];" "===t[++n];);e=n;break;case"\r":"\n"===t[n+1]&&++r;case"\n":yield[e,n,!0],n+=r,e=n;break;default:++n}}yield[e,n,!0]}(t))void 0===i&&(i=a),o>i&&n(t,i,s)>e&&(r.push(t.slice(i,o)+(t[o-1]===qk?"-":"")),i=a),u?(r.push(t.slice(i,s)),i=void 0):o=s;return r}const Qk={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function tF(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=cF(t,i))r+=Qk[t[i]]??(hF(t,i)?120:Qk.e);return r}function eF(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=cF(t,i))r+=hF(t,i)?200:100;return r}function nF({monospace:t,lineWidth:e,textOverflow:n}){if(null!=n||e==1/0)return t=>t.split(/\r\n?|\n/g);const r=t?eF:tF,i=100*e;return t=>Gk(t,i,r)}function rF({monospace:t,lineWidth:e,textOverflow:n}){if(null==n||e==1/0)return t=>t;const r=t?eF:tF,i=100*e;switch(n){case"clip-start":return t=>sF(t,i,r,"");case"clip-end":return t=>aF(t,i,r,"");case"ellipsis-start":return t=>sF(t,i,r,iF);case"ellipsis-middle":return t=>function(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r)/2,[a,s]=oF(t,e/2,n,o),[u]=oF(t,i-e/2-s+o,n,-o);return u<0?r:t.slice(0,a).trimEnd()+r+t.slice(cF(t,u)).trimStart()}(t,i,r,iF);case"ellipsis-end":return t=>aF(t,i,r,iF)}}const iF="…";function oF(t,e,n,r){const i=[];let o=0;for(let a=0,s=0,u=t.length;a<u;a=s){s=cF(t,a);const u=n(t,a,s);if(o+u>e){for(o+=r;o>e&&a>0;)s=a,a=i.pop(),o-=n(t,a,s);return[a,e-o]}o+=u,i.push(a)}return[-1,0]}function aF(t,e,n,r){t=t.trim();const i=n(r),[o]=oF(t,e,n,i);return o<0?t:t.slice(0,o).trimEnd()+r}function sF(t,e,n,r){const i=n(t=t.trim());if(i<=e)return t;const o=n(r),[a]=oF(t,i-e+o,n,-o);return a<0?r:r+t.slice(cF(t,a)).trimStart()}const uF=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,lF=/\p{Extended_Pictographic}/uy;function cF(t,e){return e+=function(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const n=t.charCodeAt(e+1);return n>=56320&&n<57344}return!1}(t,e)?2:1,function(t,e){return!fF(t,e)&&(uF.lastIndex=e,uF.test(t))}(t,e)&&(e=uF.lastIndex),function(t,e){return 8205===t.charCodeAt(e)}(t,e)?cF(t,e+1):e}function fF(t,e){return t.charCodeAt(e)<128}function hF(t,e){return!fF(t,e)&&(lF.lastIndex=e,lF.test(t))}const dF={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},pF=3.5,mF=5*pF,gF={draw(t,e,n){const r=e*n/mF;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},yF={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},vF=new Map([["arrow",gF],["spike",yF]]);class wF extends ik{constructor(t,e={}){const{x:n,y:r,r:i=pF,length:o,rotate:a,shape:s=gF,anchor:u="middle",frameAnchor:l}=e,[c,f]=lA(o,12),[h,d]=lA(a,0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:h,optional:!0}},e,dF),this.r=+i,this.length=f,this.rotate=d,this.shape=function(t){if(function(t){return t&&"function"==typeof t.draw}(t))return t;const e=vF.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}(s),this.anchor=fA(u,"anchor",["start","middle","end"]),this.frameAnchor=WA(l)}render(t,e,n,r,i){const{x:o,y:a}=e,{x:s,y:u,length:l,rotate:c}=n,{length:f,rotate:h,anchor:d,shape:p,r:m}=this,[g,y]=pS(this,r);return gS("svg:g",i).call(iS,this,r,i).call(uS,this,{x:s&&o,y:u&&a}).call((e=>e.selectAll().data(t).enter().append("path").call(oS,this).attr("transform",jk`translate(${s?t=>s[t]:g},${u?t=>u[t]:y})${c?t=>` rotate(${c[t]})`:h?` rotate(${h})`:""}${"start"===d?"":"end"===d?l?t=>` translate(0,${l[t]})`:` translate(0,${f})`:l?t=>` translate(0,${l[t]/2})`:` translate(0,${f/2})`}`).attr("d",l?t=>{const e=Yd();return p.draw(e,l[t],m),e}:(()=>{const t=Yd();return p.draw(t,f,m),t})()).call(tS,this,n))).node()}}function bF(t,e={}){const{x:n=JE,...r}=e;return new wF(t,{...r,x:n})}function _F(t,e={}){const{y:n=JE,...r}=e;return new wF(t,{...r,y:n})}function xF(t,e){return arguments.length<2&&!BA(t)&&(e=t,t=null),void 0===e&&(e={}),[t,e]}function DF({anchor:t}={},e){return void 0===t?e[0]:fA(t,"anchor",e)}function EF(t){return DF(t,["left","right"])}function AF(t){return DF(t,["right","left"])}function MF(t){return DF(t,["bottom","top"])}function SF(t){return DF(t,["top","bottom"])}function CF(){const[t,e]=xF(...arguments);return TF("y",EF(e),t,e)}function kF(){const[t,e]=xF(...arguments);return TF("fy",AF(e),t,e)}function FF(){const[t,e]=xF(...arguments);return BF("x",MF(e),t,e)}function NF(){const[t,e]=xF(...arguments);return BF("fx",SF(e),t,e)}function TF(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=("y"===t?6:0),tickPadding:m,tickRotate:g,x:y,margin:v,marginTop:w=(void 0===v?20:v),marginRight:b=(void 0===v?"right"===e?40:0:v),marginBottom:_=(void 0===v?20:v),marginLeft:x=(void 0===v?"left"===e?40:0:v),label:D,labelAnchor:E,labelArrow:A,labelOffset:M,...S}){return p=tA(p),m=tA(m),g=tA(g),void 0!==E&&(E=fA(E,"labelAnchor",["center","top","bottom"])),A=JF(A),ok(p&&!UA(o)?function(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+("y"===t?"-empty":""),frameAnchor:s=e,tickSize:u,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=("y"===t?void 0:null),...p}){return UF(_F,t,`${t}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:s,y:d,...p,dx:"left"===e?+h-YM+ +c:+h+YM-f,anchor:"start",length:u,shape:"left"===e?HF:YF})}(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:p,tickPadding:m,tickRotate:g,x:y,...S}):null,UA(u)?null:function(t,e,n,{facetAnchor:r=e+("y"===t?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*vk):0),tickFormat:u,text:l=("function"==typeof u?u:void 0),textAnchor:c=(Math.abs(a)>60?"middle":"left"===e?"end":"start"),lineAnchor:f=(a>60?"top":a<-60?"bottom":"middle"),fontVariant:h,inset:d=0,insetLeft:p=d,insetRight:m=d,dx:g=0,y:y=("y"===t?void 0:null),...v}){return UF(Xk,t,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:void 0===l?null:l,textAnchor:c,lineAnchor:f,fontVariant:h,rotate:a,y:y,...v,dx:"left"===e?+g-o-s+ +p:+g+ +o+ +s-m},(function(t,n,r,i){void 0===h&&(this.fontVariant=XF(t)),void 0===l&&(i.text=qF(t,n,r,u,e))}))}(t,e,n,{fill:u,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:g,x:y,marginTop:w,marginRight:b,marginBottom:_,marginLeft:x,...S}),UA(u)||null===D?null:Hk([],jF({fill:u,fillOpacity:l,...S},(function(n,r,i,o,a){const s=o[t],{marginTop:u,marginRight:l,marginBottom:c,marginLeft:f}="y"===t&&a.inset||a,h=E??(s.bandwidth?"center":"top"),d=M??("right"===e?l:f)-3;return"center"===h?(this.textAnchor=void 0,this.lineAnchor="right"===e?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor="right"===e?"end":"start",this.lineAnchor=h,this.frameAnchor=`${h}-${e}`,this.rotate=0),this.dy="top"===h?3-u:"bottom"===h?c-3:0,this.dx="right"===e?d:-d,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[KF(t,s,{anchor:e,label:D,labelAnchor:h,labelArrow:A})]}}}}))))}function BF(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=("x"===t?6:0),tickPadding:m,tickRotate:g,y:y,margin:v,marginTop:w=(void 0===v?"top"===e?30:0:v),marginRight:b=(void 0===v?20:v),marginBottom:_=(void 0===v?"bottom"===e?30:0:v),marginLeft:x=(void 0===v?20:v),label:D,labelAnchor:E,labelArrow:A,labelOffset:M,...S}){return p=tA(p),m=tA(m),g=tA(g),void 0!==E&&(E=fA(E,"labelAnchor",["center","left","right"])),A=JF(A),ok(p&&!UA(o)?function(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+("x"===t?"-empty":""),frameAnchor:s=e,tickSize:u,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=("x"===t?void 0:null),...p}){return UF(bF,t,`${t}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:s,x:d,...p,dy:"bottom"===e?+h-YM-f:+h+YM+ +c,anchor:"start",length:u,shape:"bottom"===e?WF:ZF})}(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:p,tickPadding:m,tickRotate:g,y:y,...S}):null,UA(u)?null:function(t,e,n,{facetAnchor:r=e+("x"===t?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*vk):0),tickFormat:u,text:l=("function"==typeof u?u:void 0),textAnchor:c=(Math.abs(a)>=10?a<0^"bottom"===e?"start":"end":"middle"),lineAnchor:f=(Math.abs(a)>=10?"middle":"bottom"===e?"top":"bottom"),fontVariant:h,inset:d=0,insetTop:p=d,insetBottom:m=d,dy:g=0,x:y=("x"===t?void 0:null),...v}){return UF(Yk,t,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:void 0===l?null:l,textAnchor:c,lineAnchor:f,fontVariant:h,rotate:a,x:y,...v,dy:"bottom"===e?+g+ +o+ +s-m:+g-o-s+ +p},(function(t,n,r,i){void 0===h&&(this.fontVariant=XF(t)),void 0===l&&(i.text=qF(t,n,r,u,e))}))}(t,e,n,{fill:u,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:g,y:y,marginTop:w,marginRight:b,marginBottom:_,marginLeft:x,...S}),UA(u)||null===D?null:Hk([],jF({fill:u,fillOpacity:l,...S},(function(n,r,i,o,a){const s=o[t],{marginTop:u,marginRight:l,marginBottom:c,marginLeft:f}="x"===t&&a.inset||a,h=E??(s.bandwidth?"center":"right"),d=M??("top"===e?u:c)-3;return"center"===h?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${h}`,this.textAnchor="right"===h?"end":"start"),this.lineAnchor=e,this.dy="top"===e?-d:d,this.dx="right"===h?l-3:"left"===h?3-f:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[KF(t,s,{anchor:e,label:D,labelAnchor:h,labelArrow:A})]}}}}))))}function zF(){const[t,e]=xF(...arguments);return PF("y",EF(e),t,e)}function OF(){const[t,e]=xF(...arguments);return PF("fy",AF(e),t,e)}function IF(){const[t,e]=xF(...arguments);return $F("x",MF(e),t,e)}function RF(){const[t,e]=xF(...arguments);return $F("fx",SF(e),t,e)}function PF(t,e,n,{y:r=("y"===t?void 0:null),x:i=null,x1:o=("left"===e?i:null),x2:a=("right"===e?i:null),...s}){return UF($k,t,`${t}-grid`,n,{y:r,x1:o,x2:a,...LF(s)})}function $F(t,e,n,{x:r=("x"===t?void 0:null),y:i=null,y1:o=("top"===e?i:null),y2:a=("bottom"===e?i:null),...s}){return UF(Pk,t,`${t}-grid`,n,{x:r,y1:o,y2:a,...LF(s)})}function LF({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function jF({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontWeight:o,monospace:a,pointerEvents:s,shapeRendering:u,clip:l=!1},c){return[,t]=uA(t),[,e]=lA(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontWeight:o,monospace:a,pointerEvents:s,shapeRendering:u,clip:l,initializer:c}}function UF(t,e,n,r,i,o){let a;const s=uM(i).initializer,u=t(r,uM({...i,initializer:function(t,n,r,s,u,l){const c=null==t&&("fx"===e||"fy"===e),{[e]:f}=s;if(!f)throw new Error(`missing scale: ${e}`);let{ticks:h,tickSpacing:d,interval:p}=i;if(OC(f)&&"string"==typeof h&&(p=h,h=void 0),null==t){if(BA(h))t=hA(h);else if(f.ticks)if(void 0!==h)t=f.ticks(h);else if(p=NA(void 0===p?f.interval:p,f.type),void 0!==p){const[e,n]=Nu(f.domain());t=p.range(e,p.offset(p.floor(n)))}else{const[n,r]=Nu(f.range());h=(r-n)/(void 0===d?"x"===e?80:35:d),t=f.ticks(h)}else t=f.domain();"y"===e||"x"===e?n=[_A(t)]:a[e]={scale:e,value:JE}}o?.call(this,f,t,h,a);const m=Object.fromEntries(Object.entries(a).map((([e,n])=>[e,{...n,value:WE(t,n.value)}])));return c&&(n=l.filterFacets(t,m)),{data:t,facets:n,channels:m}}},s));return null==r?(a=u.channels,u.channels={}):a={},u.ariaLabel=n,void 0===u.clip&&(u.clip=!1),u}function qF(t,e,n,r,i){return{value:VF(t,e,n,r,i)}}function VF(t,e,n,r,i){return void 0===r&&OC(t)?jE(t,e,n,i):t.tickFormat?t.tickFormat(BA(n)?null:n,r):void 0===r?function(t){if(!t)return!1;const e=t.floor(new Date(Date.UTC(2e3,11,31)));return Sw(e)>=e}(t.interval)?Pw("%Y"):function(t){if(!t)return!1;const e=t.floor(new Date(2e3,11,31));return Mw(e)>=e}(t.interval)?Rw("%Y"):WM:"string"==typeof r?(IA(t.domain())?Pw:Zp)(r):rA(r)}const WF={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},ZF={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},HF={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},YF={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function XF(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function KF(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:o}={}){if(!(null==r||r.inferred&&function(t){return OC(t)||null!=t.interval}(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),"auto"===o&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(!0===o){const n=function(t){return Math.sign(ZA(t.domain()))*Math.sign(ZA(t.range()))}(e);n&&(o=/x$/.test(t)||"center"===i?/x$/.test(t)===n<0?"left":"right":n<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return"right"===n?`${r} ↑`:`↑ ${r}`;case"down":return"right"===n?`${r} ↓`:`↓ ${r}`}return r}}function JF(t="auto"){return!UA(t)&&("boolean"==typeof t?t:fA(t,"labelArrow",["auto","up","right","down","left"]))}function GF(t,e){if(null==e)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function QF(t,e={},n){let{columns:r,tickFormat:i,fontVariant:o=gk(t),swatchSize:a=15,swatchWidth:s=a,swatchHeight:u=a,marginLeft:l=0,className:c,style:f,width:h}=e;const d=mS(e);c=hS(c),"function"!=typeof i&&(i=VF(t.scale,t.domain,void 0,i));const p=gS("div",d).attr("class",`${c}-swatches ${c}-swatches-${null!=r?"columns":"wrap"}`);let m;return null!=r?(m=`.${c}-swatches-columns .${c}-swatch {\n  display: flex;\n  align-items: center;\n  break-inside: avoid;\n  padding-bottom: 1px;\n}\n.${c}-swatches-columns .${c}-swatch::before {\n  flex-shrink: 0;\n}\n.${c}-swatches-columns .${c}-swatch-label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,t,s,u).call((t=>t.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i)))):(m=`.${c}-swatches-wrap {\n  display: flex;\n  align-items: center;\n  min-height: 33px;\n  flex-wrap: wrap;\n}\n.${c}-swatches-wrap .${c}-swatch {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,t,s,u).append((function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))}))),p.call((t=>t.insert("style","*").text(`.${c}-swatches {\n  font-family: system-ui, sans-serif;\n  font-size: 10px;\n  margin-bottom: 0.5em;\n}\n.${c}-swatch > svg {\n  margin-right: 0.5em;\n  overflow: visible;\n}\n${m}`))).style("margin-left",l?+l+"px":null).style("width",void 0===h?null:+h+"px").style("font-variant",lS(o,"normal")).call(dS,f).node()}const tN=new Map([["symbol",function(t,{fill:e=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:n=1,stroke:r=(void 0!==t.hint?.stroke?t.hint.stroke:UA(e)?"currentColor":"none"),strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...s}={},u){const[l,c]=uA(e),[f,h]=uA(r),d=GF(u,l),p=GF(u,f),m=a*a*Math.PI;return n=lA(n)[1],i=lA(i)[1],o=lA(o)[1],QF(t,s,((e,r,a,s)=>e.append("svg").attr("viewBox","-8 -8 16 16").attr("width",a).attr("height",s).attr("fill","color"===l?t=>d.scale(t):c).attr("fill-opacity",n).attr("stroke","color"===f?t=>p.scale(t):h).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",(e=>{const n=Yd();return t.scale(e).draw(n,m),n}))))}],["color",nN],["opacity",function({type:t,interpolate:e,...n},{legend:r=!0,color:i=bf(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);!0===r&&(r="ramp");if("ramp"!==`${r}`.toLowerCase())throw new Error(`${r} opacity legends are not supported`);return nN({type:t,...n,interpolate:rN(i)},{legend:r,...o})}]]);function eN({className:t,...e},{label:n,ticks:r,tickFormat:i}={},o){return function(t={},...e){let n=t;for(const r of e)for(const e in r)if(void 0===n[e]){const i=r[e];n===t?n={...n,[e]:i}:n[e]=i}return n}(o,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function nN(t,{legend:e=!0,...n}){if(!0===e&&(e="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${e}`.toLowerCase()){case"swatches":return function(t,{opacity:e,...n}={}){if(!IC(t)&&!RC(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return QF(t,n,((t,n,r,i)=>t.append("svg").attr("width",r).attr("height",i).attr("fill",n.scale).attr("fill-opacity",lA(e)[1]).append("rect").attr("width","100%").attr("height","100%")))}(t,n);case"ramp":return yk(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function rN(t){const{r:e,g:n,b:r}=bf(t)||bf(0,0,0);return t=>`rgba(${e},${n},${r},${t})`}const iN={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},oN={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class aN extends ik{constructor(t={}){const{anchor:e=null,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,rx:s,ry:u}=t;super(YE,void 0,t,null==e?iN:oN),this.anchor=cA(e,"anchor",["top","right","bottom","left"]),this.insetTop=tA(r),this.insetRight=tA(i),this.insetBottom=tA(o),this.insetLeft=tA(a),this.rx=tA(s),this.ry=tA(u)}render(t,e,n,r,i){const{marginTop:o,marginRight:a,marginBottom:s,marginLeft:u,width:l,height:c}=r,{anchor:f,insetTop:h,insetRight:d,insetBottom:p,insetLeft:m,rx:g,ry:y}=this,v=u+m,w=l-a-d,b=o+h,_=c-s-p;return gS(f?"svg:line":"svg:rect",i).datum(0).call(iS,this,r,i).call(oS,this).call(tS,this,n).call(uS,this,{}).call("left"===f?t=>t.attr("x1",v).attr("x2",v).attr("y1",b).attr("y2",_):"right"===f?t=>t.attr("x1",w).attr("x2",w).attr("y1",b).attr("y2",_):"top"===f?t=>t.attr("x1",v).attr("x2",w).attr("y1",b).attr("y2",b):"bottom"===f?t=>t.attr("x1",v).attr("x2",w).attr("y1",_).attr("y2",_):t=>t.attr("x",v).attr("y",b).attr("width",w-v).attr("height",_-b).attr("rx",g).attr("ry",y)).node()}}const sN={ariaLabel:"tip",fill:"white",stroke:"currentColor"},uN=new Set(["geometry","href","src","ariaLabel"]);class lN extends ik{constructor(t,e={}){e.tip&&(e={...e,tip:!1}),void 0===e.title&&BA(t)&&zA(t)&&(e={...e,title:JE});const{x:n,y:r,x1:i,x2:o,y1:a,y2:s,anchor:u,monospace:l,fontFamily:c=(l?"ui-monospace, monospace":void 0),fontSize:f,fontStyle:h,fontVariant:d,fontWeight:p,lineHeight:m=1,lineWidth:g=20,frameAnchor:y,textAnchor:v="start",textOverflow:w,textPadding:b=8,title:_,pointerSize:x=12,pathFilter:D="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=e;super(t,{x:{value:null!=i&&null!=o?null:n,scale:"x",optional:!0},y:{value:null!=a&&null!=s?null:r,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:null==o},y1:{value:a,scale:"y",optional:null==s},x2:{value:o,scale:"x",optional:null==i},y2:{value:s,scale:"y",optional:null==a},title:{value:_,optional:!0}},e,sN),this.anchor=VA(u,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=WA(y),this.textAnchor=lS(v,"middle"),this.textPadding=+b,this.pointerSize=+x,this.pathFilter=QE(D),this.lineHeight=+m,this.lineWidth=+g,this.textOverflow=Wk(w),this.monospace=!!l,this.fontFamily=QE(c),this.fontSize=tA(f),this.fontStyle=QE(h),this.fontVariant=QE(d),this.fontWeight=QE(p);for(const t in sN)t in this.channels&&(this[t]=sN[t]);this.splitLines=nF(this),this.clipLine=rF(this)}render(t,e,n,r,i){const o=this,{x:a,y:s,fx:u,fy:l}=e,{ownerSVGElement:c,document:f}=i,{anchor:h,monospace:d,lineHeight:p,lineWidth:m}=this,{textPadding:g,pointerSize:y,pathFilter:v}=this,{marginTop:w,marginLeft:b}=r,_=function({channels:t}){const e={};for(const n in t){if(uN.has(n))continue;const r=UM(t,n);r&&(e[n]=r)}return e}(n),{x1:x,y1:D,x2:E,y2:A,x:M=x??E,y:S=D??A}=n,C=u?u(t.fx)-b:0,k=l?l(t.fy)-w:0,[F,N]=pS(this,r),T=pk(n,F),B=mk(n,N),z=d?eF:tF,O=z(iF),I=u&&VF(u),R=l&&VF(l);const P=gS("svg:g",i).call(iS,this,r,i).call(Kk,this).call(uS,this,{x:M&&a,y:S&&s}).call((r=>r.selectAll().data(t).enter().append("g").attr("transform",(t=>`translate(${Math.round(T(t))},${Math.round(B(t))})`)).call(oS,this).call((t=>t.append("path").attr("filter",v))).call((r=>r.append("text").each((function(r){const i=Kc(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const a=new Set;for(const s of function*(r,i){if("title"in r){const t=r.title.value[i];for(const e of o.splitLines(WM(t)))yield{name:"",value:o.clipLine(e)}}else{for(const t in r){if("x1"===t&&"x2"in r)continue;if("y1"===t&&"y2"in r)continue;const o=r[t],a=o.value[i];if(wE(a)||null!=o.scale)if("x2"===t&&"x1"in r)yield{name:hN(e,r.x1,o,"x"),value:fN(r.x1,o,i)};else if("y2"===t&&"y1"in r)yield{name:hN(e,r.y1,o,"y"),value:fN(r.y1,o,i)};else{const r=o.scale,s={name:dN(e,o,t),value:WM(a)};"color"!==r&&"opacity"!==r||(s[r]=n[t][i]),yield s}}null!=t.fi&&u&&(yield{name:String(u.label??"fx"),value:I(t.fx)}),null!=t.fi&&l&&(yield{name:String(l.label??"fy"),value:R(t.fy)})}}(_,r)){const t=s.name;t&&a.has(t)||(a.add(t),$(i,s))}}))))));function $(t,{name:e,value:n,color:r,opacity:i}){const o=null!=r||null!=i;let a,s=100*m;const[u]=oF(e,s,z,O);if(u>=0)e=e.slice(0,u).trimEnd()+iF,a=n.trim(),n="";else{(e||!n&&!o)&&(n=" "+n);const[t]=oF(n,s-z(e),z,O);t>=0&&(a=(n=n.slice(0,t).trimEnd()+iF).trim())}const l=t.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");e&&l.append("tspan").attr("font-weight","bold").text(e),n&&l.append((()=>f.createTextNode(n))),o&&l.append("tspan").text(" ■").attr("fill",r).attr("fill-opacity",i).style("user-select","none"),a&&l.append("title").text(a)}function L(){const{width:t,height:e}=r.facet??r;P.selectChildren().each((function(n){let{x:r,width:i,height:a}=this.getBBox();i=Math.round(i),a=Math.round(a);let s=h;if(void 0===s){s=o.previousAnchor;const r=T(n)+C,u=B(n)+k,l=r+i+2*g<t,c=r-i-2*g>0,f=u+a+y+2*g+7<e,h=u-a-y-2*g>0,d=(/-left$/.test(s)?l||!c:l&&!c)?"left":"right",p=(/^top-/.test(s)?f||!h:f&&!h)?"top":"bottom";s=o.previousAnchor=`${p}-${d}`}const u=this.firstChild,l=this.lastChild;if(u.setAttribute("d",function(t,e,n,r,i){const o=r+2*n,a=i+2*n;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}(s,y,g,i,a)),r)for(const t of l.childNodes)t.setAttribute("x",-r);l.setAttribute("y",+function(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}(s,l.childNodes.length,p).toFixed(6)+"em"),l.setAttribute("transform",`translate(${function(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}(s,y,g,i,a)})`)}))}return c.isConnected?Promise.resolve().then(L):"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(L),P.node()}}function cN(t,{x:e,y:n,...r}={}){return void 0===r.frameAnchor&&([e,n]=wA(e,n)),new lN(t,{...r,x:e,y:n})}function fN(t,e,n){return e.hint?.length?`${WM(e.value[n]-t.value[n])}`:`${WM(t.value[n])}–${WM(e.value[n])}`}function hN(t,e,n,r){const i=dN(t,e,r),o=dN(t,n,r);return i===o?i:`${i}–${o}`}function dN(t,e,n){return String(t[e.scale]?.label??e?.label??n)}function pN(t={}){const{facet:e,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:s}=t,u=hS(t.className),l=void 0===t.marks?[]:gN(t.marks);l.push(...function(t){const e=[];for(const n of t){const t=n.tip;if(t){const r=("x"===t?hk:"y"===t?dk:fk)(AN(n));r.title=null,e.push(cN(n.data,r))}}return e}(l));const c=function(t,e){if(null==t)return;const{x:n,y:r}=t;if(null==n&&null==r)return;const i=hA(t.data);if(null==i)throw new Error("missing facet data");const o={};null!=n&&(o.fx=BM(i,{value:n,scale:"fx"}));null!=r&&(o.fy=BM(i,{value:r,scale:"fy"}));wN(o,e);const a=WC(i,o);return{channels:o,groups:a,data:t.data}}(e,t),f=new Map;for(const e of l){const n=EN(e,c,t);n&&f.set(e,n)}const h=new Map;c&&xN(h,[c],t),xN(h,f,t);const d=gN(function(t,e,n){let{projection:r,x:i={},y:o={},fx:a={},fy:s={},axis:u,grid:l,facet:c={},facet:{axis:f=u,grid:h}=c,x:{axis:d=u,grid:p=(null===d?null:l)}=i,y:{axis:m=u,grid:g=(null===m?null:l)}=o,fx:{axis:y=f,grid:v=(null===y?null:h)}=a,fy:{axis:w=f,grid:b=(null===w?null:h)}=s}=n;(r||!gA(i)&&!FN("x",t))&&(d=p=null);(r||!gA(o)&&!FN("y",t))&&(m=g=null);e.has("fx")||(y=v=null);e.has("fy")||(w=b=null);void 0===d&&(d=!kN(t,"x"));void 0===m&&(m=!kN(t,"y"));void 0===y&&(y=!kN(t,"fx"));void 0===w&&(w=!kN(t,"fy"));!0===d&&(d="bottom");!0===m&&(m="left");!0===y&&(y="top"===d||null===d?"bottom":"top");!0===w&&(w="right"===m||null===m?"left":"right");const _=[];return SN(_,b,OF,s),MN(_,w,kF,"right","left",c,s),SN(_,v,RF,a),MN(_,y,NF,"top","bottom",c,a),SN(_,g,zF,o),MN(_,m,CF,"left","right",n,o),SN(_,p,IF,i),MN(_,d,FF,"bottom","top",n,i),_}(l,h,t));for(const e of d){const n=EN(e,c,t);n&&f.set(e,n)}l.unshift(...d);let p=VC(h,t);if(void 0!==p){const t=c?rk(p,c):void 0;for(const e of l){if(null===e.facet||"super"===e.facet)continue;const n=f.get(e);void 0!==n&&(n.facetsIndex=null!=e.fx||null!=e.fy?rk(p,n):t)}const e=new Set;for(const{facetsIndex:t}of f.values())t?.forEach(((t,n)=>{t?.length>0&&e.add(n)}));p.forEach(0<e.size&&e.size<p.length?(t,n)=>t.empty=!e.has(n):t=>t.empty=!1);for(const t of l)if("exclude"===t.facet){const e=f.get(t);void 0!==e&&(e.facetsIndex=ZC(e.facetsIndex))}}for(const e of eM.keys())gA(t[e])&&"fx"!==e&&"fy"!==e&&h.set(e,[]);const m=new Map;for(const e of l){if(m.has(e))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:n,channels:r}=f.get(e)??{},{data:i,facets:o,channels:a}=e.initialize(n,r,t);wN(a,t),m.set(e,{data:i,facets:o,channels:a})}const g=xC(xN(h,m,t),t),y=DC(g),v=function(t,e,n={}){let r=.5-YM,i=.5+YM,o=.5+YM,a=.5-YM;for(const{marginTop:t,marginRight:n,marginBottom:s,marginLeft:u}of e)t>r&&(r=t),n>i&&(i=n),s>o&&(o=s),u>a&&(a=u);let{margin:s,marginTop:u=(void 0!==s?s:r),marginRight:l=(void 0!==s?s:i),marginBottom:c=(void 0!==s?s:o),marginLeft:f=(void 0!==s?s:a)}=n;u=+u,l=+l,c=+c,f=+f;let{width:h=640,height:d=UC(t,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,u-r+c-o)}=n;h=+h,d=+d;const p={width:h,height:d,marginTop:u,marginRight:l,marginBottom:c,marginLeft:f};if(t.fx||t.fy){let{margin:t,marginTop:e=(void 0!==t?t:u),marginRight:r=(void 0!==t?t:l),marginBottom:i=(void 0!==t?t:c),marginLeft:o=(void 0!==t?t:f)}=n.facet??{};e=+e,r=+r,i=+i,o=+o,p.facet={marginTop:e,marginRight:r,marginBottom:i,marginLeft:o}}return p}(g,l,t);!function(t,e){const{x:n,y:r,fx:i,fy:o}=t,a=i||o?AC(e):e;i&&SC(i,a),o&&CC(o,a);const s=i||o?MC(t,e):e;n&&SC(n,s),r&&CC(r,s)}(g,v);const{fx:w,fy:b}=y,_=w||b?MC(g,v):v,x=w||b?function({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:u}=AC(n),l=t&&NN(t),c=e&&NN(e);return{marginTop:e?c[0]:r,marginRight:t?s-l[1]:i,marginBottom:e?u-c[1]:o,marginLeft:t?l[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:u}}(y,v):v,D=mS(t),E=D.document,A=ql("svg").call(E.documentElement);let M=A;D.ownerSVGElement=A,D.className=u,D.projection=bS(t,_),D.filterFacets=(t,e)=>rk(p,{channels:e,groups:WC(t,e)}),D.getMarkState=t=>{const e=m.get(t),n=f.get(t);return{...e,channels:{...e.channels,...n?.channels}}},D.dispatchValue=t=>{M.value!==t&&(M.value=t,M.dispatchEvent(new Event("input",{bubbles:!0})))};const S=new Set;for(const[e,n]of m)if(null!=e.initializer){const r="super"===e.facet?x:_,i=e.initializer(n.data,n.facets,n.channels,y,r,D);if(void 0!==i.data&&(n.data=i.data),void 0!==i.facets&&(n.facets=i.facets),void 0!==i.channels){const{fx:r,fy:o,...a}=i.channels;_N(a),Object.assign(n.channels,a);for(const e of Object.values(a)){const{scale:n}=e;null!=n&&((C=eM.get(n))!==YA&&C!==tM)&&(bN(e,t),S.add(n))}null==r&&null==o||f.set(e,!0)}}var C;if(S.size){const e=new Map;xN(e,m,t,(t=>S.has(t))),xN(h,m,t,(t=>S.has(t)));const n=function(t,e){for(const n in t){const r=t[n],i=e[n];void 0===r.label&&i&&(r.label=i.label)}return t}(xC(e,t),g),r=DC(n);Object.assign(g,n),Object.assign(y,r)}let k,F;void 0!==p&&(k={x:w?.domain(),y:b?.domain()},p=function(t,{x:e,y:n}){return e&&=XC(e),n&&=XC(n),t.filter(e&&n?t=>e.has(t.x)&&n.has(t.y):e?t=>e.has(t.x):t=>n.has(t.y)).sort(e&&n?(t,r)=>e.get(t.x)-e.get(r.x)||n.get(t.y)-n.get(r.y):e?(t,n)=>e.get(t.x)-e.get(n.x):(t,e)=>n.get(t.y)-n.get(e.y))}(p,k),F=function(t,e,{marginTop:n,marginLeft:r}){return t&&e?({x:i,y:o})=>`translate(${t(i)-r},${e(o)-n})`:t?({x:e})=>`translate(${t(e)-r},0)`:({y:t})=>`translate(0,${e(t)-n})`}(w,b,v));for(const[t,e]of m)e.values=t.scale(e.channels,y,D);const{width:N,height:T}=v;Kc(A).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",T).attr("viewBox",`0 0 ${N} ${T}`).attr("aria-label",a).attr("aria-description",s).call((t=>t.append("style").text(`.${u} {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n}\n.${u} text,\n.${u} tspan {\n  white-space: pre;\n}`))).call(dS,n);for(const t of l){const{channels:e,values:n,facets:r}=m.get(t);if(void 0===p||"super"===t.facet){let i=null;if(r&&(i=r[0],i=t.filter(i,e,n),0===i.length))continue;const o=t.render(i,y,n,x,D);if(null==o)continue;A.appendChild(o)}else{let i;for(const o of p){if(!(t.facetAnchor?.(p,k,o)??!o.empty))continue;let a=null;if(r){const i=f.has(t);if(a=r[i?o.i:0],a=t.filter(a,e,n),0===a.length)continue;i||a!==r[0]||(a=DA(a)),a.fx=o.x,a.fy=o.y,a.fi=o.i}const s=t.render(a,y,n,_,D);if(null!=s){(i??=Kc(A).append("g")).append((()=>s)).datum(o);for(const t of["aria-label","aria-description","aria-hidden","transform"])s.hasAttribute(t)&&(i.attr(t,s.getAttribute(t)),s.removeAttribute(t))}}i?.selectChildren().attr("transform",F)}}const B=function(t,e,n){const r=[];for(const[i,o]of tN){const a=n[i];if(a?.legend&&i in t){const n=o(t[i],eN(e,t[i],a),(e=>t[e]));null!=n&&r.push(n)}}return r}(g,D,t),{figure:z=null!=r||null!=i||null!=o||B.length>0}=t;z&&(M=E.createElement("figure"),M.className=`${u}-figure`,M.style.maxWidth="initial",null!=r&&M.append(mN(E,r,"h2")),null!=i&&M.append(mN(E,i,"h3")),M.append(...B,A),null!=o&&M.append(function(t,e){const n=t.createElement("figcaption");return n.append(e.ownerDocument?e:t.createTextNode(e)),n}(E,o))),M.scale=jC(g),M.legend=function(t,e,n={}){return(r,i)=>{if(!tN.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return tN.get(r)(t[r],eN(e,n[r],i),(e=>t[e]))}}(g,D,t);const O=function(){const t=ZM;return ZM=0,t}();return O>0&&Kc(A).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${O.toLocaleString("en-US")} warning${1===O?"":"s"}. Please check the console.`),M}function mN(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(t.createTextNode(e)),r}function gN(t){return t.flat(1/0).filter((t=>null!=t)).map(yN)}function yN(t){return"function"==typeof t.render?t:new vN(t)}ik.prototype.plot=function({marks:t=[],...e}={}){return pN({...e,marks:[...t,this]})};class vN extends ik{constructor(t){if("function"!=typeof t)throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function wN(t,e){for(const n in t)bN(t[n],e);return t}function bN(t,e){const{scale:n,transform:r=!0}=t;if(null==n||!r)return;const{type:i,percent:o,interval:a,transform:s=(o?t=>100*t:kA(a,i))}=e[n]??{};null!=s&&(t.value=dA(t.value,s),t.transform=!1)}function _N(t){for(const e in t)zM(e,t[e])}function xN(t,e,n,r=GE){for(const{channels:i}of e.values())for(const e in i){const o=i[e],{scale:a}=o;if(null!=a&&r(a))if("projection"===a){if(!SS(n)){const e=void 0===n.x?.domain,r=void 0===n.y?.domain;if(e||r){const[n,i]=CS(o);e&&DN(t,"x",n),r&&DN(t,"y",i)}}}else DN(t,a,o)}return t}function DN(t,e,n){const r=t.get(e);void 0!==r?r.push(n):t.set(e,[n])}function EN(t,e,n){if(null===t.facet||"super"===t.facet)return;const{fx:r,fy:i}=t;if(null!=r||null!=i){const e=hA(t.data??r??i);if(void 0===e)throw new Error(`missing facet data in ${t.ariaLabel}`);if(null===e)return;const o={};return null!=r&&(o.fx=BM(e,{value:r,scale:"fx"})),null!=i&&(o.fy=BM(e,{value:i,scale:"fy"})),wN(o,n),{channels:o,groups:WC(e,o)}}if(void 0===e)return;const{channels:o,groups:a,data:s}=e;if("auto"!==t.facet||t.data===s)return{channels:o,groups:a};s.length>0&&(a.size>1||1===a.size&&o.fx&&o.fy&&[...a][0][1].size>1)&&hA(t.data)?.length===s.length&&HM(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function AN(t,e={}){return uM({...e,x:null,y:null},((e,n,r,i,o,a)=>a.getMarkState(t)))}function MN(t,e,n,r,i,o,a){if(!e)return;const s=/^\s*both\s*$/i.test(e);a=function(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:p,labelOffset:m}}(s?r:e,o,a);const{line:u}=a;n!==CF&&n!==FF||!u||qA(u)||t.push(function(t){return new aN(t)}(function(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:!0===n?void 0:n}}(a))),t.push(n(a)),s&&t.push(n({...a,anchor:i,label:null}))}function SN(t,e,n,r){e&&!qA(e)&&t.push(n(function(t,{stroke:e=(LA(t)?t:void 0),ticks:n=(CN(t)?t:void 0),tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}(e,r)))}function CN(t){switch(typeof t){case"number":return!0;case"string":return!LA(t)}return BA(t)||"function"==typeof t?.range}function kN(t,e){const n=`${e}-axis `;return t.some((t=>t.ariaLabel?.startsWith(n)))}function FN(t,e){for(const n of e)for(const e in n.channels){const{scale:r}=n.channels[e];if(r===t||"projection"===r)return!0}return!1}function NN(t){const e=t.domain();let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const TN=new Map([["basis",function(t){return new SD(t)}],["basis-closed",function(t){return new CD(t)}],["basis-open",function(t){return new kD(t)}],["bundle",ND],["bump-x",function(t){return new Jx(t,!0)}],["bump-y",function(t){return new Jx(t,!1)}],["cardinal",zD],["cardinal-closed",ID],["cardinal-open",PD],["catmull-rom",jD],["catmull-rom-closed",qD],["catmull-rom-open",WD],["linear",Hx],["linear-closed",function(t){return new ZD(t)}],["monotone-x",function(t){return new JD(t)}],["monotone-y",function(t){return new GD(t)}],["natural",function(t){return new tE(t)}],["step",function(t){return new nE(t,.5)}],["step-after",function(t){return new nE(t,1)}],["step-before",function(t){return new nE(t,0)}]]);function BN(t=zN,e){return"function"!=typeof t&&"auto"===`${t}`.toLowerCase()?zN:function(t=Hx,e){if("function"==typeof t)return t;const n=TN.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(void 0!==e){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}(t,e)}function zN(t){return Hx(t)}function ON(t={y:"count"},e={}){[t,e]=function({cumulative:t,domain:e,thresholds:n,interval:r,...i},o){return[i,{cumulative:t,domain:e,thresholds:n,interval:r,...o}]}(t,e);const{x:n,y:r}=e;return function(t,e,n,r,{data:i=AM,filter:o=kM,sort:a,reverse:s,...u}={},l={}){t=RN(t),e=RN(e),u=function(t,e){return function(t,e,n=vM){const r=Object.entries(t);return null!=e.title&&void 0===t.title&&r.push(["title",SM]),null!=e.href&&void 0===t.href&&r.push(["href",MM]),r.filter((([,t])=>void 0!==t)).map((([t,r])=>null===r?function(t){return{name:t,initialize(){},scope(){},reduce(){}}}(t):n(t,r,e)))}(t,e,PN)}(u,l),i=LN(i,JE),a=null==a?void 0:PN("sort",a,l),o=null==o?void 0:$N("filter",o,l),null!=n&&yM(u,"x","x1","x2")&&(n=null);null!=r&&yM(u,"y","y1","y2")&&(r=null);const[c,f]=MA(t),[h,d]=MA(t),[p,m]=MA(e),[g,y]=MA(e),[v,w]=null!=n?[n,"x"]:null!=r?[r,"y"]:[],[b,_]=MA(v),{x:x,y:D,z:E,fill:A,stroke:M,x1:S,x2:C,y1:k,y2:F,domain:N,cumulative:T,thresholds:B,interval:z,...O}=l,[I,R]=MA(E),[P]=uA(A),[$]=uA(M),[L,j]=MA(P),[U,q]=MA($);return{..."z"in l&&{z:I||E},..."fill"in l&&{fill:L||A},..."stroke"in l&&{stroke:U||M},...sM(O,((n,r,l)=>{const c=function(t,e){const n=kA(e?.interval,e?.type);return n?dA(t,n):t}(WE(n,v),l?.[w]),h=WE(n,E),p=WE(n,P),g=WE(n,$),b=function(t,e){for(const n in e){const r=e[n];if(void 0!==r&&!t.some((t=>t.name===n)))return r}}(u,{z:h,fill:p,stroke:g}),x=[],D=[],A=c&&_([]),M=h&&R([]),S=p&&j([]),C=g&&q([]),k=t&&f([]),F=t&&d([]),N=e&&m([]),T=e&&y([]),B=(z=t?.(n),O=e?.(n),z&&O?function*(t){const e=z.bin(t);for(const[t,[n,r]]of z.entries()){const i=O.bin(e[t]);for(const[t,[e,o]]of O.entries())yield[i[t],{x1:n,y1:e,x2:r,y2:o}]}}:z?function*(t){const e=z.bin(t);for(const[t,[n,r]]of z.entries())yield[e[t],{x1:n,x2:r}]}:function*(t){const e=O.bin(t);for(const[t,[n,r]]of O.entries())yield[e[t],{y1:n,y2:r}]});var z,O;let I=0;for(const t of u)t.initialize(n);a&&a.initialize(n),o&&o.initialize(n);for(const t of r){const e=[];for(const e of u)e.scope("facet",t);a&&a.scope("facet",t),o&&o.scope("facet",t);for(const[r,s]of bM(t,b))for(const[t,l]of bM(s,c))for(const[s,f]of B(l))if(!o||o.reduce(s,f)){e.push(I++),D.push(i.reduceIndex(s,n,f)),c&&A.push(t),h&&M.push(b===h?r:h[s[0]]),p&&S.push(b===p?r:p[s[0]]),g&&C.push(b===g?r:g[s[0]]),k&&(k.push(f.x1),F.push(f.x2)),N&&(N.push(f.y1),T.push(f.y2));for(const t of u)t.reduce(s,f);a&&a.reduce(s)}x.push(e)}return function(t,e,n){if(e){const n=e.output.transform(),r=(t,e)=>bE(n[t],n[e]);t.forEach((t=>t.sort(r)))}n&&t.forEach((t=>t.reverse()))}(x,a,s),{data:D,facets:x}})),...!yM(u,"x")&&(c?{x1:c,x2:h,x:CA(c,h)}:{x:x,x1:S,x2:C}),...!yM(u,"y")&&(p?{y1:p,y2:g,y:CA(p,g)}:{y:D,y1:k,y2:F}),...b&&{[w]:b},...Object.fromEntries(u.map((({name:t,output:e})=>[t,e])))}}(function(t,{cumulative:e,domain:n,thresholds:r,interval:i},o){void 0===(t={...TA(t)}).domain&&(t.domain=n);void 0===t.cumulative&&(t.cumulative=e);void 0===t.thresholds&&(t.thresholds=r);void 0===t.interval&&(t.interval=i);void 0===t.value&&(t.value=o);return t.thresholds=function(t,e,n=UN){if(void 0===t)return void 0===e?n:NA(e);if("string"==typeof t){switch(t.toLowerCase()){case"freedman-diaconis":return ll;case"scott":return cl;case"sturges":return tl;case"auto":return UN}return LE(t)}return t}(t.thresholds,t.interval),t}(n,e,JE),null,null,r,t,kk(e))}function IN(t={}){return function(t,e,n={}){return null==n?.interval?n:t({[e]:void 0===n?.reduce?MM:n.reduce,filter:null},n)}(ON,"y",uk(t,"x"))}function RN(t){if(null==t)return;const{value:e,cumulative:n,domain:r=Nu,thresholds:i}=t,o=t=>{let o,a=WE(t,e);if(IA(a)||function(t){return function(t){return qN(t)&&"function"==typeof t&&t()instanceof Date}(t)||BA(t)&&IA(t)}(i)){a=dA(a,sA,Float64Array);let[t,e]="function"==typeof r?r(a):r,n="function"!=typeof i||qN(i)?i:i(a,t,e);"number"==typeof n&&(n=Fw(t,e,n)),qN(n)&&(r===Nu&&(t=n.floor(t),e=n.offset(n.floor(e))),n=n.range(t,n.offset(e))),o=n}else{a=iA(a);let[t,e]="function"==typeof r?r(a):r,n="function"!=typeof i||qN(i)?i:i(a,t,e);if("number"==typeof n)if(r===Nu){let r=Gu(t,e,n);if(isFinite(r))if(r>0){let i=Math.round(t/r),o=Math.round(e/r);i*r<=t||--i,o*r>e||++o;let a=o-i+1;n=new Float64Array(a);for(let t=0;t<a;++t)n[t]=(i+t)*r}else if(r<0){r=-r;let i=Math.round(t*r),o=Math.round(e*r);i/r<=t||--i,o/r>e||++o;let a=o-i+1;n=new Float64Array(a);for(let t=0;t<a;++t)n[t]=(i+t)/r}else n=[t];else n=[t]}else n=Ju(t,e,n);else qN(n)&&(r===Nu&&(t=n.floor(t),e=n.offset(n.floor(e))),n=n.range(t,n.offset(e)));o=n}const s=[];if(1===o.length)s.push([o[0],o[0]]);else for(let t=1;t<o.length;++t)s.push([o[t-1],o[t]]);return s.bin=(n<0?ZN:n>0?WN:VN)(s,o,a),s};return o.label=SA(e),o}function PN(t,e,n){return vM(t,e,n,$N)}function $N(t,e,n){return wM(t,e,n,LN)}function LN(t,e){return _M(t,e,jN)}function jN(t){switch(`${t}`.toLowerCase()){case"x":return YN;case"x1":return KN;case"x2":return JN;case"y":return XN;case"y1":return GN;case"y2":return QN}throw new Error(`invalid bin reduce: ${t}`)}function UN(t,e,n){return Math.min(200,cl(t,e,n))}function qN(t){return"function"==typeof t?.range}function VN(t,e,n){return e=iA(e),r=>{const i=t.map((()=>[]));for(const t of r)i[Eu(e,n[t])-1]?.push(t);return i}}function WN(t,e,n){const r=VN(t,e,n);return t=>{const e=r(t);for(let t=1,n=e.length;t<n;++t){const n=e[t-1],r=e[t];for(const t of n)r.push(t)}return e}}function ZN(t,e,n){const r=VN(t,e,n);return t=>{const e=r(t);for(let t=e.length-2;t>=0;--t){const n=e[t+1],r=e[t];for(const t of n)r.push(t)}return e}}function HN(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const YN={reduceIndex:(t,e,{x1:n,x2:r})=>HN(n,r)},XN={reduceIndex:(t,e,{y1:n,y2:r})=>HN(n,r)},KN={reduceIndex:(t,e,{x1:n})=>n},JN={reduceIndex:(t,e,{x2:n})=>n},GN={reduceIndex:(t,e,{y1:n})=>n},QN={reduceIndex:(t,e,{y2:n})=>n},tT={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class eT extends ik{constructor(t,e={}){const{x1:n,y1:r,x2:i,y2:o,curve:a,tension:s}=e;super(t,{x1:{value:n,scale:"x"},y1:{value:r,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},e,tT),this.curve=BN(a,s),wk(this,e)}project(t,e,n){this.curve!==zN&&super.project(t,e,n)}render(t,e,n,r,i){const{x1:o,y1:a,x2:s=o,y2:u=a}=n,{curve:l}=this;return gS("svg:g",i).call(iS,this,r,i).call(uS,this,e).call((e=>e.selectAll().data(t).enter().append("path").call(oS,this).attr("d",l===zN&&i.projection?function(t,e,n,r,i){const o=oy(t);return e=iA(e),n=iA(n),r=iA(r),i=iA(i),t=>o({type:"LineString",coordinates:[[e[t],n[t]],[r[t],i[t]]]})}(i.projection,o,a,s,u):t=>{const e=Yd(),n=l(e);return n.lineStart(),n.point(o[t],a[t]),n.point(s[t],u[t]),n.lineEnd(),e}).call(tS,this,n).call(Mk,this,n,i))).node()}}function nT(t,{x:e,x1:n,x2:r,y:i,y1:o,y2:a,...s}={}){return[n,r]=rT(e,n,r),[o,a]=rT(i,o,a),new eT(t,{...s,x1:n,x2:r,y1:o,y2:a})}function rT(t,e,n){if(void 0===t){if(void 0===e){if(void 0!==n)return[n]}else if(void 0===n)return[e]}else{if(void 0===e)return void 0===n?[t]:[t,n];if(void 0===n)return[t,e]}return[e,n]}const iT={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function oT(t){return void 0===t.sort&&void 0===t.reverse?function(t,{sort:e,...n}={}){return{...(yA(t)&&void 0!==t.channel?uM:fM)(n,pM(t)),sort:vA(e)?e:null}}({channel:"-r"},t):t}class aT extends ik{constructor(t,e={}){const{x:n,y:r,r:i,rotate:o,symbol:a=tD,frameAnchor:s}=e,[u,l]=lA(o,0),[c,f]=function(t){if(null==t||iM(t))return[void 0,t];if("string"==typeof t){const e=rM.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}(a),[h,d]=lA(i,null==c?3:4.5);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:h,scale:"r",filter:EE,optional:!0},rotate:{value:u,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},oT(e),iT),this.r=d,this.rotate=l,this.symbol=f,this.frameAnchor=WA(s);const{channels:p}=this,{symbol:m}=p;if(m){const{fill:t,stroke:e}=p;m.hint={fill:t?t.value===m.value?"color":"currentColor":this.fill,stroke:e?e.value===m.value?"color":"currentColor":this.stroke}}}render(t,e,n,r,i){const{x:o,y:a}=e,{x:s,y:u,r:l,rotate:c,symbol:f}=n,{r:h,rotate:d,symbol:p}=this,[m,g]=pS(this,r),y=p===tD,v=l?void 0:h*h*Math.PI;return AE(h)&&(t=[]),gS("svg:g",i).call(iS,this,r,i).call(uS,this,{x:s&&o,y:u&&a}).call((e=>e.selectAll().data(t).enter().append(y?"circle":"path").call(oS,this).call(y?t=>{t.attr("cx",s?t=>s[t]:m).attr("cy",u?t=>u[t]:g).attr("r",l?t=>l[t]:h)}:t=>{t.attr("transform",jk`translate(${s?t=>s[t]:m},${u?t=>u[t]:g})${c?t=>` rotate(${c[t]})`:d?` rotate(${d})`:""}`).attr("d",l&&f?t=>{const e=Yd();return f[t].draw(e,l[t]*l[t]*Math.PI),e}:l?t=>{const e=Yd();return p.draw(e,l[t]*l[t]*Math.PI),e}:f?t=>{const e=Yd();return f[t].draw(e,v),e}:(()=>{const t=Yd();return p.draw(t,v),t})())}).call(tS,this,n))).node()}}function sT(t,{x:e,y:n,...r}={}){return void 0===r.frameAnchor&&([e,n]=wA(e,n)),new aT(t,{...r,x:e,y:n})}const uT={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class lT extends ik{constructor(t,e={}){const{x:n,y:r,z:i,curve:o,tension:a}=e;super(t,{x:{value:n,scale:"x"},y:{value:r,scale:"y"},z:{value:bA(e),optional:!0}},e,uT),this.z=i,this.curve=BN(o,a),wk(this,e)}filter(t){return t}project(t,e,n){this.curve!==zN&&super.project(t,e,n)}render(t,e,n,r,i){const{x:o,y:a}=n,{curve:s}=this;return gS("svg:g",i).call(iS,this,r,i).call(uS,this,e).call((e=>e.selectAll().data(nS(t,[o,a],this,n)).enter().append("path").call(oS,this).call(eS,this,n).call(Sk,this,n,i).attr("d",s===zN&&i.projection?function(t,e,n){const r=oy(t);return e=iA(e),n=iA(n),t=>{let i=[];const o=[i];for(const r of t)-1===r?(i=[],o.push(i)):i.push([e[r],n[r]]);return r({type:"MultiLineString",coordinates:o})}}(i.projection,o,a):Kx().curve(s).defined((t=>t>=0)).x((t=>o[t])).y((t=>a[t]))))).node()}}function cT(t,{x:e=KE,y:n=JE,...r}={}){return new lT(t,IN({...r,x:e,y:n}))}const fT={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class hT extends ik{constructor(t,e={}){const[n,r]=lA(e.r,3);super(t,{geometry:{value:e.geometry,scale:"projection"},r:{value:n,scale:"r",filter:EE,optional:!0}},oT(e),fT),this.r=r}render(t,e,n,r,i){const{geometry:o,r:a}=n,s=oy(i.projection??function({x:t,y:e}){if(t||e)return t??=t=>t,e??=t=>t,ay({point(n,r){this.stream.point(t(n),e(r))}})}(e)),{r:u}=this;return AE(u)?t=[]:void 0!==u&&s.pointRadius(u),gS("svg:g",i).call(iS,this,r,i).call(uS,this,e).call((e=>{e.selectAll().data(t).enter().append("path").call(oS,this).attr("d",a?t=>s.pointRadius(a[t])(o[t]):t=>s(o[t])).call(tS,this,n)})).node()}}function dT(t,{geometry:e=JE,...n}={}){switch(t?.type){case"FeatureCollection":t=t.features;break;case"GeometryCollection":t=t.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":t=[t]}return new hT(t,{geometry:e,...n})}var pT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gT(t,e,n,r={}){r={width:1080,layout:"a",colorScheme:"okhsl_flat",drawBorders:"on",lineXLabel:"x",lineYLabel:"y",lineXValues:Array.from({length:e.xIndexes.length},((t,e)=>e)),extraSpatialData:null,topRowScale:.8,...r};const i="#ededee",o=n,a=new Map(e.zIndexes.map(((t,e)=>[t,o.labels[e]]))),s=Array.from({length:o.centroids.length},(()=>0));e.zIndexes.map(((t,e)=>s[o.labels[e]]++));let u=null;u="okhsl_flat"==r.colorScheme?gE(o.embeddedCentroids,[.7,.7]):"okhsl_cone"==r.colorScheme?gE(o.embeddedCentroids,[.8,.7]):gE(o.embeddedCentroids,[.6,.6]);const l=o.embeddedCentroids.map((t=>u(t))),c=t=>l[t],f=new cE,h=t=>t.id,d=t=>c(h(t)),p=o.embeddedCentroids;p.forEach(((t,e)=>t.id=e));const m=[0,0],g=el(p.map((t=>function(t,e){let n=0;for(let r=0;r<t.length;r++)n+=(t[r]-e[r])**2;return Math.sqrt(n)}(t,m)))),y=[{x1:m[0]-g,x2:m[0]+g,y1:m[1],y2:m[1]},{x1:m[0],x2:m[0],y1:m[1]-g,y2:m[1]+g}],v=pN({width:r.width/2*r.topRowScale,height:r.width/2*r.topRowScale,axis:null,margin:20,r:{range:[3,16]},marks:[sT(p,{x:t=>t[0],y:t=>t[1],fill:t=>s[h(t)]>0?d(t):"none",stroke:"white",r:t=>s[h(t)]}),nT(y,{x1:"x1",x2:"x2",y1:"y1",y2:"y2",stroke:"lightgrey"}),sT(p.filter((t=>0==s[h(t)])),{x:t=>t[0],y:t=>t[1],stroke:"black",symbol:"times"})]}),w=Kc(v),b=w.select("g[aria-label='dot']");!function(t,e,n,r,i,o,a="lightgrey",s=null){const u=i.selectAll("*");u.data(u.data().map((e=>t[e]))),r.addResponder({update(t){sE(u,r,e,"fill",a,n)}});const l=[];if(u.each((function(t,n,r){l.push({x:parseFloat(this.getAttribute("cx")),y:parseFloat(this.getAttribute("cy")),id:e(t)})})),null!=s){const t=lE(o);u.on("mouseover.tooltip",((e,n)=>{const r=e.target.getBBox(),i=[r.x+r.width/2,r.y+r.height/2];t.show(s(n),i[0],i[1])})),u.on("mouseleave.tooltip",(()=>t.hide()))}oE(r,l,o,15),iE(r,o)}(p,h,d,f,b,w,i,(t=>`[${+t[0].toFixed(2)}, ${+t[1].toFixed(2)}] <br> ${s[t.id]} vectors`));const _=o.centroids,x=t=>c(t.id),D=[];_.forEach(((t,e)=>{t.forEach(((t,n)=>{D.push({x:n,y:t,id:e,j:n})}))}));const E=[];e.processedVectors.forEach(((t,n)=>{t.forEach(((t,r)=>{E.push({x:r,y:t,id:e.zIndexes[n]})}))}));const A=pN({style:{fontSize:12},marginLeft:50,marginBottom:50,marginTop:50,width:r.width*(3/4)*r.topRowScale,height:r.width/2*r.topRowScale,y:{domain:Nu(D,(t=>t.y)),tickSpacing:50,label:r.lineYLabel},x:{label:r.lineXLabel},marks:[cT(D,{x:t=>r.lineXValues[t.x],y:"y",z:h,stroke:x,strokeWidth:2}),cT(E,{x:t=>r.lineXValues[t.x],y:"y",z:h,stroke:"slategrey",strokeWidth:2,strokeDasharray:"2,4"}),sT(D,{x:t=>r.lineXValues[t.x],y:"y",z:h,stroke:"none",fill:"black",r:2})]}),M=Kc(A),S=M.selectAll("g[aria-label='line']"),C=S.filter(((t,e)=>0==e)),k=S.filter(((t,e)=>1==e)),F=M.select("g[aria-label='dot']").selectAll("circle");k.selectAll("path").attr("visibility","hidden").data(e.zIndexes.map((t=>({id:t})))),function(t,e,n,r,i,o,a="lightgrey"){const s=i.selectAll("path").data(t),u=[];s.each(((n,r,i)=>{const o=i[r],a=o.getTotalLength();for(let n=0;n<a;n+=10){const i=o.getPointAtLength(n);u.push({x:i.x,y:i.y,id:e(t[r]),element:o})}})),r.addResponder({update(t){s.filter((t=>e(t)==r.focused)).raise(),sE(s,r,e,"stroke",a,n)}}),oE(r,u,o,15),iE(r,o)}(_.map(((t,e)=>({id:e}))),h,x,f,C,M,i),function(t,e,n,r=30,i=null,o=null){const a=lE(n);e.data(t),e.attr("visibility","hidden");const s=[];e.each((function(t,e,n){s.push({x:parseFloat(this.getAttribute("cx")),y:parseFloat(this.getAttribute("cy"))})}));const u=Mp.from(s,(t=>t.x),(t=>t.y)),l=r**2,c=n.node();let f=null;n.on("mousemove.dottooltip",((n,h)=>{const d=new DOMPointReadOnly(n.clientX,n.clientY).matrixTransform(c.getScreenCTM().inverse()),p=[d.x,d.y];let m=u.find(p[0],p[1]);const g=s[m];if(null!=r&&(p[0]-g.x)**2+(p[1]-g.y)**2>l&&(m=null),o&&(o(t[m])||(m=null)),m!=f)if(e.attr("visibility","hidden"),f=m,null!=m){Kc(e.nodes()[m]).attr("visibility","visible");const n=null==i?`${g.x},${g.y}`:i(t[m]);a.show(n,g.x,g.y)}else a.hide()})).on("mouseleave.dottooltip",((t,e)=>{a.hide()}))}(D,F,M,13,(t=>{let n=r.lineXValues[t.j];n=null!=n.toISOString?n.toISOString().slice(0,10):n;return` ${n} </br> ${e.processedVectors[t.id][t.j].toFixed(3)} `}),(t=>f.focused==t?.id));const N=new cE;new Map(e.vectors.map(((t,n)=>[e.zIndexes[n],t])));const T=t=>a.has(t.id)?c(a.get(t.id)):"white",B=[dT(t,{stroke:"on"==r.drawBorders?"#CCC":T,strokeWidth:"on"==r.drawBorders?.3:1,fill:T})];null!=r.extraSpatialData&&"on"==r.drawBorders&&B.push(dT(r.extraSpatialData,{stroke:"white",strokeWidth:1,fill:"none"}));const z=pN({projection:"albers-usa",width:r.width,marks:B}),O=Kc(z),I=O.select("g[aria-label='geo']");Kx().x(((t,e)=>null(e))).y(((t,e)=>null(t))),uE(t.features,(t=>a.get(t.id)),T,f,I,O,i,null,"fill"),"off"==r.drawBorders&&uE(t.features,(t=>a.get(t.id)),T,f,I,O,i,null,"stroke");const R=I.selectAll("path");aE(N,(t=>t.id),R,I,"area");let P=null;N.addResponder({update(t){P&&P.attr("visibility","hidden");const e=k.selectAll("path").filter((t=>t.id==N.focused));e.attr("visibility","visible"),P=e}});const $=document.createElement("div");if($.style.justifyContent="center","a"==r.layout){const t=$.appendChild(document.createElement("div"));t.style.display="flex",t.style.justifyContent="center",t.style.gap="20px",t.appendChild(v),t.appendChild(A);const e=$.appendChild(document.createElement("div"));e.style.display="flex",e.style.justifyContent="space-around",e.appendChild(z)}else{$.style.display="flex";const t=$.appendChild(document.createElement("div"));t.style.display="flex",t.style.justifyContent="center",t.appendChild(z);const e=$.appendChild(document.createElement("div"));e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.gap="20px",e.style.flexDirection="column",e.appendChild(v),e.appendChild(A)}return $}function yT(t,e=!1,n=50){const r=e?t.processedVectors:t.vectors,i=[];return r.slice(0,n).forEach(((e,n)=>{e.forEach(((e,r)=>i.push({[t.xField]:new Date(t.xIndexes[r]),[t.yField]:e,z:n})))})),pN({marks:[cT(i,{x:t.xField,y:t.yField,z:"z"})]})}var vT,wT,bT,_T,xT,DT={},ET={},AT={},MT={exports:{}},ST={exports:{}};function CT(){if(vT)return ST.exports;return vT=1,"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?ST.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,a=arguments.length;switch(a){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick((function(){t.call(null,e)}));case 3:return process.nextTick((function(){t.call(null,e,n)}));case 4:return process.nextTick((function(){t.call(null,e,n,r)}));default:for(i=new Array(a-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick((function(){t.apply(null,i)}))}}}:ST.exports=process,ST.exports}function kT(){return xT?_T:(xT=1,_T=t)}var FT,NT={exports:{}};function TT(){return FT||(FT=1,function(t,e){var r=n,i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(NT,NT.exports)),NT.exports}var BT,zT={};function OT(){if(BT)return zT;function t(t){return Object.prototype.toString.call(t)}return BT=1,zT.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},zT.isBoolean=function(t){return"boolean"==typeof t},zT.isNull=function(t){return null===t},zT.isNullOrUndefined=function(t){return null==t},zT.isNumber=function(t){return"number"==typeof t},zT.isString=function(t){return"string"==typeof t},zT.isSymbol=function(t){return"symbol"==typeof t},zT.isUndefined=function(t){return void 0===t},zT.isRegExp=function(e){return"[object RegExp]"===t(e)},zT.isObject=function(t){return"object"==typeof t&&null!==t},zT.isDate=function(e){return"[object Date]"===t(e)},zT.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},zT.isFunction=function(t){return"function"==typeof t},zT.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},zT.isBuffer=n.Buffer.isBuffer,zT}var IT,RT,PT={exports:{}},$T={exports:{}};function LT(){if(RT)return PT.exports;RT=1;try{var t=require("util");if("function"!=typeof t.inherits)throw"";PT.exports=t.inherits}catch(t){PT.exports=(IT||(IT=1,"function"==typeof Object.create?$T.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:$T.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}),$T.exports)}return PT.exports}var jT,UT,qT,VT,WT,ZT,HT,YT,XT,KT={exports:{}};function JT(){return jT||(jT=1,function(t){var e=TT().Buffer,n=r;function i(t,e,n){t.copy(e,n)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return e.alloc(0);for(var n=e.allocUnsafe(t>>>0),r=this.head,o=0;r;)i(r.data,n,o),o+=r.data.length,r=r.next;return n},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})}(KT)),KT.exports}function GT(){if(qT)return UT;qT=1;var t=CT();function e(t,e){t.emit("error",e)}return UT={destroy:function(n,r){var i=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(e,this,n)):t.nextTick(e,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(n){!r&&n?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,t.nextTick(e,i,n)):t.nextTick(e,i,n):r&&r(n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},UT}function QT(){if(HT)return ZT;HT=1;var t=CT();function e(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}ZT=p;var n,i=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:t.nextTick;p.WritableState=d;var o=Object.create(OT());o.inherits=LT();var a={deprecate:WT?VT:(WT=1,VT=r.deprecate)},s=kT(),u=TT().Buffer,l=(void 0!==pT?pT:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,f=GT();function h(){}function d(r,o){n=n||tB(),r=r||{};var a=o instanceof n;this.objectMode=!!r.objectMode,a&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var s=r.highWaterMark,u=r.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:a&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===r.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,n){var r=e._writableState,o=r.sync,a=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),n)!function(e,n,r,i,o){--n.pendingcb,r?(t.nextTick(o,i),t.nextTick(b,e,n),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),b(e,n))}(e,r,o,n,a);else{var s=v(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||y(e,r),o?i(g,e,r,s,a):g(e,r,s,a)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function p(t){if(n=n||tB(),!(c.call(p,this)||this instanceof n))return new p(t);this._writableState=new d(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function m(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function g(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),b(t,e)}function y(t,n){n.bufferProcessing=!0;var r=n.bufferedRequest;if(t._writev&&r&&r.next){var i=n.bufferedRequestCount,o=new Array(i),a=n.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,m(t,n,!0,n.length,o,"",a.finish),n.pendingcb++,n.lastBufferedRequest=null,a.next?(n.corkedRequestsFree=a.next,a.next=null):n.corkedRequestsFree=new e(n),n.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,f=r.callback;if(m(t,n,!1,n.objectMode?1:l.length,l,c,f),r=r.next,n.bufferedRequestCount--,n.writing)break}null===r&&(n.lastBufferedRequest=null)}n.bufferedRequest=r,n.bufferProcessing=!1}function v(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function w(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),b(t,e)}))}function b(e,n){var r=v(n);return r&&(!function(e,n){n.prefinished||n.finalCalled||("function"==typeof e._final?(n.pendingcb++,n.finalCalled=!0,t.nextTick(w,e,n)):(n.prefinished=!0,e.emit("prefinish")))}(e,n),0===n.pendingcb&&(n.finished=!0,e.emit("finish"))),r}return o.inherits(p,s),d.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(d.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===p&&(t&&t._writableState instanceof d)}})):c=function(t){return t instanceof this},p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},p.prototype.write=function(e,n,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(e)&&(e=function(t){return u.from(t)}(e)),"function"==typeof n&&(r=n,n=null),s?n="buffer":n||(n=o.defaultEncoding),"function"!=typeof r&&(r=h),o.ended?function(e,n){var r=new Error("write after end");e.emit("error",r),t.nextTick(n,r)}(this,r):(s||function(e,n,r,i){var o=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||n.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),t.nextTick(i,a),o=!1),o}(this,o,e,r))&&(o.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,s,r,i,o);return l}(this,o,s,e,n,r)),a},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||y(this,t))},p.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},p.prototype._writev=null,p.prototype.end=function(e,n,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,n=null):"function"==typeof n&&(r=n,n=null),null!=e&&this.write(e,n),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,n,r){n.ending=!0,b(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r));n.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),p.prototype.destroy=f.destroy,p.prototype._undestroy=f.undestroy,p.prototype._destroy=function(t,e){this.end(),e(t)},ZT}function tB(){if(XT)return YT;XT=1;var t=CT(),e=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};YT=u;var n=Object.create(OT());n.inherits=LT();var r=fB(),i=QT();n.inherits(u,r);for(var o=e(i.prototype),a=0;a<o.length;a++){var s=o[a];u.prototype[s]||(u.prototype[s]=i.prototype[s])}function u(t){if(!(this instanceof u))return new u(t);r.call(this,t),i.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||t.nextTick(c,this)}function c(t){t.end()}return Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(e,n){this.push(null),this.end(),t.nextTick(n,e)},YT}var eB,nB,rB,iB,oB,aB,sB,uB,lB={};function cB(){if(eB)return lB;eB=1;var t=TT().Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(n){var r;switch(this.encoding=function(n){var r=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(n);if("string"!=typeof r&&(t.isEncoding===e||!e(n)))throw new Error("Unknown encoding: "+n);return r||n}(n),this.encoding){case"utf16le":this.text=o,this.end=a,r=4;break;case"utf8":this.fillLast=i,r=4;break;case"base64":this.text=s,this.end=u,r=3;break;default:return this.write=l,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(r)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function i(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function o(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function a(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function s(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function l(t){return t.toString(this.encoding)}function c(t){return t&&t.length?this.write(t):""}return lB.StringDecoder=n,n.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},n.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},n.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var o=r(e[i]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--i<n||-2===o)return 0;if(o=r(e[i]),o>=0)return o>0&&(t.lastNeed=o-2),o;if(--i<n||-2===o)return 0;if(o=r(e[i]),o>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},n.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},lB}function fB(){if(rB)return nB;rB=1;var t=CT();nB=y;var n,i=function(){if(bT)return wT;bT=1;var t={}.toString;return wT=Array.isArray||function(e){return"[object Array]"==t.call(e)}}();y.ReadableState=g,e.EventEmitter;var o=function(t,e){return t.listeners(e).length},a=kT(),s=TT().Buffer,u=(void 0!==pT?pT:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l=Object.create(OT());l.inherits=LT();var c=r,f=void 0;f=c&&c.debuglog?c.debuglog("stream"):function(){};var h,d=JT(),p=GT();l.inherits(y,a);var m=["error","close","destroy","pause","resume"];function g(t,e){t=t||{};var r=e instanceof(n=n||tB());this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=cB().StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function y(t){if(n=n||tB(),!(this instanceof y))return new y(t);this._readableState=new g(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function v(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,x(t)}(t,a)):(i||(o=function(t,e){var n;r=e,s.isBuffer(r)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):E(t,a)):w(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&x(t)),E(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=p.destroy,y.prototype._undestroy=p.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),v(this,t,e,!1,n)},y.prototype.unshift=function(t){return v(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return h||(h=cB().StringDecoder),this._readableState.decoder=new h(t),this._readableState.encoding=t,this};var b=8388608;function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=b?t=b:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function x(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(f("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(D,e):D(e))}function D(t){f("emit readable"),t.emit("readable"),C(t)}function E(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(A,e,n))}function A(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function M(t){f("readable nexttick read 0"),t.read(0)}function S(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=s.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function F(e){var n=e._readableState;if(n.length>0)throw new Error('"endReadable()" called on non-empty stream');n.endEmitted||(n.ended=!0,t.nextTick(N,n,e))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function T(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}return y.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?F(this):x(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&F(this),null;var r,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),e.ended||e.reading?f("reading or ended",i=!1):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(n,e))),null===(r=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&F(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,n){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,n);var s=(!n||!1!==n.end)&&e!==process.stdout&&e!==process.stderr?l:v;function u(t,n){f("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",c),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",l),r.removeListener("end",v),r.removeListener("data",p),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function l(){f("onend"),e.end()}a.endEmitted?t.nextTick(s):r.once("end",s),e.on("unpipe",u);var c=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,C(t))}}(r);e.on("drain",c);var h=!1;var d=!1;function p(t){f("ondata"),d=!1,!1!==e.write(t)||d||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==T(a.pipes,e))&&!h&&(f("false write response, pause",a.awaitDrain),a.awaitDrain++,d=!0),r.pause())}function m(t){f("onerror",t),v(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),v()}function y(){f("onfinish"),e.removeListener("close",g),v()}function v(){f("unpipe"),r.unpipe(e)}return r.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?i(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",r),a.flowing||(f("pipe resume"),r.resume()),e},y.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=T(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},y.prototype.on=function(e,n){var r=a.prototype.on.call(this,e,n);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&x(this):t.nextTick(M,this))}return r},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(S,e,n))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){f("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=k,nB}function hB(){if(oB)return iB;oB=1,iB=r;var t=tB(),e=Object.create(OT());function n(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);t.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){o(t,e,n)})):o(this,null,null)}function o(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}return e.inherits=LT(),e.inherits(r,t),r.prototype.push=function(e,n){return this._transformState.needTransform=!1,t.prototype.push.call(this,e,n)},r.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},r.prototype._destroy=function(e,n){var r=this;t.prototype._destroy.call(this,e,(function(t){n(t),r.emit("close")}))},iB}function dB(){return uB||(uB=1,e=MT,n=MT.exports,r=t,"disable"===process.env.READABLE_STREAM&&r?(e.exports=r,(n=e.exports=r.Readable).Readable=r.Readable,n.Writable=r.Writable,n.Duplex=r.Duplex,n.Transform=r.Transform,n.PassThrough=r.PassThrough,n.Stream=r):((n=e.exports=fB()).Stream=r||n,n.Readable=n,n.Writable=QT(),n.Duplex=tB(),n.Transform=hB(),n.PassThrough=function(){if(sB)return aB;sB=1,aB=n;var t=hB(),e=Object.create(OT());function n(e){if(!(this instanceof n))return new n(e);t.call(this,e)}return e.inherits=LT(),e.inherits(n,t),n.prototype._transform=function(t,e,n){n(null,t)},aB}())),MT.exports;var e,n,r}if(AT.base64=!0,AT.array=!0,AT.string=!0,AT.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,AT.nodebuffer="undefined"!=typeof Buffer,AT.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)AT.blob=!1;else{var pB=new ArrayBuffer(0);try{AT.blob=0===new Blob([pB],{type:"application/zip"}).size}catch(pE){try{var mB=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);mB.append(pB),AT.blob=0===mB.getBlob("application/zip").size}catch(pE){AT.blob=!1}}}try{AT.nodestream=!!dB().Readable}catch(pE){AT.nodestream=!1}var gB,yB={};function vB(){if(gB)return yB;gB=1;var t=SB(),e=AT,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return yB.encode=function(e){for(var r,i,o,a,s,u,l,c=[],f=0,h=e.length,d=h,p="string"!==t.getTypeOf(e);f<e.length;)d=h-f,p?(r=e[f++],i=f<h?e[f++]:0,o=f<h?e[f++]:0):(r=e.charCodeAt(f++),i=f<h?e.charCodeAt(f++):0,o=f<h?e.charCodeAt(f++):0),a=r>>2,s=(3&r)<<4|i>>4,u=d>1?(15&i)<<2|o>>6:64,l=d>2?63&o:64,c.push(n.charAt(a)+n.charAt(s)+n.charAt(u)+n.charAt(l));return c.join("")},yB.decode=function(t){var r,i,o,a,s,u,l=0,c=0,f="data:";if(t.substr(0,5)===f)throw new Error("Invalid base64 input, it looks like a data url.");var h,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===n.charAt(64)&&d--,t.charAt(t.length-2)===n.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=e.uint8array?new Uint8Array(0|d):new Array(0|d);l<t.length;)r=n.indexOf(t.charAt(l++))<<2|(a=n.indexOf(t.charAt(l++)))>>4,i=(15&a)<<4|(s=n.indexOf(t.charAt(l++)))>>2,o=(3&s)<<6|(u=n.indexOf(t.charAt(l++))),h[c++]=r,64!==s&&(h[c++]=i),64!==u&&(h[c++]=o);return h},yB}var wB,bB,_B,xB,DB={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}};var EB=null;EB="undefined"!=typeof Promise?Promise:function(){if(xB)return _B;xB=1;var t=function(){if(bB)return wB;bB=1;var t,e,n=pT.MutationObserver||pT.WebKitMutationObserver;if(process.browser)if(n){var r=0,i=new n(u),o=pT.document.createTextNode("");i.observe(o,{characterData:!0}),t=function(){o.data=r=++r%2}}else if(pT.setImmediate||void 0===pT.MessageChannel)t="document"in pT&&"onreadystatechange"in pT.document.createElement("script")?function(){var t=pT.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},pT.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var a=new pT.MessageChannel;a.port1.onmessage=u,t=function(){a.port2.postMessage(0)}}else t=function(){process.nextTick(u)};var s=[];function u(){var t,n;e=!0;for(var r=s.length;r;){for(n=s,s=[],t=-1;++t<r;)n[t]();r=s.length}e=!1}return wB=function(n){1!==s.push(n)||e||t()}}();function e(){}var n={},r=["REJECTED"],i=["FULFILLED"],o=["PENDING"];if(!process.browser)var a=["UNHANDLED"];function s(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=o,this.queue=[],this.outcome=void 0,process.browser||(this.handled=a),t!==e&&f(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(e,r,i){t((function(){var t;try{t=r(i)}catch(t){return n.reject(e,t)}t===e?n.reject(e,new TypeError("Cannot resolve promise with itself")):n.resolve(e,t)}))}function c(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var r=!1;function i(e){r||(r=!0,n.reject(t,e))}function o(e){r||(r=!0,n.resolve(t,e))}var a=h((function(){e(o,i)}));"error"===a.status&&i(a.value)}function h(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}return _B=s,s.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,n){if("function"!=typeof t&&this.state===i||"function"!=typeof n&&this.state===r)return this;var s=new this.constructor(e);return process.browser||this.handled===a&&(this.handled=null),this.state!==o?l(s,this.state===i?t:n,this.outcome):this.queue.push(new u(s,t,n)),s},u.prototype.callFulfilled=function(t){n.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){n.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},n.resolve=function(t,e){var r=h(c,e);if("error"===r.status)return n.reject(t,r.value);var o=r.value;if(o)f(t,o);else{t.state=i,t.outcome=e;for(var a=-1,s=t.queue.length;++a<s;)t.queue[a].callFulfilled(e)}return t},n.reject=function(e,n){e.state=r,e.outcome=n,process.browser||e.handled===a&&t((function(){e.handled===a&&process.emit("unhandledRejection",n,e)}));for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callRejected(n);return e},s.resolve=function(t){return t instanceof this?t:n.resolve(new this(e),t)},s.reject=function(t){var r=new this(e);return n.reject(r,t)},s.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,u=-1,l=new this(e);++u<i;)c(t[u],u);return l;function c(t,e){r.resolve(t).then((function(t){a[e]=t,++s!==i||o||(o=!0,n.resolve(l,a))}),(function(t){o||(o=!0,n.reject(l,t))}))}},s.race=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var a,s=-1,u=new this(e);++s<i;)a=t[s],r.resolve(a).then((function(t){o||(o=!0,n.resolve(u,t))}),(function(t){o||(o=!0,n.reject(u,t))}));return u},_B}();var AB,MB={Promise:EB};function SB(){return AB||(AB=1,function(t){var e=AT,n=vB(),r=DB,i=MB;function o(t){return t}function a(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var s={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function u(e){var n=65536,r=t.getTypeOf(e),i=!0;if("uint8array"===r?i=s.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=s.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return s.stringifyByChunk(e,r,n)}catch(t){n=Math.floor(n/2)}return s.stringifyByChar(e)}function l(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}t.applyFromCharCode=u;var c={};c.string={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:function(t){return a(t,r.allocBuffer(t.length))}},c.array={string:u,array:o,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},c.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return l(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:o,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},c.uint8array={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:o,nodebuffer:function(t){return r.newBufferFrom(t)}},c.nodebuffer={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:o},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return c[r][e](n)},t.resolve=function(t){for(var e=t.split("/"),n=[],r=0;r<e.length;r++){var i=e[r];"."===i||""===i&&0!==r&&r!==e.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},t.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":e.nodebuffer&&r.isBuffer(t)?"nodebuffer":e.uint8array&&t instanceof Uint8Array?"uint8array":e.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(t){if(!e[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},t.delay=function(t,e,n){setImmediate((function(){t.apply(n||null,e||[])}))},t.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},t.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},t.prepareContent=function(r,o,s,u,l){var c=i.Promise.resolve(o).then((function(t){return e.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new i.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t}));return c.then((function(o){var c,f=t.getTypeOf(o);return f?("arraybuffer"===f?o=t.transformTo("uint8array",o):"string"===f&&(l?o=n.decode(o):s&&!0!==u&&(o=a(c=o,e.uint8array?new Uint8Array(c.length):new Array(c.length)))),o):i.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}}(ET)),ET}function CB(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}!function(t,e){if(!t.setImmediate){var n,r,i,o,a,s=1,u={},l=!1,c=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){process.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){i.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(o="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&d(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(o+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return u[s]=i,n(s),s++},f.clearImmediate=h}function h(t){delete u[t]}function d(t){if(l)setTimeout(d,0,t);else{var n=u[t];if(n){l=!0;try{!function(t){var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(e,r)}}(n)}finally{h(t),l=!1}}}}}("undefined"==typeof self?pT:self),CB.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}};var kB=CB;!function(t){for(var e=SB(),n=AT,r=DB,i=kB,o=new Array(256),a=0;a<256;a++)o[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;o[254]=o[254]=1;function s(){i.call(this,"utf-8 decode"),this.leftOver=null}function u(){i.call(this,"utf-8 encode")}t.utf8encode=function(t){return n.nodebuffer?r.newBufferFrom(t,"utf-8"):function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=n.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e}(t)},t.utf8decode=function(t){return n.nodebuffer?e.transformTo("nodebuffer",t).toString("utf-8"):function(t){var n,r,i,a,s=t.length,u=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)u[r++]=i;else if((a=o[i])>4)u[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&t[n++],a--;a>1?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),e.applyFromCharCode(u)}(t=e.transformTo(n.uint8array?"uint8array":"array",t))},e.inherits(s,i),s.prototype.processChunk=function(r){var i=e.transformTo(n.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var a=i;(i=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),i.set(a,this.leftOver.length)}else i=this.leftOver.concat(i);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+o[t[n]]>e?n:e}(i),u=i;s!==i.length&&(n.uint8array?(u=i.subarray(0,s),this.leftOver=i.subarray(s,i.length)):(u=i.slice(0,s),this.leftOver=i.slice(s,i.length))),this.push({data:t.utf8decode(u),meta:r.meta})},s.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=s,e.inherits(u,i),u.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=u}(DT);var FB=kB,NB=SB();function TB(t){FB.call(this,"ConvertWorker to "+t),this.destType=t}NB.inherits(TB,FB),TB.prototype.processChunk=function(t){this.push({data:NB.transformTo(this.destType,t.data),meta:t.meta})};var BB,zB,OB=TB;var IB=SB(),RB=OB,PB=kB,$B=vB(),LB=MB,jB=null;if(AT.nodestream)try{jB=function(){if(zB)return BB;zB=1;var t=dB().Readable;function e(e,n,r){t.call(this,n),this._helper=e;var i=this;e.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}return SB().inherits(e,t),e.prototype._read=function(){this._helper.resume()},BB=e}()}catch(pE){}function UB(t,e){return new LB.Promise((function(n,r){var i=[],o=t._internalType,a=t._outputType,s=t._mimeType;t.on("data",(function(t,n){i.push(t),e&&e(n)})).on("error",(function(t){i=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return IB.newBlob(IB.transformTo("arraybuffer",e),n);case"base64":return $B.encode(e);default:return IB.transformTo(t,e)}}(a,function(t,e){var n,r=0,i=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(o,i),s);n(t)}catch(t){r(t)}i=[]})).resume()}))}function qB(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,IB.checkSupport(r),this._worker=t.pipe(new RB(r)),t.lock()}catch(t){this._worker=new PB("error"),this._worker.error(t)}}qB.prototype={accumulate:function(t){return UB(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){IB.delay(e,arguments,n)})),this},resume:function(){return IB.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(IB.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new jB(this,{objectMode:"nodebuffer"!==this._outputType},t)}};var VB=qB,WB={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null},ZB=SB(),HB=kB;function YB(t){HB.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=ZB.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}ZB.inherits(YB,HB),YB.prototype.cleanUp=function(){HB.prototype.cleanUp.call(this),this.data=null},YB.prototype.resume=function(){return!!HB.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ZB.delay(this._tickAndRepeat,[],this)),!0)},YB.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ZB.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},YB.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var XB=YB,KB=SB();var JB=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var GB=function(t,e){return void 0!==t&&t.length?"string"!==KB.getTypeOf(t)?function(t,e,n,r){var i=JB,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,r){var i=JB,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0},QB=kB,tz=GB;function ez(){QB.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}SB().inherits(ez,QB),ez.prototype.processChunk=function(t){this.streamInfo.crc32=tz(t.data,this.streamInfo.crc32||0),this.push(t)};var nz=ez,rz=SB(),iz=kB;function oz(t){iz.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}rz.inherits(oz,iz),oz.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}iz.prototype.processChunk.call(this,t)};var az=MB,sz=XB,uz=nz,lz=oz;function cz(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}cz.prototype={getContentWorker:function(){var t=new sz(az.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new lz("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new sz(az.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},cz.createWorkerFrom=function(t,e,n){return t.pipe(new uz).pipe(new lz("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new lz("compressedSize")).withStreamInfo("compression",e)};var fz=cz,hz=VB,dz=XB,pz=DT,mz=fz,gz=kB,yz=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};yz.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(e=e.pipe(new pz.Utf8EncodeWorker)),!i&&r&&(e=e.pipe(new pz.Utf8DecodeWorker))}catch(t){(e=new gz("error")).error(t)}return new hz(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof mz&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new pz.Utf8EncodeWorker)),mz.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof mz?this._data.getContentWorker():this._data instanceof gz?this._data:new dz(this._data)}};for(var vz=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],wz=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},bz=0;bz<vz.length;bz++)yz.prototype[vz[bz]]=wz;var _z=yz,xz={},Dz={},Ez={},Az={};!function(t){var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(t[i]=r[i])}}return t},t.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},i={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)}(Az);var Mz={},Sz={},Cz={},kz=Az,Fz=0,Nz=1;function Tz(t){for(var e=t.length;--e>=0;)t[e]=0}var Bz=0,zz=29,Oz=256,Iz=Oz+1+zz,Rz=30,Pz=19,$z=2*Iz+1,Lz=15,jz=16,Uz=7,qz=256,Vz=16,Wz=17,Zz=18,Hz=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Yz=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Xz=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Kz=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Jz=new Array(2*(Iz+2));Tz(Jz);var Gz=new Array(2*Rz);Tz(Gz);var Qz=new Array(512);Tz(Qz);var tO=new Array(256);Tz(tO);var eO=new Array(zz);Tz(eO);var nO,rO,iO,oO=new Array(Rz);function aO(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function sO(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function uO(t){return t<256?Qz[t]:Qz[256+(t>>>7)]}function lO(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function cO(t,e,n){t.bi_valid>jz-n?(t.bi_buf|=e<<t.bi_valid&65535,lO(t,t.bi_buf),t.bi_buf=e>>jz-t.bi_valid,t.bi_valid+=n-jz):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function fO(t,e,n){cO(t,n[2*e],n[2*e+1])}function hO(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function dO(t,e,n){var r,i,o=new Array(Lz+1),a=0;for(r=1;r<=Lz;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=hO(o[s]++,s))}}function pO(t){var e;for(e=0;e<Iz;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Rz;e++)t.dyn_dtree[2*e]=0;for(e=0;e<Pz;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*qz]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function mO(t){t.bi_valid>8?lO(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function gO(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function yO(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&gO(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!gO(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function vO(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?fO(t,i,e):(fO(t,(o=tO[i])+Oz+1,e),0!==(a=Hz[o])&&cO(t,i-=eO[o],a),fO(t,o=uO(--r),n),0!==(a=Yz[o])&&cO(t,r-=oO[o],a))}while(s<t.last_lit);fO(t,qz,e)}function wO(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=$z,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)yO(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],yO(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,yO(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=Lz;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<$z;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>p&&(o=p,m++),u[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=d&&(a=h[r-d]),s=u[2*r],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),dO(o,l,t.bl_count)}function bO(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*Vz]++):s<=10?t.bl_tree[2*Wz]++:t.bl_tree[2*Zz]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function _O(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<u&&i===a)){if(s<l)do{fO(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(fO(t,i,t.bl_tree),s--),fO(t,Vz,t.bl_tree),cO(t,s-3,2)):s<=10?(fO(t,Wz,t.bl_tree),cO(t,s-3,3)):(fO(t,Zz,t.bl_tree),cO(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}Tz(oO);var xO=!1;function DO(t,e,n,r){cO(t,(Bz<<1)+(r?1:0),3),function(t,e,n,r){mO(t),r&&(lO(t,n),lO(t,~n)),kz.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}Cz._tr_init=function(t){xO||(!function(){var t,e,n,r,i,o=new Array(Lz+1);for(n=0,r=0;r<zz-1;r++)for(eO[r]=n,t=0;t<1<<Hz[r];t++)tO[n++]=r;for(tO[n-1]=r,i=0,r=0;r<16;r++)for(oO[r]=i,t=0;t<1<<Yz[r];t++)Qz[i++]=r;for(i>>=7;r<Rz;r++)for(oO[r]=i<<7,t=0;t<1<<Yz[r]-7;t++)Qz[256+i++]=r;for(e=0;e<=Lz;e++)o[e]=0;for(t=0;t<=143;)Jz[2*t+1]=8,t++,o[8]++;for(;t<=255;)Jz[2*t+1]=9,t++,o[9]++;for(;t<=279;)Jz[2*t+1]=7,t++,o[7]++;for(;t<=287;)Jz[2*t+1]=8,t++,o[8]++;for(dO(Jz,Iz+1,o),t=0;t<Rz;t++)Gz[2*t+1]=5,Gz[2*t]=hO(t,5);nO=new aO(Jz,Hz,Oz+1,Iz,Lz),rO=new aO(Gz,Yz,0,Rz,Lz),iO=new aO(new Array(0),Xz,0,Pz,Uz)}(),xO=!0),t.l_desc=new sO(t.dyn_ltree,nO),t.d_desc=new sO(t.dyn_dtree,rO),t.bl_desc=new sO(t.bl_tree,iO),t.bi_buf=0,t.bi_valid=0,pO(t)},Cz._tr_stored_block=DO,Cz._tr_flush_block=function(t,e,n,r){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return Fz;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return Nz;for(e=32;e<Oz;e++)if(0!==t.dyn_ltree[2*e])return Nz;return Fz}(t)),wO(t,t.l_desc),wO(t,t.d_desc),a=function(t){var e;for(bO(t,t.dyn_ltree,t.l_desc.max_code),bO(t,t.dyn_dtree,t.d_desc.max_code),wO(t,t.bl_desc),e=Pz-1;e>=3&&0===t.bl_tree[2*Kz[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?DO(t,e,n,r):4===t.strategy||o===i?(cO(t,2+(r?1:0),3),vO(t,Jz,Gz)):(cO(t,4+(r?1:0),3),function(t,e,n,r){var i;for(cO(t,e-257,5),cO(t,n-1,5),cO(t,r-4,4),i=0;i<r;i++)cO(t,t.bl_tree[2*Kz[i]+1],3);_O(t,t.dyn_ltree,e-1),_O(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),vO(t,t.dyn_ltree,t.dyn_dtree)),pO(t),r&&mO(t)},Cz._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(tO[n]+Oz+1)]++,t.dyn_dtree[2*uO(e)]++),t.last_lit===t.lit_bufsize-1},Cz._tr_align=function(t){cO(t,2,3),fO(t,qz,Jz),function(t){16===t.bi_valid?(lO(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)};var EO=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0};var AO=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var MO,SO=function(t,e,n,r){var i=AO,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},CO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},kO=Az,FO=Cz,NO=EO,TO=SO,BO=CO,zO=0,OO=4,IO=0,RO=-2,PO=-1,$O=4,LO=2,jO=8,UO=9,qO=286,VO=30,WO=19,ZO=2*qO+1,HO=15,YO=3,XO=258,KO=XO+YO+1,JO=42,GO=103,QO=113,tI=666,eI=1,nI=2,rI=3,iI=4;function oI(t,e){return t.msg=BO[e],e}function aI(t){return(t<<1)-(t>4?9:0)}function sI(t){for(var e=t.length;--e>=0;)t[e]=0}function uI(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(kO.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function lI(t,e){FO._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,uI(t.strm)}function cI(t,e){t.pending_buf[t.pending++]=e}function fI(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function hI(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,kO.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=NO(t.adler,e,i,n):2===t.state.wrap&&(t.adler=TO(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function dI(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-KO?t.strstart-(t.w_size-KO):0,l=t.window,c=t.w_mask,f=t.prev,h=t.strstart+XO,d=l[o+a-1],p=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(n=e)+a]===p&&l[n+a-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=XO-(h-o),o=h-XO,r>a){if(t.match_start=e,a=r,r>=s)break;d=l[o+a-1],p=l[o+a]}}}while((e=f[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function pI(t){var e,n,r,i,o,a=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-KO)){kO.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=a?r-a:0}while(--n);e=n=a;do{r=t.prev[--e],t.prev[e]=r>=a?r-a:0}while(--n);i+=a}if(0===t.strm.avail_in)break;if(n=hI(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=YO)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+YO-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<YO)););}while(t.lookahead<KO&&0!==t.strm.avail_in)}function mI(t,e){for(var n,r;;){if(t.lookahead<KO){if(pI(t),t.lookahead<KO&&e===zO)return eI;if(0===t.lookahead)break}if(n=0,t.lookahead>=YO&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+YO-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-KO&&(t.match_length=dI(t,n)),t.match_length>=YO)if(r=FO._tr_tally(t,t.strstart-t.match_start,t.match_length-YO),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=YO){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+YO-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=FO._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(lI(t,!1),0===t.strm.avail_out))return eI}return t.insert=t.strstart<YO-1?t.strstart:YO-1,e===OO?(lI(t,!0),0===t.strm.avail_out?rI:iI):t.last_lit&&(lI(t,!1),0===t.strm.avail_out)?eI:nI}function gI(t,e){for(var n,r,i;;){if(t.lookahead<KO){if(pI(t),t.lookahead<KO&&e===zO)return eI;if(0===t.lookahead)break}if(n=0,t.lookahead>=YO&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+YO-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=YO-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-KO&&(t.match_length=dI(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===YO&&t.strstart-t.match_start>4096)&&(t.match_length=YO-1)),t.prev_length>=YO&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-YO,r=FO._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-YO),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+YO-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=YO-1,t.strstart++,r&&(lI(t,!1),0===t.strm.avail_out))return eI}else if(t.match_available){if((r=FO._tr_tally(t,0,t.window[t.strstart-1]))&&lI(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return eI}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=FO._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<YO-1?t.strstart:YO-1,e===OO?(lI(t,!0),0===t.strm.avail_out?rI:iI):t.last_lit&&(lI(t,!1),0===t.strm.avail_out)?eI:nI}function yI(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function vI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=jO,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new kO.Buf16(2*ZO),this.dyn_dtree=new kO.Buf16(2*(2*VO+1)),this.bl_tree=new kO.Buf16(2*(2*WO+1)),sI(this.dyn_ltree),sI(this.dyn_dtree),sI(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new kO.Buf16(HO+1),this.heap=new kO.Buf16(2*qO+1),sI(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new kO.Buf16(2*qO+1),sI(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function wI(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=LO,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?JO:QO,t.adler=2===e.wrap?0:1,e.last_flush=zO,FO._tr_init(e),IO):oI(t,RO)}function bI(t){var e=wI(t);return e===IO&&function(t){t.window_size=2*t.w_size,sI(t.head),t.max_lazy_match=MO[t.level].max_lazy,t.good_match=MO[t.level].good_length,t.nice_match=MO[t.level].nice_length,t.max_chain_length=MO[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=YO-1,t.match_available=0,t.ins_h=0}(t.state),e}function _I(t,e,n,r,i,o){if(!t)return RO;var a=1;if(e===PO&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>UO||n!==jO||r<8||r>15||e<0||e>9||o<0||o>$O)return oI(t,RO);8===r&&(r=9);var s=new vI;return t.state=s,s.strm=t,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+YO-1)/YO),s.window=new kO.Buf8(2*s.w_size),s.head=new kO.Buf16(s.hash_size),s.prev=new kO.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new kO.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,bI(t)}MO=[new yI(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(pI(t),0===t.lookahead&&e===zO)return eI;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,lI(t,!1),0===t.strm.avail_out))return eI;if(t.strstart-t.block_start>=t.w_size-KO&&(lI(t,!1),0===t.strm.avail_out))return eI}return t.insert=0,e===OO?(lI(t,!0),0===t.strm.avail_out?rI:iI):(t.strstart>t.block_start&&(lI(t,!1),t.strm.avail_out),eI)})),new yI(4,4,8,4,mI),new yI(4,5,16,8,mI),new yI(4,6,32,32,mI),new yI(4,4,16,16,gI),new yI(8,16,32,32,gI),new yI(8,16,128,128,gI),new yI(8,32,128,256,gI),new yI(32,128,258,1024,gI),new yI(32,258,258,4096,gI)],Sz.deflateInit=function(t,e){return _I(t,e,jO,15,8,0)},Sz.deflateInit2=_I,Sz.deflateReset=bI,Sz.deflateResetKeep=wI,Sz.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?RO:(t.state.gzhead=e,IO):RO},Sz.deflate=function(t,e){var n,r,i,o;if(!t||!t.state||e>5||e<0)return t?oI(t,RO):RO;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===tI&&e!==OO)return oI(t,0===t.avail_out?-5:RO);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===JO)if(2===r.wrap)t.adler=0,cI(r,31),cI(r,139),cI(r,8),r.gzhead?(cI(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),cI(r,255&r.gzhead.time),cI(r,r.gzhead.time>>8&255),cI(r,r.gzhead.time>>16&255),cI(r,r.gzhead.time>>24&255),cI(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),cI(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(cI(r,255&r.gzhead.extra.length),cI(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=TO(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(cI(r,0),cI(r,0),cI(r,0),cI(r,0),cI(r,0),cI(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),cI(r,3),r.status=QO);else{var a=jO+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=QO,fI(r,a),0!==r.strstart&&(fI(r,t.adler>>>16),fI(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=TO(t.adler,r.pending_buf,r.pending-i,i)),uI(t),i=r.pending,r.pending!==r.pending_buf_size));)cI(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=TO(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=TO(t.adler,r.pending_buf,r.pending-i,i)),uI(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,cI(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=TO(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=TO(t.adler,r.pending_buf,r.pending-i,i)),uI(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,cI(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=TO(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=GO)}else r.status=GO;if(r.status===GO&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&uI(t),r.pending+2<=r.pending_buf_size&&(cI(r,255&t.adler),cI(r,t.adler>>8&255),t.adler=0,r.status=QO)):r.status=QO),0!==r.pending){if(uI(t),0===t.avail_out)return r.last_flush=-1,IO}else if(0===t.avail_in&&aI(e)<=aI(n)&&e!==OO)return oI(t,-5);if(r.status===tI&&0!==t.avail_in)return oI(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==zO&&r.status!==tI){var s=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(pI(t),0===t.lookahead)){if(e===zO)return eI;break}if(t.match_length=0,n=FO._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(lI(t,!1),0===t.strm.avail_out))return eI}return t.insert=0,e===OO?(lI(t,!0),0===t.strm.avail_out?rI:iI):t.last_lit&&(lI(t,!1),0===t.strm.avail_out)?eI:nI}(r,e):3===r.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=XO){if(pI(t),t.lookahead<=XO&&e===zO)return eI;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=YO&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+XO;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=XO-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=YO?(n=FO._tr_tally(t,1,t.match_length-YO),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=FO._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(lI(t,!1),0===t.strm.avail_out))return eI}return t.insert=0,e===OO?(lI(t,!0),0===t.strm.avail_out?rI:iI):t.last_lit&&(lI(t,!1),0===t.strm.avail_out)?eI:nI}(r,e):MO[r.level].func(r,e);if(s!==rI&&s!==iI||(r.status=tI),s===eI||s===rI)return 0===t.avail_out&&(r.last_flush=-1),IO;if(s===nI&&(1===e?FO._tr_align(r):5!==e&&(FO._tr_stored_block(r,0,0,!1),3===e&&(sI(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),uI(t),0===t.avail_out))return r.last_flush=-1,IO}return e!==OO?IO:r.wrap<=0?1:(2===r.wrap?(cI(r,255&t.adler),cI(r,t.adler>>8&255),cI(r,t.adler>>16&255),cI(r,t.adler>>24&255),cI(r,255&t.total_in),cI(r,t.total_in>>8&255),cI(r,t.total_in>>16&255),cI(r,t.total_in>>24&255)):(fI(r,t.adler>>>16),fI(r,65535&t.adler)),uI(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?IO:1)},Sz.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==JO&&69!==e&&73!==e&&91!==e&&e!==GO&&e!==QO&&e!==tI?oI(t,RO):(t.state=null,e===QO?oI(t,-3):IO):RO},Sz.deflateSetDictionary=function(t,e){var n,r,i,o,a,s,u,l,c=e.length;if(!t||!t.state)return RO;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==JO||n.lookahead)return RO;for(1===o&&(t.adler=NO(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(sI(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new kO.Buf8(n.w_size),kO.arraySet(l,e,c-n.w_size,n.w_size,0),e=l,c=n.w_size),a=t.avail_in,s=t.next_in,u=t.input,t.avail_in=c,t.next_in=0,t.input=e,pI(n);n.lookahead>=YO;){r=n.strstart,i=n.lookahead-(YO-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+YO-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=YO-1,pI(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=YO-1,n.match_available=0,t.next_in=s,t.input=u,t.avail_in=a,n.wrap=o,IO},Sz.deflateInfo="pako deflate (from Nodeca project)";var xI={},DI=Az,EI=!0,AI=!0;try{String.fromCharCode.apply(null,[0])}catch(t){EI=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){AI=!1}for(var MI=new DI.Buf8(256),SI=0;SI<256;SI++)MI[SI]=SI>=252?6:SI>=248?5:SI>=240?4:SI>=224?3:SI>=192?2:1;function CI(t,e){if(e<65534&&(t.subarray&&AI||!t.subarray&&EI))return String.fromCharCode.apply(null,DI.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}MI[254]=MI[254]=1,xI.string2buf=function(t){var e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new DI.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},xI.buf2binstring=function(t){return CI(t,t.length)},xI.binstring2buf=function(t){for(var e=new DI.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},xI.buf2string=function(t,e){var n,r,i,o,a=e||t.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=t[n++])<128)s[r++]=i;else if((o=MI[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&t[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return CI(s,r)},xI.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+MI[t[n]]>e?n:e};var kI=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},FI=Sz,NI=Az,TI=xI,BI=CO,zI=kI,OI=Object.prototype.toString,II=0,RI=-1,PI=0,$I=8;function LI(t){if(!(this instanceof LI))return new LI(t);this.options=NI.assign({level:RI,method:$I,chunkSize:16384,windowBits:15,memLevel:8,strategy:PI,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zI,this.strm.avail_out=0;var n=FI.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==II)throw new Error(BI[n]);if(e.header&&FI.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?TI.string2buf(e.dictionary):"[object ArrayBuffer]"===OI.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=FI.deflateSetDictionary(this.strm,r))!==II)throw new Error(BI[n]);this._dict_set=!0}}function jI(t,e){var n=new LI(e);if(n.push(t,!0),n.err)throw n.msg||BI[n.err];return n.result}LI.prototype.push=function(t,e){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=TI.string2buf(t):"[object ArrayBuffer]"===OI.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new NI.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=FI.deflate(i,r))&&n!==II)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(TI.buf2binstring(NI.shrinkBuf(i.output,i.next_out))):this.onData(NI.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=FI.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===II):2!==r||(this.onEnd(II),i.avail_out=0,!0)},LI.prototype.onData=function(t){this.chunks.push(t)},LI.prototype.onEnd=function(t){t===II&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=NI.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},Mz.Deflate=LI,Mz.deflate=jI,Mz.deflateRaw=function(t,e){return(e=e||{}).raw=!0,jI(t,e)},Mz.gzip=function(t,e){return(e=e||{}).gzip=!0,jI(t,e)};var UI={},qI={},VI=Az,WI=15,ZI=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],HI=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],YI=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],XI=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],KI=Az,JI=EO,GI=SO,QI=function(t,e){var n,r,i,o,a,s,u,l,c,f,h,d,p,m,g,y,v,w,b,_,x,D,E,A,M;n=t.state,r=t.next_in,A=t.input,i=r+(t.avail_in-5),o=t.next_out,M=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{p<15&&(d+=A[r++]<<p,p+=8,d+=A[r++]<<p,p+=8),w=m[d&y];e:for(;;){if(d>>>=b=w>>>24,p-=b,0===(b=w>>>16&255))M[o++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=m[(65535&w)+(d&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&w,(b&=15)&&(p<b&&(d+=A[r++]<<p,p+=8),_+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=A[r++]<<p,p+=8,d+=A[r++]<<p,p+=8),w=g[d&v];n:for(;;){if(d>>>=b=w>>>24,p-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=g[(65535&w)+(d&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&w,p<(b&=15)&&(d+=A[r++]<<p,(p+=8)<b&&(d+=A[r++]<<p,p+=8)),(x+=d&(1<<b)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=b,p-=b,x>(b=o-a)){if((b=x-b)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(D=0,E=h,0===f){if(D+=l-b,b<_){_-=b;do{M[o++]=h[D++]}while(--b);D=o-x,E=M}}else if(f<b){if(D+=l+f-b,(b-=f)<_){_-=b;do{M[o++]=h[D++]}while(--b);if(D=0,f<_){_-=b=f;do{M[o++]=h[D++]}while(--b);D=o-x,E=M}}}else if(D+=f-b,b<_){_-=b;do{M[o++]=h[D++]}while(--b);D=o-x,E=M}for(;_>2;)M[o++]=E[D++],M[o++]=E[D++],M[o++]=E[D++],_-=3;_&&(M[o++]=E[D++],_>1&&(M[o++]=E[D++]))}else{D=o-x;do{M[o++]=M[D++],M[o++]=M[D++],M[o++]=M[D++],_-=3}while(_>2);_&&(M[o++]=M[D++],_>1&&(M[o++]=M[D++]))}break}}break}}while(r<i&&o<s);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p},tR=function(t,e,n,r,i,o,a,s){var u,l,c,f,h,d,p,m,g,y=s.bits,v=0,w=0,b=0,_=0,x=0,D=0,E=0,A=0,M=0,S=0,C=null,k=0,F=new VI.Buf16(16),N=new VI.Buf16(16),T=null,B=0;for(v=0;v<=WI;v++)F[v]=0;for(w=0;w<r;w++)F[e[n+w]]++;for(x=y,_=WI;_>=1&&0===F[_];_--);if(x>_&&(x=_),0===_)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<_&&0===F[b];b++);for(x<b&&(x=b),A=1,v=1;v<=WI;v++)if(A<<=1,(A-=F[v])<0)return-1;if(A>0&&(0===t||1!==_))return-1;for(N[1]=0,v=1;v<WI;v++)N[v+1]=N[v]+F[v];for(w=0;w<r;w++)0!==e[n+w]&&(a[N[e[n+w]]++]=w);if(0===t?(C=T=a,d=19):1===t?(C=ZI,k-=257,T=HI,B-=257,d=256):(C=YI,T=XI,d=-1),S=0,w=0,v=b,h=o,D=x,E=0,c=-1,f=(M=1<<x)-1,1===t&&M>852||2===t&&M>592)return 1;for(;;){p=v-E,a[w]<d?(m=0,g=a[w]):a[w]>d?(m=T[B+a[w]],g=C[k+a[w]]):(m=96,g=0),u=1<<v-E,b=l=1<<D;do{i[h+(S>>E)+(l-=u)]=p<<24|m<<16|g|0}while(0!==l);for(u=1<<v-1;S&u;)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,w++,0==--F[v]){if(v===_)break;v=e[n+a[w]]}if(v>x&&(S&f)!==c){for(0===E&&(E=x),h+=b,A=1<<(D=v-E);D+E<_&&!((A-=F[D+E])<=0);)D++,A<<=1;if(M+=1<<D,1===t&&M>852||2===t&&M>592)return 1;i[c=S&f]=x<<24|D<<16|h-o|0}}return 0!==S&&(i[h+S]=v-E<<24|64<<16|0),s.bits=x,0},eR=1,nR=2,rR=0,iR=-2,oR=1,aR=12,sR=30,uR=852,lR=592;function cR(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function fR(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new KI.Buf16(320),this.work=new KI.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function hR(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=oR,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new KI.Buf32(uR),e.distcode=e.distdyn=new KI.Buf32(lR),e.sane=1,e.back=-1,rR):iR}function dR(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,hR(t)):iR}function pR(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?iR:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,dR(t))):iR}function mR(t,e){var n,r;return t?(r=new fR,t.state=r,r.window=null,(n=pR(t,e))!==rR&&(t.state=null),n):iR}var gR,yR,vR=!0;function wR(t){if(vR){var e;for(gR=new KI.Buf32(512),yR=new KI.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(tR(eR,t.lens,0,288,gR,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;tR(nR,t.lens,0,32,yR,0,t.work,{bits:5}),vR=!1}t.lencode=gR,t.lenbits=9,t.distcode=yR,t.distbits=5}function bR(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new KI.Buf8(o.wsize)),r>=o.wsize?(KI.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),KI.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(KI.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}qI.inflateReset=dR,qI.inflateReset2=pR,qI.inflateResetKeep=hR,qI.inflateInit=function(t){return mR(t,15)},qI.inflateInit2=mR,qI.inflate=function(t,e){var n,r,i,o,a,s,u,l,c,f,h,d,p,m,g,y,v,w,b,_,x,D,E,A,M=0,S=new KI.Buf8(4),C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return iR;(n=t.state).mode===aR&&(n.mode=13),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,c=n.bits,f=s,h=u,D=rR;t:for(;;)switch(n.mode){case oR:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===l){n.check=0,S[0]=255&l,S[1]=l>>>8&255,n.check=GI(n.check,S,2,0),l=0,c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=sR;break}if(8!=(15&l)){t.msg="unknown compression method",n.mode=sR;break}if(c-=4,x=8+(15&(l>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=sR;break}n.dmax=1<<x,t.adler=n.check=1,n.mode=512&l?10:aR,l=0,c=0;break;case 2:for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(n.flags=l,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=sR;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=sR;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=GI(n.check,S,2,0)),l=0,c=0,n.mode=3;case 3:for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,n.check=GI(n.check,S,4,0)),l=0,c=0,n.mode=4;case 4:for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=GI(n.check,S,2,0)),l=0,c=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=GI(n.check,S,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((d=n.length)>s&&(d=s),d&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),KI.arraySet(n.head.extra,r,o,d,x)),512&n.flags&&(n.check=GI(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;d=0;do{x=r[o+d++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&d<s);if(512&n.flags&&(n.check=GI(n.check,r,d,o)),s-=d,o+=d,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;d=0;do{x=r[o+d++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&d<s);if(512&n.flags&&(n.check=GI(n.check,r,d,o)),s-=d,o+=d,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=sR;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=aR;break;case 10:for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}t.adler=n.check=cR(l),l=0,c=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,2;t.adler=n.check=1,n.mode=aR;case aR:if(5===e||6===e)break t;case 13:if(n.last){l>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}switch(n.last=1&l,c-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(wR(n),n.mode=20,6===e){l>>>=2,c-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=sR}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=sR;break}if(n.length=65535&l,l=0,c=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(d=n.length){if(d>s&&(d=s),d>u&&(d=u),0===d)break t;KI.arraySet(i,r,o,d,a),s-=d,o+=d,u-=d,a+=d,n.length-=d;break}n.mode=aR;break;case 17:for(;c<14;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=sR;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.lens[C[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},D=tR(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,D){t.msg="invalid code lengths set",n.mode=sR;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;y=(M=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&M,!((g=M>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(v<16)l>>>=g,c-=g,n.lens[n.have++]=v;else{if(16===v){for(A=g+2;c<A;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l>>>=g,c-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=sR;break}x=n.lens[n.have-1],d=3+(3&l),l>>>=2,c-=2}else if(17===v){for(A=g+3;c<A;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}c-=g,x=0,d=3+(7&(l>>>=g)),l>>>=3,c-=3}else{for(A=g+7;c<A;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}c-=g,x=0,d=11+(127&(l>>>=g)),l>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=sR;break}for(;d--;)n.lens[n.have++]=x}}if(n.mode===sR)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=sR;break}if(n.lenbits=9,E={bits:n.lenbits},D=tR(eR,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,D){t.msg="invalid literal/lengths set",n.mode=sR;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},D=tR(nR,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,D){t.msg="invalid distances set",n.mode=sR;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(s>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,QI(t,h),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,c=n.bits,n.mode===aR&&(n.back=-1);break}for(n.back=0;y=(M=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&M,!((g=M>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(y&&0==(240&y)){for(w=g,b=y,_=v;y=(M=n.lencode[_+((l&(1<<w+b)-1)>>w)])>>>16&255,v=65535&M,!(w+(g=M>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=g,c-=g,n.back+=g,n.length=v,0===y){n.mode=26;break}if(32&y){n.back=-1,n.mode=aR;break}if(64&y){t.msg="invalid literal/length code",n.mode=sR;break}n.extra=15&y,n.mode=22;case 22:if(n.extra){for(A=n.extra;c<A;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;y=(M=n.distcode[l&(1<<n.distbits)-1])>>>16&255,v=65535&M,!((g=M>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(0==(240&y)){for(w=g,b=y,_=v;y=(M=n.distcode[_+((l&(1<<w+b)-1)>>w)])>>>16&255,v=65535&M,!(w+(g=M>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=g,c-=g,n.back+=g,64&y){t.msg="invalid distance code",n.mode=sR;break}n.offset=v,n.extra=15&y,n.mode=24;case 24:if(n.extra){for(A=n.extra;c<A;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=sR;break}n.mode=25;case 25:if(0===u)break t;if(d=h-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=sR;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,p=a-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{i[a++]=m[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;i[a++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break t;s--,l|=r[o++]<<c,c+=8}if(h-=u,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?GI(n.check,i,h,a-h):JI(n.check,i,h,a-h)),h=u,(n.flags?l:cR(l))!==n.check){t.msg="incorrect data check",n.mode=sR;break}l=0,c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=sR;break}l=0,c=0}n.mode=29;case 29:D=1;break t;case sR:D=-3;break t;case 31:return-4;default:return iR}return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,(n.wsize||h!==t.avail_out&&n.mode<sR&&(n.mode<27||4!==e))&&bR(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?GI(n.check,i,h,t.next_out-h):JI(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===aR?128:0)+(20===n.mode||15===n.mode?256:0),(0===f&&0===h||4===e)&&D===rR&&(D=-5),D},qI.inflateEnd=function(t){if(!t||!t.state)return iR;var e=t.state;return e.window&&(e.window=null),t.state=null,rR},qI.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?iR:(n.head=e,e.done=!1,rR):iR},qI.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?iR:11===n.mode&&JI(1,e,r,0)!==n.check?-3:bR(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,rR):iR},qI.inflateInfo="pako inflate (from Nodeca project)";var _R={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var xR=qI,DR=Az,ER=xI,AR=_R,MR=CO,SR=kI,CR=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},kR=Object.prototype.toString;function FR(t){if(!(this instanceof FR))return new FR(t);this.options=DR.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SR,this.strm.avail_out=0;var n=xR.inflateInit2(this.strm,e.windowBits);if(n!==AR.Z_OK)throw new Error(MR[n]);if(this.header=new CR,xR.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ER.string2buf(e.dictionary):"[object ArrayBuffer]"===kR.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=xR.inflateSetDictionary(this.strm,e.dictionary))!==AR.Z_OK))throw new Error(MR[n])}function NR(t,e){var n=new FR(e);if(n.push(t,!0),n.err)throw n.msg||MR[n.err];return n.result}FR.prototype.push=function(t,e){var n,r,i,o,a,s=this.strm,u=this.options.chunkSize,l=this.options.dictionary,c=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?AR.Z_FINISH:AR.Z_NO_FLUSH,"string"==typeof t?s.input=ER.binstring2buf(t):"[object ArrayBuffer]"===kR.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new DR.Buf8(u),s.next_out=0,s.avail_out=u),(n=xR.inflate(s,AR.Z_NO_FLUSH))===AR.Z_NEED_DICT&&l&&(n=xR.inflateSetDictionary(this.strm,l)),n===AR.Z_BUF_ERROR&&!0===c&&(n=AR.Z_OK,c=!1),n!==AR.Z_STREAM_END&&n!==AR.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&n!==AR.Z_STREAM_END&&(0!==s.avail_in||r!==AR.Z_FINISH&&r!==AR.Z_SYNC_FLUSH)||("string"===this.options.to?(i=ER.utf8border(s.output,s.next_out),o=s.next_out-i,a=ER.buf2string(s.output,i),s.next_out=o,s.avail_out=u-o,o&&DR.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(DR.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(c=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==AR.Z_STREAM_END);return n===AR.Z_STREAM_END&&(r=AR.Z_FINISH),r===AR.Z_FINISH?(n=xR.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===AR.Z_OK):r!==AR.Z_SYNC_FLUSH||(this.onEnd(AR.Z_OK),s.avail_out=0,!0)},FR.prototype.onData=function(t){this.chunks.push(t)},FR.prototype.onEnd=function(t){t===AR.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=DR.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},UI.Inflate=FR,UI.inflate=NR,UI.inflateRaw=function(t,e){return(e=e||{}).raw=!0,NR(t,e)},UI.ungzip=NR;var TR={};(0,Az.assign)(TR,Mz,UI,_R);var BR="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,zR=TR,OR=SB(),IR=kB,RR=BR?"uint8array":"array";function PR(t,e){IR.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}Ez.magic="\b\0",OR.inherits(PR,IR),PR.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(OR.transformTo(RR,t.data),!1)},PR.prototype.flush=function(){IR.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},PR.prototype.cleanUp=function(){IR.prototype.cleanUp.call(this),this._pako=null},PR.prototype._createPako=function(){this._pako=new zR[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},Ez.compressWorker=function(t){return new PR("Deflate",t)},Ez.uncompressWorker=function(){return new PR("Inflate",{})};var $R=kB;Dz.STORE={magic:"\0\0",compressWorker:function(){return new $R("STORE compression")},uncompressWorker:function(){return new $R("STORE decompression")}},Dz.DEFLATE=Ez;var LR={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},jR=SB(),UR=kB,qR=DT,VR=GB,WR=LR,ZR=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},HR=function(t,e,n,r,i,o){var a,s,u=t.file,l=t.compression,c=o!==qR.utf8encode,f=jR.transformTo("string",o(u.name)),h=jR.transformTo("string",qR.utf8encode(u.name)),d=u.comment,p=jR.transformTo("string",o(d)),m=jR.transformTo("string",qR.utf8encode(d)),g=h.length!==u.name.length,y=m.length!==d.length,v="",w="",b="",_=u.dir,x=u.date,D={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(D.crc32=t.crc32,D.compressedSize=t.compressedSize,D.uncompressedSize=t.uncompressedSize);var E=0;e&&(E|=8),c||!g&&!y||(E|=2048);var A,M,S,C=0,k=0;_&&(C|=16),"UNIX"===i?(k=798,C|=(A=u.unixPermissions,M=_,S=A,A||(S=M?16893:33204),(65535&S)<<16)):(k=20,C|=63&(u.dosPermissions||0)),a=x.getUTCHours(),a<<=6,a|=x.getUTCMinutes(),a<<=5,a|=x.getUTCSeconds()/2,s=x.getUTCFullYear()-1980,s<<=4,s|=x.getUTCMonth()+1,s<<=5,s|=x.getUTCDate(),g&&(w=ZR(1,1)+ZR(VR(f),4)+h,v+="up"+ZR(w.length,2)+w),y&&(b=ZR(1,1)+ZR(VR(p),4)+m,v+="uc"+ZR(b.length,2)+b);var F="";return F+="\n\0",F+=ZR(E,2),F+=l.magic,F+=ZR(a,2),F+=ZR(s,2),F+=ZR(D.crc32,4),F+=ZR(D.compressedSize,4),F+=ZR(D.uncompressedSize,4),F+=ZR(f.length,2),F+=ZR(v.length,2),{fileRecord:WR.LOCAL_FILE_HEADER+F+f+v,dirRecord:WR.CENTRAL_FILE_HEADER+ZR(k,2)+F+ZR(p.length,2)+"\0\0\0\0"+ZR(C,4)+ZR(r,4)+f+v+p}},YR=function(t){return WR.DATA_DESCRIPTOR+ZR(t.crc32,4)+ZR(t.compressedSize,4)+ZR(t.uncompressedSize,4)};function XR(t,e,n,r){UR.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}jR.inherits(XR,UR),XR.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,UR.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},XR.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=HR(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},XR.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=HR(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:YR(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},XR.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,i){var o=jR.transformTo("string",i(r));return WR.CENTRAL_DIRECTORY_END+"\0\0\0\0"+ZR(t,2)+ZR(t,2)+ZR(e,4)+ZR(n,4)+ZR(o.length,2)+o}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},XR.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},XR.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},XR.prototype.resume=function(){return!!UR.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},XR.prototype.error=function(t){var e=this._sources;if(!UR.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},XR.prototype.lock=function(){UR.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()};var KR=Dz,JR=XR;xz.generateWorker=function(t,e,n){var r=new JR(e.streamFiles,n,e.platform,e.encodeFileName),i=0;try{t.forEach((function(t,n){i++;var o=function(t,e){var n=t||e,r=KR[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},s=n.dir,u=n.date;n._compressWorker(o,a).withStreamInfo("file",{name:t,dir:s,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=i}catch(t){r.error(t)}return r};var GR=SB(),QR=kB;function tP(t,e){QR.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}GR.inherits(tP,QR),tP.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},tP.prototype.pause=function(){return!!QR.prototype.pause.call(this)&&(this._stream.pause(),!0)},tP.prototype.resume=function(){return!!QR.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var eP=tP,nP=DT,rP=SB(),iP=kB,oP=VB,aP=WB,sP=fz,uP=_z,lP=xz,cP=DB,fP=eP,hP=function(t,e,n){var r,i=rP.getTypeOf(e),o=rP.extend(n||{},aP);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=pP(t)),o.createFolders&&(r=dP(t))&&mP.call(this,r,!0);var a="string"===i&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!a),(e instanceof sP&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",i="string");var s=null;s=e instanceof sP||e instanceof iP?e:cP.isNode&&cP.isStream(e)?new fP(t,e):rP.prepareContent(t,e,o.binary,o.optimizedBinaryString,o.base64);var u=new uP(t,s,o);this.files[t]=u},dP=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},pP=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},mP=function(t,e){return e=void 0!==e?e:aP.createFolders,t=pP(t),this.files[t]||hP.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function gP(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var yP={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r)},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1===arguments.length){if(gP(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,hP.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(gP(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=mP.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=rP.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:nP.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");rP.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=lP.generateWorker(this,n,r)}catch(t){(e=new iP("error")).error(t)}return new oP(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}},vP=yP,wP=SB();function bP(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}bP.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return wP.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}};var _P=bP,xP=_P;function DP(t){xP.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}SB().inherits(DP,xP),DP.prototype.byteAt=function(t){return this.data[this.zero+t]},DP.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},DP.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},DP.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var EP=DP,AP=_P;function MP(t){AP.call(this,t)}SB().inherits(MP,AP),MP.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},MP.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},MP.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},MP.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var SP=MP,CP=EP;function kP(t){CP.call(this,t)}SB().inherits(kP,CP),kP.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var FP=kP,NP=FP;function TP(t){NP.call(this,t)}SB().inherits(TP,NP),TP.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var BP=TP,zP=SB(),OP=AT,IP=EP,RP=SP,PP=BP,$P=FP,LP=function(t){var e=zP.getTypeOf(t);return zP.checkSupport(e),"string"!==e||OP.uint8array?"nodebuffer"===e?new PP(t):OP.uint8array?new $P(zP.transformTo("uint8array",t)):new IP(zP.transformTo("array",t)):new RP(t)},jP=LP,UP=SB(),qP=fz,VP=GB,WP=DT,ZP=Dz,HP=AT;function YP(t,e){this.options=t,this.loadOptions=e}YP.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in ZP)if(Object.prototype.hasOwnProperty.call(ZP,e)&&ZP[e].magic===t)return ZP[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+UP.pretty(this.compressionMethod)+" unknown (inner file : "+UP.transformTo("string",this.fileName)+")");this.decompressed=new qP(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=jP(this.extraFields[1].value);this.uncompressedSize===UP.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===UP.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===UP.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===UP.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r};t.setIndex(i)},handleUTF8:function(){var t=HP.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=WP.utf8decode(this.fileName),this.fileCommentStr=WP.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=UP.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=UP.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=jP(t.value);return 1!==e.readInt(1)||VP(this.fileName)!==e.readInt(4)?null:WP.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=jP(t.value);return 1!==e.readInt(1)||VP(this.fileComment)!==e.readInt(4)?null:WP.utf8decode(e.readData(t.length-5))}return null}};var XP=YP,KP=LP,JP=SB(),GP=LR,QP=XP,t$=AT;function e$(t){this.files=[],this.loadOptions=t}e$.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+JP.pretty(e)+", expected "+JP.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=t$.uint8array?"uint8array":"array",n=JP.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(GP.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(GP.CENTRAL_FILE_HEADER);)(t=new QP({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(GP.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,GP.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(GP.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===JP.MAX_VALUE_16BITS||this.diskWithCentralDirStart===JP.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===JP.MAX_VALUE_16BITS||this.centralDirRecords===JP.MAX_VALUE_16BITS||this.centralDirSize===JP.MAX_VALUE_32BITS||this.centralDirOffset===JP.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(GP.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(GP.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,GP.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(GP.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(GP.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,GP.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=KP(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var n$=e$,r$=SB(),i$=MB,o$=DT,a$=n$,s$=nz,u$=DB;function l$(t){return new i$.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new s$);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function c$(){if(!(this instanceof c$))return new c$;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new c$;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}c$.prototype=vP,c$.prototype.loadAsync=function(t,e){var n=this;return e=r$.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o$.utf8decode}),u$.isNode&&u$.isStream(t)?i$.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r$.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new a$(e);return n.load(t),n})).then((function(t){var n=[i$.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var i=0;i<r.length;i++)n.push(l$(r[i]));return i$.Promise.all(n)})).then((function(t){for(var r=t.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o],s=a.fileNameStr,u=r$.resolve(a.fileNameStr);n.file(u,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(n.file(u).unsafeOriginalName=s)}return r.zipComment.length&&(n.comment=r.zipComment),n}))},c$.support=AT,c$.defaults=WB,c$.version="3.10.1",c$.loadAsync=function(t,e){return(new c$).loadAsync(t,e)},c$.external=MB;var f$=mT(c$);const h$=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${t}`)})();function d$(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function p$(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function m$(t,e={}){const n=e.width||function(t){const e=p$(t,"border-left-width"),n=p$(t,"border-right-width");return t.clientWidth+e+n}(t),r=e.height||function(t){const e=p$(t,"border-top-width"),n=p$(t,"border-bottom-width");return t.clientHeight+e+n}(t);return{width:n,height:r}}const g$=16384;function y$(t){return new Promise(((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t}))}async function v$(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(t),async function(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}(i)}const w$=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||w$(n,e))};function b$(t,e,n){const r=`.${t}:${e}`,i=n.cssText?function(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function(t){return d$(t).map((e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}function _$(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const o=h$();try{e.className=`${e.className} ${o}`}catch(t){return}const a=document.createElement("style");a.appendChild(b$(o,n,r)),e.appendChild(a)}const x$="application/font-woff",D$="image/jpeg",E$={woff:x$,woff2:x$,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:D$,jpeg:D$,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function A$(t){const e=function(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return E$[e]||""}function M$(t){return-1!==t.search(/^(data:)/)}function S$(t,e){return`data:${e};base64,${t}`}async function C$(t,e,n){const r=await fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise(((t,e)=>{const o=new FileReader;o.onerror=e,o.onloadend=()=>{try{t(n({res:r,result:o.result}))}catch(t){e(t)}},o.readAsDataURL(i)}))}const k$={};async function F$(t,e,n){const r=function(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}(t,e,n.includeQueryParams);if(null!=k$[r])return k$[r];let i;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const r=await C$(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(n))));i=S$(r,e)}catch(e){i=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${t}`;e&&(r="string"==typeof e?e:e.message),r&&console.warn(r)}return k$[r]=i,i}async function N$(t,e){return w$(t,HTMLCanvasElement)?async function(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):y$(e)}(t):w$(t,HTMLVideoElement)?async function(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height),y$(e.toDataURL())}const n=t.poster,r=A$(n);return y$(await F$(n,r,e))}(t,e):w$(t,HTMLIFrameElement)?async function(t){var e;try{if(null===(e=null==t?void 0:t.contentDocument)||void 0===e?void 0:e.body)return await z$(t.contentDocument.body,{},!0)}catch(t){}return t.cloneNode(!1)}(t):t.cloneNode(!1)}const T$=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function B$(t,e){return w$(e,Element)&&(function(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):d$(r).forEach((i=>{let o=r.getPropertyValue(i);if("font-size"===i&&o.endsWith("px")){const t=Math.floor(parseFloat(o.substring(0,o.length-2)))-.1;o=`${t}px`}w$(t,HTMLIFrameElement)&&"display"===i&&"inline"===o&&(o="block"),"d"===i&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),n.setProperty(i,o,r.getPropertyPriority(i))}))}(t,e),function(t,e){_$(t,e,":before"),_$(t,e,":after")}(t,e),function(t,e){w$(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),w$(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(w$(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));r&&r.setAttribute("selected","")}}(t,e)),e}async function z$(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>N$(t,e))).then((n=>async function(t,e,n){var r,i;let o=[];return o=T$(t)&&t.assignedNodes?d$(t.assignedNodes()):w$(t,HTMLIFrameElement)&&(null===(r=t.contentDocument)||void 0===r?void 0:r.body)?d$(t.contentDocument.body.childNodes):d$((null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes),0===o.length||w$(t,HTMLVideoElement)||await o.reduce(((t,r)=>t.then((()=>z$(r,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}(t,n,e))).then((e=>B$(t,e))).then((t=>async function(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let i=0;i<n.length;i++){const o=n[i].getAttribute("xlink:href");if(o){const n=t.querySelector(o),i=document.querySelector(o);n||!i||r[o]||(r[o]=await z$(i,e,!0))}}const i=Object.values(r);if(i.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(e,"defs");n.appendChild(r);for(let t=0;t<i.length;t++)r.appendChild(i[t]);t.appendChild(n)}return t}(t,e))):null}const O$=/url\((['"]?)([^'"]+?)\1\)/g,I$=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,R$=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function P$(t,e,n,r,i){try{const o=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}(e,n):e,a=A$(e);let s;if(i){s=S$(await i(o),a)}else s=await F$(o,a,r);return t.replace(function(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${s}$3`)}catch(t){}return t}function $$(t){return-1!==t.search(O$)}async function L$(t,e,n){if(!$$(t))return t;const r=function(t,{preferredFontFormat:e}){return e?t.replace(R$,(t=>{for(;;){const[n,,r]=I$.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}})):t}(t,n),i=function(t){const e=[];return t.replace(O$,((t,n,r)=>(e.push(r),t))),e.filter((t=>!M$(t)))}(r);return i.reduce(((t,r)=>t.then((t=>P$(t,r,e,n)))),Promise.resolve(r))}async function j$(t,e,n){var r;const i=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(i){const r=await L$(i,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function U$(t,e){w$(t,Element)&&(await async function(t,e){await j$("background",t,e)||await j$("background-image",t,e),await j$("mask",t,e)||await j$("mask-image",t,e)}(t,e),await async function(t,e){const n=w$(t,HTMLImageElement);if((!n||M$(t.src))&&(!w$(t,SVGImageElement)||M$(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await F$(r,A$(r),e);await new Promise(((e,r)=>{t.onload=e,t.onerror=r;const o=t;o.decode&&(o.decode=e),"lazy"===o.loading&&(o.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i}))}(t,e),await async function(t,e){const n=d$(t.childNodes).map((t=>U$(t,e)));await Promise.all(n).then((()=>t))}(t,e))}const q$={};async function V$(t){let e=q$[t];if(null!=e)return e;const n=await fetch(t);return e={url:t,cssText:await n.text()},q$[t]=e,e}async function W$(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map((async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),C$(o,e.fetchRequestInit,(({result:t})=>(n=n.replace(i,`url(${t})`),[i,t])))}));return Promise.all(i).then((()=>n))}function Z$(t){if(null==t)return[];const e=[];let n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const t=r.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=i.exec(n);if(null===t){if(t=o.exec(n),null===t)break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;e.push(t[0])}return e}async function H$(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=d$(t.ownerDocument.styleSheets),r=await async function(t,e){const n=[],r=[];return t.forEach((n=>{if("cssRules"in n)try{d$(n.cssRules||[]).forEach(((t,i)=>{if(t.type===CSSRule.IMPORT_RULE){let o=i+1;const a=V$(t.href).then((t=>W$(t,e))).then((t=>Z$(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?o+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));r.push(a)}}))}catch(i){const o=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&r.push(V$(n.href).then((t=>W$(t,e))).then((t=>Z$(t).forEach((t=>{o.insertRule(t,n.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",i)}})),Promise.all(r).then((()=>(t.forEach((t=>{if("cssRules"in t)try{d$(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}(n,e);return function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>$$(t.style.getPropertyValue("src"))))}(r)}async function Y$(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await async function(t,e){const n=await H$(t,e);return(await Promise.all(n.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return L$(t.cssText,n,e)})))).join("\n")}(t,e);if(n){const e=document.createElement("style"),r=document.createTextNode(n);e.appendChild(r),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}async function X$(t,e={}){const{width:n,height:r}=m$(t,e),i=await z$(t,e,!0);await Y$(i,e),await U$(i,e),function(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;null!=r&&Object.keys(r).forEach((t=>{n[t]=r[t]}))}(i,e);return await v$(i,n,r)}async function K$(t,e={}){const{width:n,height:r}=m$(t,e),i=await X$(t,e),o=await y$(i),a=document.createElement("canvas"),s=a.getContext("2d"),u=e.pixelRatio||function(){let t,e;try{e=process}catch(t){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),l=e.canvasWidth||n,c=e.canvasHeight||r;return a.width=l*u,a.height=c*u,e.skipAutoScale||function(t){(t.width>g$||t.height>g$)&&(t.width>g$&&t.height>g$?t.width>t.height?(t.height*=g$/t.width,t.width=g$):(t.width*=g$/t.height,t.height=g$):t.width>g$?(t.height*=g$/t.width,t.width=g$):(t.width*=g$/t.height,t.height=g$))}(a),a.style.width=`${l}`,a.style.height=`${c}`,e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(o,0,0,a.width,a.height),a}var J$={exports:{}};J$.exports=function t(e,n,r){var i,o,a=window,s="application/octet-stream",u=r||s,l=e,c=!n&&!r&&l,f=document.createElement("a"),h=function(t){return String(t)},d=a.Blob||a.MozBlob||a.WebKitBlob||h,p=n||"download";if(d=d.call?d.bind(a):Blob,"true"===String(this)&&(u=(l=[l,u])[0],l=l[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],f.href=c,-1!==f.href.indexOf(c))){var m=new XMLHttpRequest;return m.open("GET",c,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,p,s)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&d!==h))return navigator.msSaveBlob?navigator.msSaveBlob(w(l),p):b(l);u=(l=w(l)).type||s}else if(/([\x80-\xff])/.test(l)){for(var g=0,y=new Uint8Array(l.length),v=y.length;g<v;++g)y[g]=l.charCodeAt(g);l=new d([y],{type:u})}function w(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),i=r.length,o=0,a=new Uint8Array(i);o<i;++o)a[o]=r.charCodeAt(o);return new d([a],{type:n})}function b(t,e){if("download"in f)return f.href=t,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===e&&setTimeout((function(){a.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(i=l instanceof d?l:new d([l],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(i,p);if(a.URL)b(a.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===h)try{return b("data:"+u+";base64,"+a.btoa(i))}catch(t){return b("data:"+u+","+encodeURIComponent(i))}(o=new FileReader).onload=function(t){b(this.result)},o.readAsDataURL(i)}return!0};var G$=mT(J$.exports);const Q$=location.pathname.substring(0,location.pathname.lastIndexOf("/")),tL={missingMode:new Map([["remove",t=>t],["mean_column",function(t){const e=Array.from({length:t[0].length},((e,n)=>fu(t,(t=>t[n]))));for(const n of t)for(let t=0;t<n.length;t++)null==n[t]&&(n[t]=e[t]);return t}],["interpolate",function(t){function e(t){for(let e=0;e<t.length;e++)if(null==t[e]){let n=e,r=e;for(let e=n+1;e<t.length;e++)if(null!=t[e]){r=e;break}if(0==n)for(let e=n;e<r;e++)t[e]=t[r];else if(n==r){n--;for(let e=n+1;e<r+1;e++)t[e]=t[n]}else{const e=t[n-1],i=t[r];for(let o=n;o<r;o++){const a=(o-n+1)/(r-n+1);t[o]=e+(i-e)*a}}}return t}for(const n of t)e(n);return t}]]),smoothingMode:new Map([["none",t=>t],["ma_1",t=>t.map((t=>pu(t,1,"cut_window")))],["ma_2",t=>t.map((t=>pu(t,2,"cut_window")))],["ma_3",t=>t.map((t=>pu(t,3,"cut_window")))]]),normMode:new Map([["z_row",t=>mu(t,"row")],["z_col",t=>mu(t,"column")],["z_both",t=>mu(t,"both")],["none",t=>t]])},eL=new Map([["okhsl_cone","OKHSL (Lightness Cone)"],["okhsl_flat","OKHSL (Flat)"],["remove","Remove"],["mean_column","Fill Column w/ Mean"],["none","None"],["interpolate","Interpolate"],["ma_1","Moving Average (size 3)"],["ma_2","Moving Average (size 5)"],["ma_3","Moving Average (size 7)"],["z_row","Z-score (row-wise)"],["z_col","Z-score (column-wise)"],["z_both","Z-score (row and column-wise)"],["som","Self-Organizing Map"],["kmc+sammon","K-means + Sammon"],["kmc+pca","K-means + PCA"],["kmc+umap","K-means + UMAP"],["kmc+tsne","K-means + t-SNE"],["on","On"],["off","Off"]]),nL=["spatialDataValue","vectorDataValue","spatialFieldValue","xFieldValue","yFieldValue","missingValuesValue","normValue","smoothingValue","methodValue","kValue"],rL=["colorValue","borderValue","xDateValue"],iL=["counties.geojson","states.geojson"],oL={};function aL(){if(oL.state.spatialData=null,document.getElementById("vector-file-upload").value=null,!oL.state.spatialDataValue.startsWith("[Upload]")){const t="counties.geojson"==oL.state.spatialDataValue?"county":"state";oL.state.vectorDataOptions=oL.vectorDataMap.get(t).map((t=>({value:t,label:t.split("/")[1]}))),oL.spatialDataZip.file(oL.state.spatialDataValue).async("string").then((t=>{oL.state.spatialData=JSON.parse(t)})),oL.spatialDataZip.file("states.geojson").async("string").then((t=>{oL.state.spatialExtraData=JSON.parse(t)}))}}function sL(){if(oL.state.vectorData=null,oL.state.vectorDataValue.startsWith("[Upload]")){const t=new Set;for(const e of oL.state.userVectorData)for(const n of Object.keys(e))t.add(n);oL.state.spatialFieldOptions=[...t],oL.state.xFieldOptions=[...t],oL.state.yFieldOptions=[...t];const e=function(t){const e=oL.state.userVectorData.slice(0,100),n=new Set(oL.state.spatialData.features.map((t=>t.id))),r=[];for(const i of t){const t=new Set(e.map((t=>t[i])));r.push([i,wl(t,n).size])}r.sort(((t,e)=>e[1]-t[1]));const i=r[0][0],o=[...t].find((t=>t.includes("date")));let a=[];for(const n of t)e.map((t=>parseFloat(t[n]))),e.filter((t=>lL(t[n]))).length>50&&a.push(n);a=a.filter((t=>t!=o&&t!=i));const s=a[0];return{id:i,date:o,value:s}}(t);oL.state.xFieldValue=e.date,oL.state.yFieldValue=e.value,oL.state.spatialFieldValue=e.id,uL(!0)}else"..."==oL.state.vectorDataValue?(oL.state.spatialFieldOptions=["..."],oL.state.xFieldOptions=["..."],oL.state.yFieldOptions=["..."],uL(!1)):(oL.vectorDataZip.file(oL.state.vectorDataValue).async("string").then((t=>{oL.state.vectorData=JSON.parse(t),oL.state.spatialFieldOptions=[oL.state.vectorData.zField],oL.state.xFieldOptions=[oL.state.vectorData.xField],oL.state.yFieldOptions=[oL.state.vectorData.yField]})),uL(!1))}function uL(t){const e=["spatial-field-select","x-field-select","y-field-select"].map((t=>document.getElementById(t)));for(const n of e)t?n.removeAttribute("disabled"):n.setAttribute("disabled","")}function lL(t){return"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}function cL(){null==oL.state.result?pL("disabled"):(!function(){const t=new Map(oL.state.result.labels.map(((t,e)=>[oL.state.vectorData.zIndexes[e],t])));for(const e of oL.state.spatialData.features)e.properties.label_assignment=t.get(e.id)}(),fL(),pL("pointless"))}function fL(){dL(),function(){const t=.75*window.innerHeight,e=oL.plotContainer.getBoundingClientRect().height,n=t/e,r=oL.plotContainer.getBoundingClientRect().width;let i="a";hL-n*r>250&&(i="b");dL(hL*n,i)}()}!async function(){mL(!0),oL.state=new yu,oL.runButton=document.getElementById("run-button"),oL.plotContainer=document.getElementById("plot-container"),oL.infoSpan=document.getElementById("info-span"),oL.state.defineProperty("result"),function(){oL.urlParams=new URLSearchParams(window.location.hash.replace("#",""));for(const t of[...nL,...rL])oL.urlParams.has(t)&&oL.state.defineProperty(t,oL.urlParams.get(t))}(),await async function(){const t=new f$,e=await(await fetch(`${Q$}/data/example_spatial_data.zip`)).blob();await t.loadAsync(e),oL.spatialDataZip=t;const n=new f$,r=await(await fetch(`${Q$}/data/example_vector_data.zip`)).blob();await n.loadAsync(r);const i=new Map([["county",[]],["state",[]]]);for(const t of Object.values(n.files))if(!t.dir){const e=t.name.split("/");i.get(e[0]).push(t.name)}oL.vectorDataMap=i,oL.vectorDataZip=n}(),function(){oL.state.defineProperty("spatialDataOptions"),oL.state.defineProperty("spatialDataValue","counties.geojson"),oL.state.defineProperty("spatialExtraDataOptions"),oL.state.defineProperty("spatialExtraDataValue","states.geojson"),oL.state.defineProperty("vectorDataOptions"),oL.state.defineProperty("vectorDataValue","county/cdc_covid_cases_county_week.json"),oL.state.defineProperty("spatialFieldOptions"),oL.state.defineProperty("spatialFieldValue"),oL.state.defineProperty("xFieldOptions"),oL.state.defineProperty("xFieldValue"),oL.state.defineProperty("yFieldOptions"),oL.state.defineProperty("yFieldValue"),oL.state.defineProperty("colorOptions",["okhsl_flat","okhsl_cone"]),oL.state.defineProperty("colorValue","okhsl_cone"),oL.state.defineProperty("borderOptions",["on","off"]),oL.state.defineProperty("borderValue"),oL.state.defineProperty("xDateOptions",["on","off"]),oL.state.defineProperty("xDateValue"),oL.state.defineProperty("missingValuesOptions",[...tL.missingMode.keys()]),oL.state.defineProperty("missingValuesValue"),oL.state.defineProperty("normOptions",[...tL.normMode.keys()]),oL.state.defineProperty("normValue"),oL.state.defineProperty("smoothingOptions",[...tL.smoothingMode.keys()]),oL.state.defineProperty("smoothingValue"),oL.state.defineProperty("methodOptions",["som","kmc+sammon","kmc+pca","kmc+umap","kmc+tsne"]),oL.state.defineProperty("methodValue","kmc+sammon"),oL.state.defineProperty("kValue","9"),oL.state.defineProperty("spatialData"),oL.state.defineProperty("spatialExtraData"),oL.state.defineProperty("vectorData"),oL.state.defineProperty("userVectorData"),gu("#spatial-data-select",oL.state,"spatialDataOptions","spatialDataValue",DL),gu("#spatial-extra-data-select",oL.state,"spatialExtraDataOptions","spatialExtraDataValue",DL),gu("#vector-data-select",oL.state,"vectorDataOptions","vectorDataValue",DL),gu("#spatial-field-select",oL.state,"spatialFieldOptions","spatialFieldValue",DL),gu("#x-field-select",oL.state,"xFieldOptions","xFieldValue",DL),gu("#y-field-select",oL.state,"yFieldOptions","yFieldValue",DL),gu("#missing-select",oL.state,"missingValuesOptions","missingValuesValue",DL),gu("#norm-select",oL.state,"normOptions","normValue",DL),gu("#smooth-select",oL.state,"smoothingOptions","smoothingValue",DL),gu("#method-select",oL.state,"methodOptions","methodValue",DL),function(t,e,n){const r=document.querySelector(t);if(null==r)throw new Error(`No element found for ${t}`);e.addListener((()=>{r.value=e[n]}),n),r.addEventListener("change",(()=>{e[n]=r.value})),r.value=e[n]}("#k-input",oL.state,"kValue"),gu("#color-select",oL.state,"colorOptions","colorValue",DL),gu("#border-select",oL.state,"borderOptions","borderValue",DL),gu("#x-date-select",oL.state,"xDateOptions","xDateValue",DL),document.getElementById("download-results-json").addEventListener("click",(()=>{if(oL.state.result){const t={centroids:oL.state.result.centroids,embeddedCentroids:oL.state.result.embeddedCentroids,assignments:oL.state.result.labels.map(((t,e)=>({id:oL.state.vectorData.zIndexes[e],label:t})))};vL(t,"epivecs_full_results","json")}})),document.getElementById("download-results-csv").addEventListener("click",(()=>{if(oL.state.result){const t=oL.state.result.labels.map(((t,e)=>({id:oL.state.vectorData.zIndexes[e],label:t})));vL(t,"epivecs_cluster_assignments","csv")}})),document.getElementById("download-results-geojson").addEventListener("click",(()=>{oL.state.result&&vL(oL.state.spatialData,"epivecs_geo","geojson")}));let t=!1;document.getElementById("download-plot-png").addEventListener("click",(()=>{t||(t=!0,document.getElementById("button-download-svg").style.display="none",document.getElementById("download-spinner").style.display="inline-block",setTimeout((()=>{(async function(t,e={}){return(await K$(t,e)).toDataURL()})(document.getElementById("plot-container")).then((function(e){G$(e,"epivecs-plots.png"),t=!1,document.getElementById("button-download-svg").style.display="inline-block",document.getElementById("download-spinner").style.display="none"}))}),10))}))}(),function(){const t=["map-file","vector-data","processing"].map((t=>{const e=document.getElementById(`nav-${t}`);return{tabName:t,navLink:e,tabPane:document.getElementById(`tab-${t}`),active:e.classList.contains("active")}}));for(const e of t)e.navLink.addEventListener("click",(n=>{if(!e.active){e.navLink.classList.add("active"),e.tabPane.classList.add("show"),e.tabPane.classList.add("active");for(const n of t.filter((t=>t.tabName!=e.tabName)))n.active&&(n.active=!1,n.navLink.classList.remove("active"),n.tabPane.classList.remove("show"),n.tabPane.classList.remove("active"));e.active=!0}}))}(),oL.state.addListener(aL,"spatialDataValue"),oL.state.addListener(sL,"vectorDataValue"),oL.state.addListener(cL,"result"),oL.state.addListener(fL,"borderValue","colorValue","xDateValue"),document.getElementById("spatial-file-upload").addEventListener("change",wL),document.getElementById("spatial-extra-file-upload").addEventListener("change",bL),document.getElementById("vector-file-upload").addEventListener("change",_L),oL.state.addListener((t=>{"result"!=t&&pL("ready")}),"spatialData","vectorData","spatialFieldValue","xFieldValue","yFieldValue","missingValuesValue","normValue","smoothingValue","methodValue","kValue"),oL.state.addOnceListener((()=>{null!=oL.state.vectorData&&null!=oL.state.spatialData&&(gL(),oL.state.fireListeners("missingValuesValue"),yL(),function(){for(const t of nL)oL.state.addListener((()=>{oL.urlParams.set(t,oL.state[t])}),t);for(const t of rL)oL.state.addListener((()=>{oL.urlParams.set(t,oL.state[t]),window.location.hash=oL.urlParams.toString()}),t)}())}),"spatialData","vectorData"),oL.runButton.addEventListener("click",(()=>{mL(!0),setTimeout((()=>yL()),50)})),document.getElementById("data-run-button").addEventListener("click",(()=>{mL(!0),setTimeout((()=>yL()),50)})),oL.state.spatialDataOptions=iL,oL.state.spatialExtraDataOptions=["states.geojson"],oL.state.addListener((()=>{if(oL.state.spatialData){const t=function(t,e,n){const r=[dT(t,{stroke:"grey",strokeWidth:.5,fill:"white"})];return e&&r.push(dT(e,{stroke:"black",strokeWidth:1,fill:"none"})),pN({projection:"albers-usa",width:n,marks:r})}(oL.state.spatialData,oL.state.spatialExtraData,480),e=document.getElementById("map-preview-container");e.innerHTML="",e.appendChild(t)}}),"spatialData","spatialExtraData"),oL.state.addListener((()=>{if(oL.state.vectorDataValue.startsWith("[Upload]")&&(oL.state.vectorData=function(t,e,n,r){function i(t){const e=t.map((t=>[new Date(t),t]));return e.sort(((t,e)=>t[0]-e[0])),e.map((t=>t[1]))}let o=[...new Set(t.map((t=>t[e])))].filter((t=>null!=t));o=i(o);let a=[...new Set(t.map((t=>t[r])))].filter((t=>null!=t));const s=Lu(t,(t=>t[r]),(t=>t[e])),u=[];for(const[t,e]of s.entries()){const t=[];o.forEach(((r,i)=>{const o=e.get(r);if(null!=o){const e=parseFloat(o[0][n]);t[i]=Number.isFinite(e)?e:null}})),u.push(t)}return{xField:e,yField:n,xIndexes:o,zIndexes:a,vectors:u}}(oL.state.userVectorData,oL.state.xFieldValue,oL.state.yFieldValue,oL.state.spatialFieldValue)),oL.state.vectorData){const t=yT(oL.state.vectorData),e=document.getElementById("vector-preview-container");e.innerHTML="",e.appendChild(t)}}),"vectorDataValue","userVectorData","spatialFieldValue","xFieldValue","yFieldValue"),oL.state.addListener((()=>{gL();const t=yT(oL.state.vectorData,!0),e=document.getElementById("preprocess-preview-container");e.innerHTML="",e.appendChild(t)}),"missingValuesValue","normValue","smoothingValue"),oL.state.fireListeners("spatialDataValue"),oL.state.fireListeners("vectorDataValue")}();const hL=1100;function dL(t=hL,e="a"){oL.plotContainer.innerHTML="";const n="on"==oL.state.xDateValue?oL.state.vectorData.xIndexes.map((t=>new Date(t))):oL.state.vectorData.xIndexes,r="none"==oL.state.normValue?oL.state.yFieldValue:`${oL.state.yFieldValue} (normalized)`;oL.plotContainer.appendChild(gT(oL.state.spatialData,oL.state.vectorData,oL.state.result,{layout:e,width:t,colorScheme:oL.state.colorValue,drawBorders:oL.state.borderValue,lineXLabel:oL.state.xFieldValue,lineXValues:n,lineYLabel:r,extraSpatialData:oL.state.extraSpatialData}))}function pL(t){for(const e of["run-button","data-run-button"]){const n=document.getElementById(e);"ready"==t?(n.removeAttribute("disabled"),n.className="btn btn-primary w-25"):"pointless"==t?(n.removeAttribute("disabled"),n.className="btn btn-light w-25"):(n.className="btn btn-secondary w-25",n.setAttribute("disabled",""))}}function mL(t){t?(document.getElementById("dash-container").classList.add("d-none"),document.getElementById("loading-spinner").classList.remove("d-none")):(document.getElementById("dash-container").classList.remove("d-none"),document.getElementById("loading-spinner").classList.add("d-none"))}function gL(){let t=[...oL.state.vectorData.vectors];var e;e=t,e=tL.missingMode.get(oL.state.missingValuesValue)(e),e=tL.smoothingMode.get(oL.state.smoothingValue)(e),t=e=tL.normMode.get(oL.state.normValue)(e),oL.state.vectorData.zIndexesAll=[...oL.state.vectorData.zIndexes],oL.state.vectorData.zIndexes=[],t=t.filter(((t,e)=>{const n=t.every((t=>Number.isFinite(t)));return n&&oL.state.vectorData.zIndexes.push(oL.state.vectorData.zIndexesAll[e]),n})),oL.state.vectorData.processedVectors=t}async function yL(){window.location.hash=oL.urlParams.toString(),oL.state.result=null,"USER UPLOAD"==oL.state.vectorDataValue&&!oL.state.userVectorData||"USER UPLOAD"!=oL.state.vectorDataValue&&!oL.state.vectorData?console.warn("Data not loaded yet!"):(uu(oL.state.vectorData.processedVectors,parseInt(oL.state.kValue),oL.state.methodValue).then((t=>{oL.state.result=t})),mL(!1))}function vL(t,e,n="json"){const r="csv"==n?Op(t):JSON.stringify(t),i=new Blob([r],{type:`text/${n};charset=utf-8`}),o=URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.target="_blank",a.download=`${e}.${n}`,a.click(),URL.revokeObjectURL(o)}function wL(t){const e=t.target.files[0];xL(e).then((t=>{const n="[Upload] "+e.name;oL.state.spatialDataOptions=[...iL,n],oL.state.spatialDataValue=n,oL.state.spatialData=t,oL.userSpatialData=t}))}function bL(t){const e=t.target.files[0];xL(e).then((t=>{const n="[Upload] "+e.name;oL.state.spatialExtraDataOptions=["states.geojson",n],oL.state.spatialExtraDataValue=n,oL.state.extraSpatialData=t}))}function _L(t){const e=t.target.files[0];xL(e).then((t=>{oL.state.userVectorData=t;const n="[Upload] "+e.name,r=oL.state.vectorDataOptions.filter((t=>!t.value.startsWith("[Upload]")));oL.state.vectorDataOptions=[...r,n],oL.state.vectorDataValue=n}))}function xL(t){let e=null;const n=new Promise((t=>e=t)),r=new FileReader;return r.addEventListener("load",(function(){let n=null;n="application/json"==t.type||"application/geo+json"==t.type?JSON.parse(r.result):zp(r.result),e(n)}),!1),t&&r.readAsText(t),n}const DL=t=>eL.has(t)?eL.get(t):t;
