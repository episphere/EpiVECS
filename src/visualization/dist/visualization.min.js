!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).visualization={})}(this,(function(t){"use strict";function n(t,n){let e,o;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=o=n):(e>n&&(e=n),o<n&&(o=n)));else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(void 0===e?i>=i&&(e=o=i):(e>i&&(e=i),o<i&&(o=i)))}return[e,o]}function e(t,n,e){if(1==e)return[255,255,255];if(0==e)return[0,0,0];let l,u,f,a,c,s=Math.cos(2*Math.PI*t),h=Math.sin(2*Math.PI*t),M=function(t){const n=.206,e=.03,o=(1+n)/(1+e);return(t*t+n*t)/(o*(t+e))}(e),d=function(t,n,e){let o,i,l=r(n,e),u=function(t,n,e,o,i,l=null){l||(l=r(t,n));let u;if((e-i)*l[1]-(l[0]-i)*o<=0)u=l[1]*i/(o*l[0]+l[1]*(i-e));else{u=l[1]*(i-1)/(o*(l[0]-1)+l[1]*(i-e));{let r=e-i,l=.3963377774*t+.2158037573*n,f=-.1055613458*t-.0638541728*n,a=-.0894841775*t-1.291485548*n,c=r+o*l,s=r+o*f,h=r+o*a;{let t=i*(1-u)+u*e,n=u*o,r=t+n*l,M=t+n*f,d=t+n*a,p=r*r*r,m=M*M*M,v=d*d*d,y=3*c*r*r,b=3*s*M*M,x=3*h*d*d,g=6*c*c*r,q=6*s*s*M,I=6*h*h*d,P=4.0767416621*p-3.3077115913*m+.2309699292*v-1,j=4.0767416621*y-3.3077115913*b+.2309699292*x,k=j/(j*j-.5*P*(4.0767416621*g-3.3077115913*q+.2309699292*I)),w=-P*k,A=-1.2684380046*p+2.6097574011*m-.3413193965*v-1,T=-1.2684380046*y+2.6097574011*b-.3413193965*x,z=T/(T*T-.5*A*(-1.2684380046*g+2.6097574011*q-.3413193965*I)),C=-A*z,E=-.0041960863*p-.7034186147*m+1.707614701*v-1,$=-.0041960863*y-.7034186147*b+1.707614701*x,B=$/($*$-.5*E*(-.0041960863*g-.7034186147*q+1.707614701*I)),D=-E*B;w=k>=0?w:1e6,C=z>=0?C:1e6,D=B>=0?D:1e6,u+=Math.min(w,Math.min(C,D))}}}return u}(n,e,t,1,t,l),f=function(t,n,e=null){e||(e=r(t,n));let o=e[0],i=e[1];return[i/o,i/(1-o)]}(n,e,l),a=.11516993+1/(7.4477897+4.1590124*e+n*(1.75198401*e-2.19557347+n*(-2.13704948-10.02301043*e+n*(5.38770819*e-4.24894561+4.69891013*n)))),c=.11239642+1/(1.6132032-.68124379*e+n*(.40370612+.90148123*e+n*(.6122399*e-.27087943+n*(.00299215-.45399568*e-.14661872*n)))),s=u/Math.min(t*f[0],(1-t)*f[1]);{let n=t*a,e=(1-t)*c;o=.9*s*Math.sqrt(Math.sqrt(1/(1/(n*n*n*n)+1/(e*e*e*e))))}{let n=.4*t,e=.8*(1-t);i=Math.sqrt(1/(1/(n*n)+1/(e*e)))}return[i,o,u]}(M,s,h),p=d[0],m=d[1],v=d[2];n<.8?(u=1.25*n,f=0,a=.8*p,c=1-a/m):(u=5*(n-.8),f=m,a=.2*m*m*1.25*1.25/p,c=1-a/(v-m)),l=f+u*a/(1-c*u);let y=o(M,l*s,l*h);return[255*i(y[0]),255*i(y[1]),255*i(y[2])]}function o(t,n,e){let o=t+.3963377774*n+.2158037573*e,r=t-.1055613458*n-.0638541728*e,i=t-.0894841775*n-1.291485548*e,l=o*o*o,u=r*r*r,f=i*i*i;return[4.0767416621*l-3.3077115913*u+.2309699292*f,-1.2684380046*l+2.6097574011*u-.3413193965*f,-.0041960863*l-.7034186147*u+1.707614701*f]}function r(t,n){let e=function(t,n){let e,o,r,i,l,u,f,a;-1.88170328*t-.80936493*n>1?(e=1.19086277,o=1.76576728,r=.59662641,i=.75515197,l=.56771245,u=4.0767416621,f=-3.3077115913,a=.2309699292):1.81444104*t-1.19445276*n>1?(e=.73956515,o=-.45954404,r=.08285427,i=.1254107,l=.14503204,u=-1.2684380046,f=2.6097574011,a=-.3413193965):(e=1.35733652,o=-.00915799,r=-1.1513021,i=-.50559606,l=.00692167,u=-.0041960863,f=-.7034186147,a=1.707614701);let c=e+o*t+r*n+i*t*t+l*t*n,s=.3963377774*t+.2158037573*n,h=-.1055613458*t-.0638541728*n,M=-.0894841775*t-1.291485548*n;{let t=1+c*s,n=1+c*h,e=1+c*M,o=u*(t*t*t)+f*(n*n*n)+a*(e*e*e),r=u*(3*s*t*t)+f*(3*h*n*n)+a*(3*M*e*e);c-=o*r/(r*r-.5*o*(u*(6*s*s*t)+f*(6*h*h*n)+a*(6*M*M*e)))}return c}(t,n),r=o(1,e*t,e*n),i=Math.cbrt(1/Math.max(Math.max(r[0],r[1]),r[2]));return[i,i*e]}function i(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,.4166666666666667)-.055}function l(t,n=[0,1]){const e=t[1]-t[0],o=n[1]-n[0];return function(r){return o*((r-t[0])/e)+n[0]}}function u(t,n){let e=0;for(let o=0;o<t.length;o++)e+=(t[o]-n[o])**2;return Math.sqrt(e)}t.positionColorer=function(t,o=.5,r="okhsl"){const i=n(t,(t=>t[0])),f=n(t,(t=>t[1])),a=[(i[0]+i[1])/2,(f[0]+f[1])/2],c=function(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let o=-1;for(let r of t)null!=(r=n(r,++o,t))&&(e<r||void 0===e&&r>=r)&&(e=r)}return e}(t.map((t=>u(t,a)))),s=l([0,c]),h=l([0,2*Math.PI]),M=l([0,c],Array.isArray(o)?o:[o,o]);if("okhsl"==r){let t=e;return function(n){const e=Math.atan2(n[0]-a[0],n[1]-a[1]),o=u(n,a);return`rgb(${t(h(e),s(o),M(s(o))).map(Math.round).join(",")})`}}throw Error("Invalid color space ",r)}}));
